(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c911c"],{5825:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"special-punch"},[a("van-tabs",{attrs:{color:"#0084ff","line-width":20,"line-height":4,sticky:"",swipeable:"",animated:"",border:!1},on:{change:t.onChangeTab}},t._l(t.tab,function(e,n){return a("van-tab",{key:n,attrs:{title:e.title}},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[e.content&&e.content.length?a("div",{staticClass:"list"},t._l(e.content,function(t,e){return a("div",{key:e,staticClass:"item"},[a("van-cell",[a("graphicCard",{attrs:{item:t}})],1)],1)}),0):a("div",{staticClass:"no-list"},[t._v("\n                  尚无数据\n              ")])])],1)],1)}),1),a("div",{staticClass:"release-footer-bar"},[a("van-button",{staticClass:"theme-btn",class:t.isBtnShow?"bounceInUp animated":"",attrs:{round:"",size:"normal",type:"primary"},on:{click:function(e){return t.setReleaseSwitch(!0)}}},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n      发布\n    ")]),a("van-popup",{staticClass:"tips-popup",attrs:{overlayStyle:{backgroundColor:"transparent"},"get-container":".footer-bar","lock-scroll":!1},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("tips",{attrs:{isShow:t.show,iconLength:"2",position:"bottom"},on:{close:function(e){return t.setReleaseSwitch(!1)}}})],1)],1)],1)},i=[],s=(a("f763"),a("e20c")),o=a("9993"),c=a("591a"),r=(a("bec1"),a("77e0")),l=a("a618"),h=a("0606"),d={name:"special-punch",mixins:[r["e"]],components:{graphicCard:l["a"],tips:h["a"]},computed:Object(s["a"])({},Object(c["c"])(["userDataState"]),Object(c["e"])(["releaseSwitch"]),{classYear:function(){var t,e=new Date,a=e.getMonth()+1,n=e.getFullYear();return t=a<9?n-1:n,t},tab:function(){var t=this,e=[];return e.push({title:"推荐",level:1},{title:"全校"}),this.banjiList.forEach(function(a){var n={title:t.formatBanjiTitle(a.title),banji_id:a.banji_id};e.push(n)}),e},show:{get:function(){return this.releaseSwitch},set:function(t){this.setReleaseSwitch(t)}}}),data:function(){return{banjiList:[],list:[],tabIndex:0,loading:!1,finished:!1,page:1,isBtnShow:!0}},created:function(){var t=this;this.fetchData(),this.$nextTick(function(){t.isBtnShow=!0})},watch:{$router:"fetchData"},methods:Object(s["a"])({},Object(c["d"])(["setReleaseSwitch"]),{fetchData:function(){var t=this,e={params:{school_id:this.userDataState.school_id||this.userDataState.teacher_school_id,year:this.classYear,sort:"post_num"}};o["a"].get("/book/school_banji/getlist",e).then(function(e){switch(e.data.status){case 1:t.banjiList=e.data.data;break}})},onLoad:function(){this.getList()},getList:function(){var t=this,e={params:{banji_id:this.tab[this.tabIndex].banji_id,sort:"new",level:this.tab[this.tabIndex].level,page:this.page}};return o["a"].get("/book/SchoolArticle/getList",e).then(function(e){switch(e.data.status){case 1:1==t.page?t.tab[t.tabIndex].content=e.data.data:t.tab[t.tabIndex].content=t.tab[t.tabIndex].content.concat(e.data.data),t.$forceUpdate(),t.page++,t.loading=!1,t.tab[t.tabIndex].content>=e.data.count&&(t.finished=!0);break;case 0:t.tab[t.tabIndex].content=[],t.loading=!1,t.finished=!0;break}})},onRefresh:function(){var t=this;this.page=1,this.getList().then(function(){t.loading=!1,t.finished=!1})},onChangeTab:function(t){this.tabIndex=t,this.page=1,this.onRefresh()}})},u=d,b=a("17cc"),f=Object(b["a"])(u,n,i,!1,null,"190f5e36",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0c911c.cb7a9957.js.map