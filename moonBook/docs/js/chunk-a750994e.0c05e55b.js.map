{"version":3,"sources":["webpack:///./src/manage/pages/edit/teacherEdit.vue?6971","webpack:///./src/components/lib/js/schoolInfo.js","webpack:///./src/manage/pages/edit/teacherEdit.vue?da56","webpack:///src/manage/pages/edit/teacherEdit.vue","webpack:///./src/manage/pages/edit/teacherEdit.vue?068b","webpack:///./src/manage/pages/edit/teacherEdit.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_teacherEdit_vue_vue_type_style_index_0_id_7987ba37_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_teacherEdit_vue_vue_type_style_index_0_id_7987ba37_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","d","__webpack_exports__","schoolLevel","schoolType","shcoolScale","slectDuty","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","$route","query","border","on","click-right","past","form","is_master","type","style","color","isConfirm","slot","_v","_s","_e","size","readonly","pageType","input-align","required","label","placeholder","model","value","callback","$$v","$set","expression","banji_name","formatBanjiTitle","is-link","click","toSelectBanjiPage","duty","arrow-direction","show","pickerShow","role_id","desc","status","_l","item","index","key","disabled","role_name","active-value","String","active-color","inactive-color","value-class","input","$event","onSwitchChange","position","get-container","ref","defaultIndex","pickerIndex","show-toolbar","visibleItemCount","columns","change","selectDuty","cancel","onCancel","confirm","square","loading","loading-text","sumbit","staticRenderFns","teacherEditvue_type_script_lang_js_","name","mixins","mixin","computed","Object","objectSpread","vuex_esm","data","is_confirm","schoolInfo","regPhone","roles","created","fetchData","watch","$router","val","methods","_this","api","get","then","res","arr","dvtObj","getDomDvt","dvtArr","userDvtArr","map","e","when","Number","manageSchoolInfo","element","obj","id","push","$toast","msg","_this2","i","_this3","apiType","concat","params","success","warning","_this4","username","$dialog","message","mun","post","getSchoolList","catch","picker","replace","year","classYear","back","_this5","go","mobile","match","test","school_id","school_name","banji_id","invite_code","user_id","edit_teacherEditvue_type_script_lang_js_","component","componentNormalizer"],"mappings":"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","file":"js/chunk-a750994e.0c05e55b.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./teacherEdit.vue?vue&type=style&index=0&id=7987ba37&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./teacherEdit.vue?vue&type=style&index=0&id=7987ba37&scoped=true&lang=css&\"","const schoolLevel = [\r\n    '省级示范',\r\n    '市级示范',\r\n    '市一级',\r\n    '市二级',\r\n    '市三级',\r\n    '示范园',\r\n    '一类园',\r\n    '二类园',\r\n    '普通园'\r\n]\r\n\r\nconst schoolType = [\r\n    '民办学校',\r\n    '公办学校',\r\n    '私立学校',\r\n    '国际学校'\r\n]\r\n\r\nconst shcoolScale = [\r\n    '1000以上',\r\n    '900-1000人',\r\n    '800-900人',\r\n    '700-800人',\r\n    '600-700人',\r\n    '500-600人',\r\n    '400-500人',\r\n    '300-400人',\r\n    '200-300人',\r\n    '100-200人',\r\n    '50-100人'\r\n]\r\n\r\nconst slectDuty = [\r\n    '班主任', \r\n    '带班老师', \r\n    '生活老师'\r\n]\r\n\r\nexport {\r\n  schoolLevel,\r\n  schoolType,\r\n  shcoolScale,\r\n  slectDuty\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"teacher-edit page-padding\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.$route.query.title,\"border\":false},on:{\"click-right\":_vm.past}},[(_vm.form.is_master == 0&&_vm.$route.query.type == \"edit\")?_c('div',{staticClass:\"is-confim\",style:({color:(\"\" + (_vm.isConfirm == 1?'#F56C6C':'#67C23A'))}),attrs:{\"slot\":\"right\"},slot:\"right\"},[_vm._v(\"\\n      \"+_vm._s(_vm.isConfirm == 0?'通过':'请出')+\"\\n    \")]):_vm._e()]),_c('div',{staticClass:\"container\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"size\":\"large\",\"border\":false,\"readonly\":_vm.pageType=='edit',\"input-align\":\"right\",\"required\":_vm.pageType!='edit',\"label\":\"姓名\",\"placeholder\":\"请输入用户姓名\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}}),_c('van-field',{attrs:{\"size\":\"large\",\"border\":false,\"readonly\":_vm.pageType=='edit',\"input-align\":\"right\",\"required\":_vm.pageType!='edit',\"label\":\"手机号\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.form.mobile),callback:function ($$v) {_vm.$set(_vm.form, \"mobile\", $$v)},expression:\"form.mobile\"}})],1),_c('van-cell-group',{attrs:{\"border\":false}},[_c('van-cell',{attrs:{\"title\":\"班级\",\"border\":false,\"value\":_vm.form.banji_name?_vm.formatBanjiTitle(_vm.form.banji_name):'请设置班级',\"is-link\":\"\"},on:{\"click\":_vm.toSelectBanjiPage}}),_c('van-cell',{attrs:{\"title\":\"职务\",\"border\":false,\"value\":_vm.form.duty,\"is-link\":\"\",\"arrow-direction\":_vm.show?\"up\":\"down\"},on:{\"click\":_vm.pickerShow}})],1),(_vm.form.role_id!=0)?_c('van-panel',{attrs:{\"title\":\"角色设置\",\"desc\":\"对应角色设有不同权限\",\"status\":_vm.form.role_id?'':'尚未取得设置权限'}},_vm._l((_vm.roles),function(item,index){return _c('div',{key:index,staticClass:\"switch-cell\"},[(item.disabled)?_c('van-switch-cell',{attrs:{\"disabled\":!item.disabled,\"title\":item.role_name,\"value\":_vm.form.role_id,\"active-value\":String(index),\"active-color\":\"#67C23A\",\"inactive-color\":\"#f2f6fc\",\"value-class\":\"switch-cell-value\"},on:{\"input\":function($event){return _vm.onSwitchChange(index)}}}):_vm._e()],1)}),0):_vm._e()],1),_c('van-popup',{attrs:{\"position\":\"bottom\",\"get-container\":\"#app\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('van-picker',{ref:\"picker\",attrs:{\"defaultIndex\":_vm.pickerIndex,\"show-toolbar\":\"\",\"title\":\"职务\",\"visibleItemCount\":3,\"columns\":_vm.columns},on:{\"change\":_vm.selectDuty,\"cancel\":_vm.onCancel,\"confirm\":function($event){_vm.show = false}}}),_c('van-field',{attrs:{\"size\":\"large\",\"input-align\":\"right\",\"label\":\"填写职务\",\"placeholder\":\"请填写职务\"},model:{value:(_vm.duty),callback:function ($$v) {_vm.duty=$$v},expression:\"duty\"}})],1),_c('div',{staticClass:\"footer-bar\"},[_c('van-button',{staticClass:\"theme-btn\",attrs:{\"square\":\"\",\"loading\":_vm.loading,\"loading-text\":\"正在提交中...\",\"type\":\"primary\",\"size\":\"normal\"},on:{\"click\":_vm.sumbit}},[_vm._v(\"提 交\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"teacher-edit page-padding\">\r\n    <van-nav-bar :title=\"$route.query.title\" :border='false' @click-right=\"past\">\r\n      <div class=\"is-confim\" :style=\"{color:`${isConfirm == 1?'#F56C6C':'#67C23A'}`}\" slot=\"right\" v-if='form.is_master == 0&&$route.query.type == \"edit\"'>\r\n        {{isConfirm == 0?'通过':'请出'}}\r\n      </div>\r\n    </van-nav-bar>\r\n\r\n    <div class=\"container\">\r\n      <van-cell-group>\r\n        <van-field size='large' :border='false' v-model=\"form.username\" :readonly=\"pageType=='edit'\" input-align='right'\r\n          :required=\"pageType!='edit'\" label=\"姓名\" placeholder=\"请输入用户姓名\" />\r\n        <van-field size='large' :border='false' v-model=\"form.mobile\" :readonly=\"pageType=='edit'\" input-align='right'\r\n          :required=\"pageType!='edit'\" label=\"手机号\" placeholder=\"请输入手机号\" />\r\n      </van-cell-group>\r\n      <van-cell-group :border='false'>\r\n        <van-cell title=\"班级\" :border='false' :value=\"form.banji_name?formatBanjiTitle(form.banji_name):'请设置班级'\" is-link @click=\"toSelectBanjiPage\" />\r\n        <van-cell title=\"职务\" :border='false' :value=\"form.duty\" is-link @click=\"pickerShow\" :arrow-direction='show?\"up\":\"down\"' />\r\n      </van-cell-group>\r\n      <van-panel title=\"角色设置\" desc=\"对应角色设有不同权限\" :status=\"form.role_id?'':'尚未取得设置权限'\" v-if='form.role_id!=0'>\r\n        <div class=\"switch-cell\" v-for='(item,index) in roles' :key=\"index\">\r\n            <van-switch-cell v-if='item.disabled' :disabled='!item.disabled' :title=\"item.role_name\" :value=\"form.role_id\" :active-value='String(index)' active-color='#67C23A' inactive-color='#f2f6fc' @input='onSwitchChange(index)' value-class='switch-cell-value'/>\r\n        </div>\r\n      </van-panel>\r\n    </div>\r\n\r\n    <van-popup v-model=\"show\" position=\"bottom\" get-container='#app'>\r\n      <van-picker ref='picker' :defaultIndex='pickerIndex' show-toolbar title=\"职务\" :visibleItemCount='3' :columns=\"columns\" @change=\"selectDuty\" @cancel=\"onCancel\" @confirm=\"show = false\" />\r\n      <van-field size='large' input-align='right' label=\"填写职务\" v-model=\"duty\" placeholder=\"请填写职务\" />\r\n    </van-popup>\r\n\r\n    <div class=\"footer-bar\">\r\n      <van-button class=\"theme-btn\" square :loading='loading' loading-text='正在提交中...' type=\"primary\" size=\"normal\"\r\n        @click=\"sumbit\">提 交</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from './../../../components/lib/js/api'\r\nimport { slectDuty } from './../../../components/lib/js/schoolInfo'\r\nimport { getBanjiYear, newBanjiTitle, verification } from './../../../components/lib/js/mixin'\r\nimport { mapActions, mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name:'teacherEdit',\r\n  mixins:[getBanjiYear,newBanjiTitle,verification],\r\n  computed: {\r\n    ...mapGetters('manage', ['manageSchoolInfo'])\r\n  },\r\n  data() {\r\n    return {\r\n      show: false,\r\n      pageType: this.$route.query.type,\r\n      form: {\r\n        ...this.$route.query,\r\n      },\r\n      isConfirm: this.$route.query.is_confirm,\r\n      columns: slectDuty,\r\n      regPhone: /^1[34578]\\d{9}$/,\r\n      loading: false,\r\n      duty: '',\r\n      roles:[],\r\n      pickerIndex:0\r\n    }\r\n  },\r\n  created () {\r\n    this.fetchData()\r\n    if(!this.form.duty){\r\n      this.form.duty = '班主任'\r\n    }\r\n  },\r\n  watch: {\r\n    '$router': 'fetchData',\r\n    duty(val) {\r\n      this.form.duty = val\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions('manage', ['getSchoolList']),\r\n    fetchData() {\r\n        axios.get('/SchoolManage/teacher/getRoles').then(res=>{\r\n            switch(res.data.status){\r\n                case 1:\r\n                    let arr = []\r\n                    let dvtObj = this.getDomDvt('修改老师')\r\n                    let dvtArr = dvtObj.value\r\n                  \r\n                    let userDvtArr = []\r\n\r\n                    dvtArr.map(e =>{\r\n                        if(e.when == Number(this.manageSchoolInfo.role_id)){\r\n                            userDvtArr = e.value\r\n                        }\r\n                    })\r\n\r\n                    res.data.data.map(element=>{\r\n                        let obj = {\r\n                            ...element\r\n                        }\r\n\r\n                        userDvtArr.map(e=>{\r\n                            if(e == Number(element.id)){\r\n                                obj.disabled = true\r\n                            }\r\n                        })\r\n\r\n                        arr.push(obj)\r\n                    })\r\n\r\n                    this.roles = arr\r\n\r\n                    break\r\n                default:\r\n                    this.$toast(res.data.msg)\r\n            }\r\n        })\r\n    },\r\n    pickerShow(){\r\n      this.show = true\r\n\r\n      let index = 0\r\n      slectDuty.map((e,i)=>{\r\n        if(e == this.form.duty){\r\n          index = i\r\n        }\r\n      })\r\n      \r\n      this.pickerIndex = index\r\n    },\r\n    past() {\r\n\r\n      let apiType = this.isConfirm == 1 ? 'kick' : 'check'\r\n\r\n      axios.get(`/SchoolManage/teacher/${apiType}`, { \r\n        params: {\r\n          id: this.$route.query.id\r\n        }      \r\n      }).then(res => {\r\n        switch (res.data.status) {\r\n          case 1:\r\n            this.isConfirm = `${apiType == 'kick' ? 0 : 1}`\r\n            this.$toast.success(res.data.msg)\r\n            break\r\n          default:\r\n            this.$toast(res.data.msg)\r\n        }\r\n      })\r\n\r\n    },\r\n    onSwitchChange(index) {\r\n\r\n      let warning\r\n\r\n      switch (index) {\r\n        case 3:\r\n          warning = `此操作将会把您的学校群主操作权限移交给${this.form.username},您确定吗?`\r\n          break\r\n        case 2:\r\n          warning = `${this.role_id == 3 ? `确定要取消${this.form.username}的管理权限吗?` : `确定要将${this.form.username}设置为管理员吗?`}`\r\n          break\r\n        case 1:\r\n          warning = `此操作将会取消${this.form.username}的管理权限,您确定吗?`\r\n          break\r\n        default:\r\n          warning = `此操作将会变更${this.form.username}的相关权限,您确定吗?`\r\n      }\r\n\r\n      this.$dialog.confirm({\r\n        message: warning\r\n      }).then(() => {\r\n\r\n        let mun = index == this.form.role_id?'0':String(index)\r\n\r\n        axios.post('/SchoolManage/teacher/edit', {\r\n          ...this.form,\r\n          role_id: mun\r\n        }).then(res => {\r\n          switch (res.data.status) {\r\n            case 1:\r\n              this.form.role_id = mun\r\n              this.getSchoolList()\r\n              break\r\n            default:\r\n              this.$toast(res.data.msg)\r\n\r\n          }\r\n        })\r\n      }).catch(() => {\r\n        // on cancel\r\n      })\r\n\r\n    },\r\n    selectDuty(picker, value, index) {\r\n      // picker.setColumnValues(0, value)\r\n      this.form.duty = value\r\n    },\r\n    onCancel() {\r\n      this.show = false\r\n      this.form.duty = this.$route.query.duty\r\n    },\r\n    toSelectBanjiPage() {\r\n      this.$router.replace({\r\n        name: 'banjiList',\r\n        query: {\r\n          ...this.$route.query,\r\n          year: this.classYear,\r\n          back: this.$route.name\r\n        }\r\n      })\r\n    },\r\n    sumbit() {\r\n      switch (this.$route.query.type) {\r\n        case 'edit':\r\n          this.$dialog.confirm({\r\n            message: `您确定要修改${this.form.username}的相关信息吗?`\r\n          }).then(() => {\r\n            this.loading = true\r\n            axios.post('/SchoolManage/teacher/edit', { ...this.form }).then(res => {\r\n              this.loading = false\r\n              switch (res.data.status) {\r\n                case 1:\r\n                  this.$toast.success(res.data.msg)\r\n                  this.$router.go(-1)\r\n                  break\r\n                default:\r\n                  this.$toast(res.data.msg)\r\n              }\r\n            })\r\n          }).catch(() => {\r\n            // on cancel\r\n          })\r\n          break\r\n        case 'add':\r\n          if (!this.form.username) {\r\n            this.$toast('请填写姓名')\r\n          } else if (!this.form.mobile) {\r\n            this.$toast('请填写手机号')\r\n          } else if (this.form.username.match(/^[\\u4e00-\\u9fa5]{2,4}$/i) == null) {\r\n            this.$toast('请正确填写姓名')\r\n          } else if (!this.regPhone.test(this.form.mobile)) {\r\n            this.$toast('请正确填写手机号')\r\n          } else {\r\n            this.loading = true\r\n            let data = {\r\n              ...this.$route.query,\r\n              ...this.form\r\n            }\r\n\r\n            axios.post('/SchoolManage/teacher/edit', data).then(res => {\r\n              this.loading = false\r\n              switch (res.data.status) {\r\n                case 1:\r\n                  this.$toast.success(res.data.msg)\r\n\r\n                  this.$router.replace({\r\n                    name: 'share',\r\n                    query: {\r\n                      school_id: this.$route.query.school_id,\r\n                      school_name: this.$route.query.school_name,\r\n                      banji_id: this.$route.query.banji_id,\r\n                      banji_name: this.$route.query.banji_name,\r\n                      invite_code: this.$route.query.invite_code,\r\n                      user_id: this.$route.query.user_id\r\n                    }\r\n                  })\r\n\r\n                  break\r\n                default:\r\n                  this.$toast(res.data.msg)\r\n              }\r\n            })\r\n          }\r\n          break\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.footer-bar {\r\n  width: 100%;\r\n  position: fixed;\r\n  bottom: 0;\r\n  z-index: 200;\r\n}\r\n\r\n.theme-btn {\r\n  width: 100%;\r\n}\r\n\r\n.prompt-text {\r\n  font-size: 12px;\r\n  color: #f56c6c;\r\n  margin-right: 15px;\r\n}\r\n\r\n.column {\r\n  justify-content: space-between;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./teacherEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./teacherEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./teacherEdit.vue?vue&type=template&id=7987ba37&scoped=true&\"\nimport script from \"./teacherEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./teacherEdit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./teacherEdit.vue?vue&type=style&index=0&id=7987ba37&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7987ba37\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}