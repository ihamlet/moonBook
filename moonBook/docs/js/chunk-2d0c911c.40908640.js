(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c911c"],{5825:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"special-punch"},[e("van-tabs",{attrs:{color:"#0084ff","line-width":20,"line-height":4,sticky:"",swipeable:"",animated:"",border:!1},on:{change:t.onChangeTab}},t._l(t.tab,function(a,n){return e("van-tab",{key:n,attrs:{title:a.title}},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[a.content&&a.content.length?e("div",{staticClass:"list"},t._l(a.content,function(t,a){return e("div",{key:a,staticClass:"item"},[e("van-cell",[e("graphicCard",{attrs:{item:t}})],1)],1)}),0):e("div",{staticClass:"no-list"},[t._v("\n                  尚无数据\n              ")])])],1)],1)}),1),e("div",{staticClass:"release-footer-bar"},[e("van-button",{staticClass:"theme-btn",class:t.isBtnShow?"bounceInUp animated":"",attrs:{round:"",size:"normal",type:"primary"},on:{click:function(a){return t.setReleaseSwitch(!0)}}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n      发布\n    ")]),e("van-popup",{staticClass:"tips-popup",attrs:{overlayStyle:{backgroundColor:"transparent"},"get-container":".footer-bar","lock-scroll":!1},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("tips",{attrs:{isShow:t.show,iconLength:"2",position:"bottom"},on:{close:function(a){return t.setReleaseSwitch(!1)}}})],1)],1)],1)},i=[],s=(e("ac6a"),e("cebc")),o=e("9993"),c=e("591a"),r=e("77e0"),l=e("a618"),h=e("0606"),d={name:"special-punch",mixins:[r["f"]],components:{graphicCard:l["a"],tips:h["a"]},computed:Object(s["a"])({},Object(c["c"])(["userDataState"]),Object(c["e"])(["releaseSwitch"]),{classYear:function(){var t,a=new Date,e=a.getMonth()+1,n=a.getFullYear();return t=e<9?n-1:n,t},tab:function(){var t=this,a=[];return a.push({title:"推荐",level:1},{title:"全校"}),this.banjiList.forEach(function(e){var n={title:t.formatBanjiTitle(e.title),banji_id:e.banji_id};a.push(n)}),a},show:{get:function(){return this.releaseSwitch},set:function(t){this.setReleaseSwitch(t)}}}),data:function(){return{banjiList:[],list:[],tabIndex:0,loading:!1,finished:!1,page:1,isBtnShow:!0}},created:function(){var t=this;this.fetchData(),this.$nextTick(function(){t.isBtnShow=!0})},watch:{$router:"fetchData"},methods:Object(s["a"])({},Object(c["d"])(["setReleaseSwitch"]),{fetchData:function(){var t=this,a={params:{school_id:this.userDataState.school_id||this.userDataState.teacher_school_id,year:this.classYear,sort:"post_num"}};o["a"].get("/book/school_banji/getlist",a).then(function(a){switch(a.data.status){case 1:t.banjiList=a.data.data;break}})},onLoad:function(){this.getList()},getList:function(){var t=this,a={params:{banji_id:this.tab[this.tabIndex].banji_id,sort:"new",level:this.tab[this.tabIndex].level,page:this.page}};return o["a"].get("/book/SchoolArticle/getList",a).then(function(a){switch(a.data.status){case 1:1==t.page?t.tab[t.tabIndex].content=a.data.data:t.tab[t.tabIndex].content=t.tab[t.tabIndex].content.concat(a.data.data),t.$forceUpdate(),t.page++,t.loading=!1,t.tab[t.tabIndex].content>=a.data.count&&(t.finished=!0);break;case 0:t.tab[t.tabIndex].content=[],t.loading=!1,t.finished=!0;break}})},onRefresh:function(){var t=this;this.page=1,this.getList().then(function(){t.loading=!1,t.finished=!1})},onChangeTab:function(t){this.tabIndex=t,this.page=1,this.onRefresh()}})},u=d,b=e("2877"),f=Object(b["a"])(u,n,i,!1,null,"35f81da1",null);a["default"]=f.exports}}]);