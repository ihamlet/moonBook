(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d52f37f"],{"1eb7":function(t,e,a){},"33a0":function(t,e,a){},6506:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-cell",{attrs:{border:!1},on:{click:t.selectTeacher}},[a("div",{staticClass:"user-card flex flex-align"},[a("div",{staticClass:"info flex flex-align",on:{click:t.toEditPage}},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.avatar},on:{error:t.imgError}}),a("div",{staticClass:"user-info"},[a("div",{staticClass:"name"},[t._v(t._s(t.item.username))]),a("div",{staticClass:"tags"},[a("van-tag",{attrs:{plain:"",round:"",type:"primary"}},[t._v(t._s(t.item.role_name))])],1),a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"child flex"},[t._v(t._s(t.formatBanjiTitle(t.item.banji_name))+" "),t.item.banji_name&&t.item.duty?a("span",[t._v("|")]):t._e(),t._v(" "+t._s(t.item.duty))])])]),t.isBtnShow?a("div",{staticClass:"operation-btn flex flex-align"},[a("van-button",{staticClass:"pass",attrs:{size:"small",round:"",type:"info"},on:{click:t.info}},[t._v("详情")]),"list"!=t.type?a("van-button",{staticClass:"past",attrs:{disabled:!(1==t.manageSchoolInfo.is_master&&0==t.item.is_master),size:"small",round:"",type:1==t.item.is_confirm?"warning":"primary"},on:{click:t.past}},[t._v("  "+t._s(1==t.item.is_confirm?"请出":"通过")+" ")]):t._e()],1):a("i",{staticClass:"iconfont icon-arrow"},[t._v("")])]),a("van-popup",{staticClass:"popup-techaer",attrs:{"get-container":"#app"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"popup-close",on:{click:function(e){t.show=!1}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"techer-card"},[a("div",{staticClass:"avatar",on:{click:t.toEditPage}},[t.item.avatar?a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.avatar},on:{error:t.imgError}}):t._e()]),a("van-cell-group",[t.item.mobile?a("van-cell",{attrs:{title:"手机号",border:!1}},[a("a",{staticClass:"theme-color",attrs:{href:"tel:"+t.item.mobile}},[t._v("请触拨号")])]):t._e(),t.item.username?a("van-cell",{attrs:{title:"姓名",value:t.item.username,border:!1}}):t._e(),t.item.school_name?a("van-cell",{attrs:{title:"学校",value:t.item.school_name,border:!1,"value-class":"info-cell","is-link":""},on:{click:t.toSchool}}):t._e(),t.item.banji_name?a("van-cell",{attrs:{title:"班级",value:t.formatBanjiTitle(t.item.banji_name),"is-link":"",border:!1},on:{click:t.toBanji}}):t._e(),a("van-cell",{attrs:{title:"职位",value:t.item.duty?t.item.duty:"老师",border:!1}}),t.teacherInfo.confirm_user_id>0?a("van-cell",{attrs:{title:"审核人",value:t.teacherInfo.confirm_user_name==t.item.username?"自己":t.teacherInfo.confirm_user_name,border:!1}}):t._e(),a("van-cell",{attrs:{title:"审核时间",value:t.teacherInfo.confirm_date,"value-class":"info-cell",border:!1}})],1),"list"!=t.type&&t.verification("修改老师")?a("div",{staticClass:"popup-footer flex-align flex"},[a("div",{staticClass:"btn"},[a("van-button",{staticClass:"edit",attrs:{size:"small",type:"info",round:"",plain:""},on:{click:t.toEditPage}},[t._v(" 编辑 ")])],1),a("div",{staticClass:"btn"},[a("van-button",{staticClass:"past",attrs:{disabled:!(1==t.manageSchoolInfo.is_master&&0==t.item.is_master),size:"small",round:"",type:1==t.item.is_confirm?"warning":"primary"},on:{click:t.past}},[t._v("  "+t._s(1==t.item.is_confirm?"请出":"通过")+" ")])],1)]):t._e()],1)])],1)},s=[],n=a("cebc"),o=a("9993"),c=a("591a"),l=a("77e0"),r={name:"userCard",mixins:[l["e"],l["g"]],computed:Object(n["a"])({},Object(c["c"])("manage",["manageSchoolInfo"])),props:{item:{type:Object,default:function(){return{avatar:"",username:"",banji_id:0,banji_name:"3",duty:"信息老师",is_confirm:0,is_master:0,mobile:"",school_name:"微美幼儿园",school_id:0,id:0,role_name:""}}},type:{type:String,default:""},isBtnShow:{type:Boolean,default:!0}},data:function(){return{show:!1,teacherInfo:""}},methods:{info:function(){var t=this;o["a"].get("/SchoolManage/teacher/getTeacher",{params:{id:this.item.id}}).then(function(e){switch(e.data.status){case 1:t.show=!0,t.teacherInfo=e.data.data;break;default:t.$toast(e.data.msg)}})},past:function(){var t,e=this,a=1==this.item.is_confirm?"kick":"check";switch(a){case"kick":t="您确定要请出".concat(this.item.username,"老师吗?此操作后，该用户将无法进入学校和班级。");break;case"check":t="您确定要通过".concat(this.item.username,"吗?");break}this.$dialog.confirm({message:t}).then(function(){o["a"].get("/SchoolManage/teacher/".concat(a),{params:{id:e.item.id}}).then(function(t){switch(t.data.status){case 1:e.$toast.success(t.data.msg),e.$emit("statusChange",e.item.id,a);break;default:e.$toast(t.data.msg)}})}).catch(function(){})},toSchool:function(){this.item.school_id>0&&this.$router.push({name:"apps-school",query:{id:this.item.school_id}})},toBanji:function(){this.item.banji_id>0&&this.$router.push({name:"class-home",query:{id:this.item.banji_id,cate_id:116,home_type:"banji"}})},toEditPage:function(){"list"!=this.type&&this.verification("修改老师")&&this.$router.push({name:"teacherEdit",query:Object(n["a"])({},this.teacherInfo,this.item,{type:"edit",title:"成员设置"})})},selectTeacher:function(){this.$emit("selectTeacher",this.item)},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"}}},m=r,h=(a("7870"),a("2877")),d=Object(h["a"])(m,i,s,!1,null,"152f4454",null);e["a"]=d.exports},7870:function(t,e,a){"use strict";var i=a("1eb7"),s=a.n(i);s.a},"876b":function(t,e,a){},abd3:function(t,e,a){"use strict";var i=a("876b"),s=a.n(i);s.a},ce83:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list page-padding"},[a("van-nav-bar",{attrs:{title:"添加到"+t.$route.query.title,fixed:"",border:!1}}),t.top2bottom?a("div",{staticClass:"search"},[a("form",{attrs:{action:"/"}},[a("van-search",{attrs:{placeholder:"请输入姓名/手机号查找",shape:"round","show-action":""},on:{search:t.onSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"theme-color",attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")]),a("div",{staticClass:"theme-color",attrs:{slot:"label"},on:{click:function(e){t.show=!0}},slot:"label"},[t._v("\n          "+t._s(t.label)+"\n        ")])])],1)]):t._e(),a("div",{staticClass:"container",style:{paddingTop:t.top2bottom?"95px":"45px"}},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t.list.length?a("div",{staticClass:"list"},t._l(t.list,function(e,i){return a("div",{key:i,staticClass:"module-card"},["teacher"==t.$route.query.pageType&&e.user_id>0?a("userCard",{attrs:{item:e,isBtnShow:!1,type:"list"},on:{selectTeacher:t.addTeacher}}):t._e(),"students"==t.$route.query.pageType?a("studentCard",{attrs:{selectShow:!0,item:e,isBtnShow:!1},on:{electChild:t.selectSwitch}}):t._e()],1)}),0):a("div",{staticClass:"no-list"},[t._v("\n          尚无成员\n        ")])])],1)],1),a("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消"},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),a("transition",{attrs:{"enter-active-class":"bounceInUp animated","leave-active-class":"bounceOutDown animated",mode:"out-in"}},[t.selectChilds.length?a("van-button",{staticClass:"theme-btn boss-key",attrs:{round:"",type:"primary"},on:{click:t.changeShift}},[t._v("选择添加")]):t._e()],1)],1)},s=[],n=a("cebc"),o=(a("ac6a"),a("7f7f"),a("9993")),c=a("d3b8"),l=a("6506"),r=a("77e0"),m={name:"list",mixins:[r["f"],r["i"]],components:{studentCard:c["a"],userCard:l["a"]},data:function(){return{page:1,loading:!1,finished:!1,selectBtnLoading:!1,list:[],value:"",show:!1,actions:[{name:"全部"},{name:"已审核"},{name:"待审核"}],label:"全部"}},watch:{value:function(){this.list=[],this.onSearch()}},methods:{onLoad:function(){var t=this,e={params:{page:this.page,keyword:this.value,sort:"banji_id"}};switch(this.$route.query.pageType){case"teacher":switch(this.label){case"已审核":e.params.is_confirm=1;break;case"待审核":e.params.is_confirm=0;break}break;case"students":switch(this.label){case"已审核":e.params.is_banji_confirm=1;break;case"待审核":e.params.is_banji_confirm=0;break}break}return o["a"].get("/SchoolManage/".concat(this.$route.query.pageType,"/getList"),e).then(function(e){switch(e.data.status){case 1:1==t.page?t.list=e.data.data:t.list=t.list.concat(e.data.data),t.page++,t.loading=!1,t.list.length>=e.data.count&&(t.finished=!0);break;default:t.$toast(e.data.msg)}})},onRefresh:function(){var t=this;this.page=1,this.onLoad().then(function(){t.loading=!1,t.finished=!1})},onSearch:function(){this.onRefresh()},onSelect:function(t){this.show=!1,this.label=t.name,this.onRefresh()},changeShift:function(){var t=this,e=[],a=[];this.selectChilds.forEach(function(t){e.push(t.id),a.push(t.name)});var i={loading:"添加中...",confirm:"您确定要将".concat(a,"添加到").concat(this.$route.query.title,"吗?")},s={params:{id:e,banji_id:this.$route.query.banji_id}};this.$dialog.confirm({message:i.confirm}).then(function(){t.selectBtnLoading=!0;var a=t.$toast.loading({forbidClick:!0,message:i.loading});o["a"].get("/SchoolManage/students/transmit",s).then(function(i){t.selectBtnLoading=!1,a.clear(),t.$toast("添加了".concat(e.length,"条记录")),t.onRefresh(),t.$router.go(-1)})}).catch(function(){})},addTeacher:function(t){var e=this;this.$dialog.confirm({message:"您确定要添加".concat(t.username,"做为").concat(this.$route.query.title,"的班级老师吗?")}).then(function(){e.loading=!0,o["a"].post("/SchoolManage/teacher/edit",Object(n["a"])({},t,{banji_id:e.$route.query.banji_id,banji_name:e.$route.query.title})).then(function(t){switch(e.loading=!1,t.data.status){case 1:e.$toast.success(t.data.msg),e.$router.go(-1);break;default:e.$toast(t.data.msg)}})}).catch(function(){})}}},h=m,d=(a("e1ea"),a("2877")),u=Object(d["a"])(h,i,s,!1,null,"73c1bad2",null);e["default"]=u.exports},d3b8:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-cell",{attrs:{border:!1}},[a("div",{staticClass:"user-card flex flex-align"},[a("div",{staticClass:"info flex flex-align"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.avatar},on:{error:t.imgError,click:function(e){t.show=!0}}}),a("div",{staticClass:"user-info",on:{click:function(e){t.show=!0}}},[a("div",{staticClass:"name"},[t._v(t._s(t.item.name))]),0!=t.activeId?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"child flex"},[t._v(t._s(t.item.parent_name?t.item.parent_name+" | ":"")+t._s(t.item.relation_name))]):a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"child flex"},[t._v(t._s(t.item.banji_name?t.formatBanjiTitle(t.item.banji_name)+" | ":"")+t._s(t.item.parent_name))])])]),t.isBtnShow&&!t.selectShow?a("div",{staticClass:"operation-btn flex flex-align"},[a("van-button",{staticClass:"past",attrs:{size:"small",round:"",type:1==t.item.is_banji_confirm?"warning":"primary"},on:{click:t.past}},[t._v("  "+t._s(1==t.item.is_banji_confirm?"请出":"通过")+" ")])],1):a("div",{staticClass:"select",on:{click:t.selectChild}},[t.select?a("i",{staticClass:"icon-select theme-color iconfont"},[t._v("")]):t.selectShow?a("i",{staticClass:"icon-select to-be-selected  iconfont"},[t._v("")]):t._e()])]),a("van-popup",{staticClass:"popup-techaer",attrs:{"get-container":"#app"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"popup-close",on:{click:function(e){t.show=!1}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"techer-card"},[a("div",{staticClass:"avatar"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.avatar},on:{error:t.imgError}})]),a("van-cell-group",[a("van-cell",{attrs:{title:"姓名",value:t.item.name,border:!1}}),t.item.parent_name?a("van-cell",{attrs:{title:"家长",value:t.item.parent_name,border:!1,"value-class":"info-cell"}}):t._e(),t.item.parent_mobile?a("van-cell",{attrs:{title:"联系电话",border:!1}},[a("a",{staticClass:"theme-color",attrs:{href:"tel:"+t.item.parent_mobile}},[t._v("请触拨号")])]):t._e(),t.item.school_name?a("van-cell",{attrs:{title:"学校",value:t.item.school_name,border:!1,"value-class":"info-cell","is-link":""},on:{click:t.toSchool}}):t._e(),t.item.banji_name?a("van-cell",{attrs:{title:"班级",value:t.formatBanjiTitle(t.item.banji_name),"is-link":"",border:!1},on:{click:t.toBanji}}):t._e(),t.item.banji_apply_date?a("van-cell",{attrs:{title:"申请时间",value:t.item.banji_apply_date,border:!1}}):t._e()],1),a("div",{staticClass:"popup-footer flex-align flex"},[a("div",{staticClass:"btn"},[a("van-button",{staticClass:"edit",attrs:{size:"small",type:"info",round:"",plain:""},on:{click:t.changeBanji}},[t._v(" 换班 "+t._s(0!=t.activeId?"/转班":"")+" ")])],1),a("div",{staticClass:"btn"},[a("van-button",{staticClass:"past",attrs:{size:"small",round:"",type:1==t.item.is_banji_confirm?"warning":"primary"},on:{click:t.past}},[t._v("  "+t._s(1==t.item.is_confirm?"请出":"通过")+" ")])],1)])],1)])],1)},s=[],n=(a("7f7f"),a("c5f6"),a("cebc")),o=a("9993"),c=a("77e0"),l=a("591a"),r={name:"userCard",mixins:[c["e"],c["b"]],computed:Object(n["a"])({},Object(l["c"])("manage",["manageSchoolInfo"])),props:{item:{type:Object,default:function(){return{avatar:"",name:"",banji_id:0,banji_name:"3",parent_name:"赵静静",relation_name:"妈妈",is_banji_confirm:0,school_name:"微美幼儿园",parent_mobile:"",school_id:0,id:0}}},activeId:{type:Number,default:0},selectShow:{type:Boolean,default:!1},isBtnShow:{type:Boolean,default:!0}},data:function(){return{show:!1,select:!1}},watch:{selectShow:function(t){t||(this.select=t)}},methods:{past:function(){var t,e=this,a=1==this.item.is_banji_confirm?"kick":"check";switch(a){case"kick":t="您确定要请出".concat(this.item.name,"该学生吗?此操作后，该用户将无法进入").concat(this.item.banji_name?this.formatBanjiTitle(this.item.banji_name):"班级","。");break;case"check":t="您确定要通过".concat(this.item.name,"吗?");break}this.$dialog.confirm({message:t}).then(function(){o["a"].get("/SchoolManage/students/".concat(a),{params:{id:e.item.id}}).then(function(t){switch(t.data.status){case 1:"check"==a?(e.item.is_banji_confirm=1,e.$toast.success("审核通过")):(e.item.is_banji_confirm=0,e.$toast(t.data.msg)),e.$emit("statusChange");break;default:e.$toast(t.data.msg)}})}).catch(function(){})},toSchool:function(){this.item.school_id>0&&this.$router.push({name:"apps-school",query:{id:this.item.school_id}})},toBanji:function(){this.item.banji_id>0&&this.$router.push({name:"class-home",query:{id:this.item.banji_id,cate_id:116,home_type:"banji"}})},changeBanji:function(){"edit"==this.$route.query.pageType?this.$router.push({name:"banjiList",query:{id:this.item.id,names:this.item.name,school_id:this.manageSchoolInfo.school_id,set:"transmit",type:"select",year:this.classYear,back:this.$route.name}}):(this.$emit("selectShowTrue"),this.show=!1,this.selectChild())},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},selectChild:function(){this.select=!this.select,this.$emit("electChild",this.select,this.item)}}},m=r,h=(a("abd3"),a("2877")),d=Object(h["a"])(m,i,s,!1,null,"e1574e70",null);e["a"]=d.exports},e1ea:function(t,e,a){"use strict";var i=a("33a0"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-7d52f37f.9be4fff4.js.map