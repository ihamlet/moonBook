(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25e8e084"],{"0db5":function(t,a,e){"use strict";var s=e("2845"),i=e.n(s);i.a},"27a8":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"zoom page-padding"},[e("van-nav-bar",{key:t.$route.query.id,class:t.fixedHeaderBar?"theme-nav":"",attrs:{zIndex:99,title:t.fixedHeaderBar?t.$route.meta.title:(t.userInfo.name?t.userInfo.name:"")+"的空间",fixed:"",border:!1}}),t._m(0),e("div",{staticClass:"page-container"},[e("van-pull-refresh",{key:t.$route.query.id,on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"module"},[e("div",{ref:"domHeight",staticClass:"user-card flex flex-align"},[e("div",{staticClass:"info flex flex-align"},[e("div",{staticClass:"avatar"},[e("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.userInfo.avatar},on:{error:t.imgError}})]),e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v(t._s(t.userInfo.name))])]),e("div",{staticClass:"social"},[e("div",{staticClass:"flex flex-align"},[e("div",{staticClass:"data-box"},[e("div",{staticClass:"number"},[t._v(t._s(t.userInfo.post_num))]),e("div",{staticClass:"text"},[t._v("发布")])]),e("div",{staticClass:"data-box"},[e("div",{staticClass:"number"},[t._v(t._s(t.userInfo.fans_count))]),e("div",{staticClass:"text"},[t._v("粉丝")])]),e("div",{staticClass:"data-box"},[e("div",{staticClass:"number"},[t._v(t._s(t.userInfo.subscribe_num))]),e("div",{staticClass:"text"},[t._v("关注")])]),e("div",{staticClass:"data-box"},[e("div",{staticClass:"number"},[t._v(t._s(t.userInfo.zan_count))]),e("div",{staticClass:"text"},[t._v("获赞")])])]),e("div",{staticClass:"subscribe"},[t.userDataState.user_id!=t.userInfo.user_id?e("van-button",{staticClass:"theme-btn",attrs:{type:"primary",round:""},on:{click:function(a){return t.follow(t.userInfo)}}},[t._v("\n                  "+t._s(t.userInfo.is_subscribe?"已关注":"关注ta")+"\n                ")]):t._e()],1)])])]),e("div",{staticClass:"module"},[e("reading",{attrs:{list:t.lateBook,moduleTitle:"宝贝最近在读"}})],1),e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("div",{staticClass:"list"},[0==t.list.length?e("div",{staticClass:"no-list"},[t._v("暂无内容")]):t._e(),t._l(t.list,function(a,s){return e("div",{key:s,staticClass:"item"},[e("van-cell",[e("graphic-card",{attrs:{item:a,type:"zoom",moreBtn:t.manage},on:{more:t.actionsheet}})],1)],1)})],2)])],1)])])],1),e("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消","get-container":"#app"},on:{select:t.onSelect,cancel:function(a){t.show=!1}},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}})],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"zoom-head"},[e("div",{staticClass:"bg-black"})])}],o=(e("ac6a"),e("cebc")),n=e("9993"),c=e("bec1"),r=e("77e0"),l=e("a618"),d=e("3915"),u=e("591a"),h={name:"zoom",mixins:[r["i"]],components:{graphicCard:l["a"],reading:d["a"]},computed:Object(o["a"])({},Object(u["c"])(["userDataState","managerState"]),{manage:function(){var t=!1;return this.managerState?this.managerState.forEach(function(a){"teacher"==a.item_relation&&(t=!0)}):this.userInfo.id==this.$route.query.id&&(t=!0),t}}),data:function(){return{releasePageShow:!1,lateBook:[],list:[],loading:!1,finished:!1,userInfo:"",childInfo:"",page:1,show:!1,actions:[{name:"删除",type:"delete",index:1}],postId:"",templateId:""}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if(this.$route.query.id){var a={params:{user_id:this.$route.query.id}};n["a"].get("/book/memberUser/getInfo",a).then(function(a){t.userInfo=a.data;var e={params:{page:1,limit:20,child_id:a.data.child_id}};n["a"].get("/book/BabyBorrow/getList",e).then(function(a){t.lateBook=Object(c["b"])(a.data.data,"book_id")})})}},onRefresh:function(){var t=this;this.page=1,this.onLoad().then(function(){t.loading=!1,t.finished=!1})},onLoad:function(){var t=this;if(this.$route.query.id){var a={params:{page:this.page,sort:"post",user_id:this.$route.query.id}};return n["a"].get("/book/SchoolArticle/getList",a).then(function(a){1==a.data.status?(t.page++,t.list=t.list.concat(a.data.data),t.loading=!1,t.list.length>=a.data.count&&(t.finished=!0)):(t.loading=!1,t.finished=!0,t.list=[])})}},actionsheet:function(t){this.show=!0,this.postId=t.post_id,this.templateId=t.template_id},onSelect:function(t){var a=this;switch(t.index){case 1:this.$dialog.confirm({title:"删除",message:"您确认要删除吗"}).then(function(){var t={params:{id:a.postId}};n["a"].get("/book/SchoolArticle/del",t).then(function(t){var e;1==t.data.status&&(a.list.forEach(function(t,s){a.postId==t.post_id&&(e=s)}),a.list.splice(e,1),a.$toast.success("删除成功"))})}).catch(function(){}),this.show=!1;break}},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},follow:function(t){var a=this;t.is_subscribe=!t.is_subscribe;var e={params:{user_id:t.user_id}};n["a"].get("/book/MemberFollow/subscribe",e).then(function(e){switch(e.data.status){case 1:t.is_subscribe?(t.fans_count++,a.$toast.success({className:"shoucang-icon toast-icon"})):t.fans_count--;break}})}}},v=h,b=(e("0db5"),e("2877")),m=Object(b["a"])(v,s,i,!1,null,"2fe6538b",null);a["default"]=m.exports},2845:function(t,a,e){},3915:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"reading"},[e("van-cell",{attrs:{title:t.moduleTitle,"is-link":"rank"==t.type},on:{click:t.toBabyHome}}),t.list&&t.list.length?e("div",{staticClass:"book-list scroll-x"},t._l(t.list,function(a,s){return e("div",{key:s,staticClass:"book-item scroll-item"},[a.book_thumb?e("div",{staticClass:"book-box"},[e("div",{staticClass:"book-cover"},[e("img",{attrs:{src:t.thumb(a.book_thumb),alt:a.book_name},on:{error:function(e){return t.outThumb(e,a)},click:function(e){return t.toBookDetails(a)}}}),e("div",{staticClass:"listening",on:{click:function(e){return t.listening(a)}}},[e("i",{staticClass:"iconfont"},[t._v("")])])]),e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"book-name",on:{click:function(e){return t.toBookDetails(a)}}},[t._v("\n          "+t._s(a.book_name)+"\n        ")]),e("div",{staticClass:"book-detail"},[e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"book-author"},[t._v("作者:"+t._s(a.book_author))]),e("div",{staticClass:"book-borrow"},[e("span",[t._v(t._s(a.book_borrow_count))]),t._v("人借过\n          ")]),e("div",{staticClass:"book-label"},t._l(a.book_tags,function(a,s){return e("div",{key:s,staticClass:"label-item"},[t._v("\n              "+t._s(a)+"\n            ")])}),0)])]):t._e()])}),0):e("div",{staticClass:"not-content"},[t._v("\n    尚无记录 "),0==t.userDataState.isVip?e("span",{staticClass:"theme-color",on:{click:t.toAccept}},[t._v(" 办理阅亮书架借阅卡")]):t._e()])],1)},i=[],o=(e("a481"),e("4917"),e("cebc")),n=e("9993"),c=e("591a"),r={name:"reading",props:["list","moduleTitle","type","babyId"],computed:Object(o["a"])({},Object(c["c"])(["userDataState"])),data:function(){return{applyShow:!1,active:0}},methods:{toBabyHome:function(){this.$router.push({name:"baby-home",query:{id:this.babyId}})},thumb:function(t){if(t){var a=t.match(/https?:\/\/(.+?)\//);return a?"/book/api/remotePic?url=".concat(t):t}},outThumb:function(t,a){var e="";e=a.book_author.length>7?a.book_author.substr(0,7)+"...":a.book_author,t.target.outerHTML="\n        <div class='three-d-book'>\n            <div class='three-d-book-cover'>\n                <div class='three-d-book-name'>\n                    ".concat(a.book_name,"\n                </div>\n                <div class='three-d-book-author'>\n                    ").concat(e,"\n                </div>\n            </div>\n        </div>\n      ")},toBookDetails:function(t){this.$router.push({name:"book-details",query:{id:t.book_id}})},listening:function(t){var a=/（.+?）/,e=t.book_name.replace(a,""),s="https://m.ximalaya.com/search/".concat(e),i=localStorage.getItem("bookRead_"+t.book_id);i?location.href=s:n["a"].get("/book/story/updateRead").then(function(){localStorage.setItem("bookRead_"+t.book_id,!0),location.href=s})},toAccept:function(){this.applyShow=!0,this.active=0}}},l=r,d=(e("95bb"),e("2877")),u=Object(d["a"])(l,s,i,!1,null,"6f48ef47",null);a["a"]=u.exports},"8d58":function(t,a,e){},"95bb":function(t,a,e){"use strict";var s=e("8d58"),i=e.n(s);i.a}}]);