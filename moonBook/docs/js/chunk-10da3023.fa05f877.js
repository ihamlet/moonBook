(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10da3023"],{"0485":function(t,e,a){},"0699":function(t,e,a){"use strict";var i=a("e873"),s=a.n(i);s.a},"0df1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vip-level"},[1==t.level?a("i",{staticClass:"iconfont",class:[1==t.level?"icon-1":""]},[t._v("")]):t._e(),2==t.level?a("i",{staticClass:"iconfont",class:[2==t.level?"icon-2":""]},[t._v("")]):t._e(),3==t.level?a("i",{staticClass:"iconfont",class:[3==t.level?"icon-3":""]},[t._v("")]):t._e(),4==t.level?a("i",{staticClass:"iconfont",class:[4==t.level?"icon-4":""]},[t._v("")]):t._e(),1==t.animate?a("div",{staticClass:"highlight"}):t._e()])},s=[],n={name:"vip-level",props:["level","animate"]},o=n,c=(a("16b4"),a("2877")),r=Object(c["a"])(o,i,s,!1,null,"4b9ff89e",null);e["a"]=r.exports},1170:function(t,e,a){"use strict";var i=a("5af2"),s=a.n(i);s.a},"15a1":function(t,e,a){},"16b4":function(t,e,a){"use strict";var i=a("bcd6"),s=a.n(i);s.a},"3a1d":function(t,e,a){"use strict";var i=a("bbfd"),s=a.n(i);s.a},5902:function(t,e,a){},"5af2":function(t,e,a){},"6bc7":function(t,e,a){"use strict";var i=a("15a1"),s=a.n(i);s.a},"74f6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.hackReset?a("div",{staticClass:"article page-padding"},[0==t.item.template_id&&t.item.cover?a("div",{staticClass:"cover"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover}})]):t._e(),a("div",{staticClass:"page-container"},[a("van-nav-bar",{key:t.$route.query.id,class:t.item.cover&&0==t.item.template_id&&!t.themeBarSearch?"theme-nav":"",attrs:{border:!1,fixed:"",zIndex:100}},[a("div",{staticClass:"head-bar-title",attrs:{slot:"title"},slot:"title"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t.themeBarSearch?a("div",{key:"2",staticClass:"head-bar-title-conent flex flex-align flex-justify",on:{click:t.toZoom}},[t.item.user?a("div",{staticClass:"avatar"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar,alt:t.item.user.username},on:{error:t.imgError}})]):t._e(),t.item.user?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v(t._s(t.item.user.username))]):t._e(),t.item.card_level?a("vip-level",{attrs:{animate:"1",level:t.item.card_level.level}}):t._e()],1):a("div",{key:"1",staticClass:"head-bar-title-conent"},[t._v("\n            "+t._s("preview"==t.$route.query.type?"预览":t.$route.meta.title)+"\n          ")])])],1),3!=t.item.isSubscribe?a("div",{staticClass:"head-bar-right",attrs:{slot:"right"},slot:"right"},[a("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t.themeBarSearch?a("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))]):t._e()],1)],1):t._e()]),a("div",{staticClass:"container",class:0==t.item.template_id&&t.item.cover?"noTop":""},[a("div",{staticClass:"module-user-card page-padding"},["0"!=t.item.template_id?a("userCard",{attrs:{item:t.item,schoolName:t.$route.query.school_name,schoolId:t.$route.query.school_id}}):t._e()],1),a("div",{staticClass:"module"},[a("article-content",{key:t.$route.query.id,attrs:{item:t.item,isCommentShow:t.isCommentShow},on:{onScrollDomShow:t.onScrollDomShow}}),t.post?a("div",{staticClass:"article-card"},[a("van-cell",[a("articleCard",{key:t.$route.query.id,attrs:{cardStyle:"article",type:t.postType,childId:t.item.child_id,item:t.post,detailsId:t.post.post_id||t.post.tushu_id},on:{toDetails:t.toArticle}})],1)],1):t._e(),a("articleOperation",{attrs:{item:t.item}})],1),a("div",{ref:"commentDom",staticClass:"comment"},[a("comment",{key:t.$route.query.id,attrs:{item:t.item,include:"include",postId:t.item.post_id},on:{showComment:t.onClickisShowComment}})],1)])],1)]):t._e()},s=[],n=(a("a481"),a("7f7f"),a("6762"),a("cebc")),o=a("9993"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-operation"},[a("div",{staticClass:"btn-warp flex flex-align"},[a("div",{staticClass:"flex-btn"},[a("van-button",{staticClass:"tuijian",attrs:{plain:"",round:"",size:"normal",type:"default",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/icon/tj.png"},on:{click:t.recommend}},[t._v(" 推荐")])],1),t.isBtnShow?a("div",{staticClass:"flex-btn"},[a("van-button",{staticClass:"shoulu",attrs:{plain:"",round:"",size:"normal",type:"default",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/icon/fx.png"},on:{click:t.selectChildren}},[t._v("收录")])],1):t._e()]),a("van-popup",{attrs:{position:"bottom","get-container":"#app"},model:{value:t.childShow,callback:function(e){t.childShow=e},expression:"childShow"}},[a("van-picker",{attrs:{"show-toolbar":"","visible-item-count":4,columns:t.children,"value-key":"name",title:"收录到宝贝"},on:{change:t.onChange,confirm:t.selectChild,cancel:function(e){t.childShow=!1}}})],1),a("van-popup",{staticClass:"page-popup-layer",attrs:{position:"bottom","get-container":"#app"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("topic-list",{attrs:{type:"share",topicList:t.topicList},on:{close:function(e){t.show=!1},select:t.selectTag,confirm:t.selectConfirm}})],1),a("van-action-sheet",{attrs:{actions:t.manageActions,"cancel-text":"取消","get-container":"#app"},on:{select:t.onRecommendSelect},model:{value:t.actionsheetShow,callback:function(e){t.actionsheetShow=e},expression:"actionsheetShow"}})],1)},r=[],l=a("ae3a"),u=a("591a"),m=a("77e0"),d={name:"article-operation",mixins:[m["d"]],props:["item"],components:{topicList:l["a"]},computed:Object(n["a"])({},Object(u["c"])(["managerState","userDataState"]),{isBtnShow:function(){var t=!0;return"zoom"!=this.$route.query.back&&"baby-home"!=this.$route.query.back||(t=!1),t}}),data:function(){return{actionsheetShow:!1,topicList:[],cateId:"",children:[],childId:"",show:!1,childShow:!1}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if(this.userDataState.user_id){var e={params:{sort:"old",user_id:this.userDataState.user_id}};o["a"].get("/book/baby/getList",e).then(function(e){1==e.data.status&&e.data.data.length&&(t.children=e.data.data,t.childId=e.data.data[0].id)})}else this.$toast("获取用户信息失败");var a={params:{portal_name:"宝贝主页"}};o["a"].get("/book/schoolArticleCate/getList",a).then(function(e){200==e.status&&(t.topicList=e.data,t.cateId=e.data[0].cate_id)})},onChange:function(t,e){this.childId=e.id},selectChild:function(){this.childShow=!1,this.show=!0},selectTag:function(t){this.cateId=t.cate_id},selectConfirm:function(){this.$router.push({name:"graphic",query:Object(n["a"])({},this.$route.query,{post_id:this.$route.query.id})}),this.show=!1},recommend:function(){var t=this;if(this.managerState.length)this.actionsheetShow=!0;else{var e={title:"",message:"",routeName:"",query:""};switch("0"){case this.userDataState.school_id:e.title="请加入学校",e.message="加入学校，及时了解学校动态",e.routeName="edit-school",e.query={type:"register"};break;case this.userDataState.banji_id:e.title="请加入班级",e.message="加入班级，及时了解班级动态",e.routeName="edit-class",e.query={school_name:this.userDataState.school_name,school_id:this.userDataState.school_id,name:this.userDataState.child_name,type:"register"};break}this.$dialog.confirm({title:e.title,message:e.message,cancelButtonText:"稍后",confirmButtonText:"加入"}).then(function(){t.$router.push({name:e.routeName,query:e.query})}).catch(function(){})}},selectChildren:function(){var t=this;this.children.length?this.childShow=!0:this.$dialog.confirm({title:"请添加宝贝",message:"添加宝贝，掌握孩子阅读数据，亲子阅读邀请你来参加",cancelButtonText:"稍后",confirmButtonText:"添加"}).then(function(){t.$router.push({name:"edit-child",query:{type:"add"}}),localStorage.removeItem("childInfo")}).catch(function(){})}}},h=d,p=(a("0699"),a("2877")),v=Object(p["a"])(h,c,r,!1,null,"47a0e4e9",null),f=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"article-content",class:["screenshot"==t.type?"img-content":"",0!=t.item.template_id?"flex flex-align":""]},[0==t.item.template_id?a("div",{staticClass:"article-header"},[a("div",{staticClass:"title"},[t._v(t._s(t.item.title))]),a("div",{ref:"domHeight",staticClass:"userCard"},[a("userCard",{attrs:{item:t.item}})],1)]):t._e(),a("article",[a("div",{staticClass:"main"},[a("div",{staticClass:"media-content"},[a("media",{key:t.$route.query.id,attrs:{item:t.item,type:"details",isCommentShow:t.isCommentShow}})],1)])])])},g=[],b=a("f6ba"),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-card"},[t.item.user?a("div",{ref:"userCard",staticClass:"flex flex-align"},[a("div",{staticClass:"avatar",on:{click:t.toZoom}},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar,alt:t.item.user.username},on:{error:t.imgError}})]),a("div",{staticClass:"flex flex-align handle-card"},[a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[a("div",{staticClass:"flex flex-align"},[a("span",[t._v(t._s(t.item.user.username))]),t.item.card_level?a("vip-level",{attrs:{animate:!0,level:t.item.card_level.level}}):t._e()],1)]),a("div",{staticClass:"article-info flex flex-align"},[a("div",{staticClass:"read-num"},[t._v("阅读 "+t._s(t.item.views))]),a("div",{staticClass:"origin"},[t._v("•")]),a("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.item.create_time)))]),t.schoolName||t.item.school?a("div",{staticClass:"origin"},[t._v("•")]):t._e(),t.schoolName?a("div",{staticClass:"school-info",on:{click:t.toSchool}},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.schoolName))])]):t.item.school?a("div",{staticClass:"school-info",on:{click:t.toSchool}},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.item.school.title))])]):t._e()])]),3!=t.item.isSubscribe?a("div",{staticClass:"follow-btn"},[a("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))])],1):t._e()])]):t._e()])},y=[],w=a("0df1"),x=a("bec1"),k={name:"userCard",props:["item","schoolName"],components:{vipLevel:w["a"]},methods:{follow:function(t){var e=this;"preview"!=this.$route.query.type&&(t.isSubscribe=!t.isSubscribe,o["a"].get("/book/MemberFollow/subscribe?user_id=".concat(t.user_id)).then(function(t){e.$toast.success(t.data.msg)}))},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toZoom:function(){this.$router.push({name:"zoom",query:{id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},toSchool:function(){this.$router.push({name:"apps-school",query:{id:this.$route.query.school_id}})},getTimeAgo:function(t){return Object(x["m"])(1e3*t)}}},S=k,$=(a("7ce4"),Object(p["a"])(S,C,y,!1,null,"7709d618",null)),I=$.exports,q={name:"article-content",props:["item","type","isCommentShow"],mixins:[m["i"]],components:{media:b["a"],userCard:I}},j=q,L=(a("d050"),Object(p["a"])(j,_,g,!1,null,"636331f6",null)),D=L.exports,O=a("93c1"),N=a("c629"),T={name:"detailsArticle",components:{comment:N["a"],vipLevel:w["a"],userCard:I,articleContent:D,articleCard:O["a"],articleOperation:f},computed:Object(n["a"])({},Object(u["e"])(["slogan","logo"]),Object(u["e"])("openWX",["ready"]),Object(u["c"])(["userDataState"]),{post:function(){var t;return t=this.item.extra?JSON.parse(this.item.extra):"",t},postType:function(){var t;return t=this.item.extra?JSON.parse(this.item.extra).type:"",t}}),data:function(){return{themeBarSearch:!1,imageShow:!1,headBar:!1,imgIndex:"",qrImage:"",item:{photos:[]},hackReset:!0,isCommentShow:!1}},beforeRouteLeave:function(t,e,a){var i=["home","apps-find","apps-school","zoom"];i.includes(t.name)?t.meta.keepAlive=!0:t.meta.keepAlive=!1,a()},created:function(){this.fetchData()},updated:function(){this.wxShare()},watch:{$router:"fetchData",ready:function(){this.wxShare()}},methods:Object(n["a"])({},Object(u["b"])("openWX",["share"]),{wxShare:function(){var t={item:this.item,success:function(){}};this.share(t)},fetchData:function(){var t=this;this.$toast.loading();var e={params:{ajax:1,id:this.$route.query.id||this.$route.query.back_id}};o["a"].get("/book/SchoolArticle/detail",e).then(function(e){1==e.data.status&&(t.$toast.clear(),t.item=e.data.data.post)})},onScrollDomShow:function(t){this.themeBarSearch=t},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toZoom:function(){this.$router.push({name:"zoom",query:{id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},follow:function(t){var e=this;t.isSubscribe=!t.isSubscribe;var a={params:{user_id:t.user_id}};o["a"].get("/book/MemberFollow/subscribe",a).then(function(t){e.$toast.success(t.data.msg)})},toArticle:function(t){var e=this;this.hackReset=!1,this.$router.replace({name:t.routeName,query:Object(n["a"])({},this.$route.query,{id:this.post.post_id})}),this.$nextTick(function(){e.hackReset=!0,e.fetchData()})},onClickisShowComment:function(t){this.isCommentShow=t}})},z=T,A=(a("3a1d"),Object(p["a"])(z,i,s,!1,null,"556c934c",null));e["default"]=A.exports},"75e0":function(t,e,a){"use strict";a.d(e,"h",function(){return s}),a.d(e,"c",function(){return n}),a.d(e,"k",function(){return c}),a.d(e,"e",function(){return u}),a.d(e,"f",function(){return m}),a.d(e,"i",function(){return d}),a.d(e,"j",function(){return h}),a.d(e,"b",function(){return o}),a.d(e,"a",function(){return r}),a.d(e,"d",function(){return l}),a.d(e,"g",function(){return p});var i=a("cebc"),s=["说一点什么吧，他都能听得到","随心而起，有感而发","千头万绪,落笔汇成评论一句","听说，爱评论的人粉丝多","从小陪伴孩子读绘本，日积月累","陪伴就是给孩子最好的爱","愿你像颗种子，勇敢地冲破泥沙","心似海，不敌诗的咏叹"],n=["👍 棒棒哒","🙆 声音很棒","💪 加油哦","👪 很温馨","👏 非常棒","😊 很可爱哦","👑 继续努力","😄 向你学习","🌞 积少成多","📚 推荐这本书","🏆 很精彩"],o=["再接再厉","向你学习","坚持下去","太厉害了","难能可贵"],c=["聪明在于勤奋，天才在于积累","腹有诗书气自华，读书万卷始通神","少成若天性，习惯如自然","锲而不舍，金石可镂","敏而好学，不耻下问","读书之法，在循序渐进，熟读而精思"],r=["阅读是关系孩子素养发展的重要因素","阅读能够提高孩子的语言技能","亲子阅读是传递亲情的桥梁","阅读可以促进儿童认知能力"],l="<p>一起关爱孩子们的成长，我们可以从阅读做起。阅亮书架，将认真与执着地做着这件事情，同时也吸引了无数有识之士加入其中，和我们一起播撒着幸福的种子。</p><p>在路上，我们满怀期待，愿与您同行......</p>",u=[{name:"好的开始",number:1,type:"punch"},{name:"小试牛刀",number:21,type:"punch"},{name:"坚持不懈",number:50,type:"punch"},{name:"渐入佳境",number:100,type:"punch"},{name:"扬帆远航",number:198,type:"punch"},{name:"持之以恒",number:365,type:"punch"},{name:"学富五车",number:660,type:"punch"},{name:"阅读之星",number:1e3,type:"punch"}],m=[{name:"好的开始",number:1,type:"read"},{name:"小试牛刀",number:20,type:"read"},{name:"坚持不懈",number:60,type:"read"},{name:"渐入佳境",number:120,type:"read"},{name:"扬帆远航",number:300,type:"read"},{name:"持之以恒",number:700,type:"read"},{name:"学富五车",number:1e3,type:"read"},{name:"阅亮之星",number:1500,type:"read"}];function d(t){var e=[];return u.forEach(function(a,s){t>=a.number&&e.push(Object(i["a"])({},a,{level:s+1})),0==t&&e.push(Object(i["a"])({},a,{level:0}))}),e}function h(t){var e=[];return m.forEach(function(a,s){t>=a.number&&e.push(Object(i["a"])({},a,{level:s+1})),0==t&&e.push(Object(i["a"])({},a,{level:0}))}),e}var p=["","","","","","","","","",""]},"7ce4":function(t,e,a){"use strict";var i=a("b8ce"),s=a.n(i);s.a},9274:function(t,e,a){"use strict";var i=a("5902"),s=a.n(i);s.a},"93c1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"book-card"},["article"==t.cardStyle?a("div",{staticClass:"grade-card"},["book"==t.item.type?a("div",{staticClass:"type-book flipInX animated",on:{click:t.toReadStat}},[a("div",{staticClass:"content"},[a("div",{staticClass:"book-sign"},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"book-name"},[t._v("本次打卡 "+t._s(0==t.item.tushu_id?"":"《"+t.item.title+"》"))]),a("div",{staticClass:"flex flex-align"},[t.item.sign_days?a("div",{staticClass:"item-data"},[a("div",{staticClass:"sign-title"},[t._v("打卡天数")]),a("div",{staticClass:"number"},[t._v(t._s(t.item.sign_days))])]):t._e(),t.item.sign_read_count?a("div",{staticClass:"item-data"},[a("div",{staticClass:"sign-title"},[t._v("打卡本数")]),a("div",{staticClass:"number"},[t._v(t._s(t.item.sign_read_count))])]):t._e(),a("van-button",{staticClass:"theme-plain",attrs:{plain:"",size:"small",round:"",type:"primary"}},[t._v("查看成绩")])],1)]),a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"bg"}),a("Round")],1):t.flag?a("div",{staticClass:"article-share",on:{click:t.toDetails}},[a("media",{key:t.detailsId,attrs:{type:"card",item:t.article,stopClick:!0,isDetailsShow:t.textShow}}),t.article?a("div",{staticClass:"info-bar flex flex-align"},[a("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.article.create_time)))]),a("div",{staticClass:"author"},[t._v("来自:"+t._s(t.username))])]):t._e()],1):t._e()]):a("div",{staticClass:"cell"},[a("div",{staticClass:"share-cell flex flex-align"},[a("div",{staticClass:"details flex flex-align"},[t.detailsId&&t.detailsId>0?a("div",{staticClass:"info",on:{click:t.toDetails}},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"theme-color"},[t._v(t._s(t.item.post_id?t.item.title:"《"+t.item.title+"》")+" ")])]):t._e(),"book"==t.item.type?a("div",{staticClass:"punches theme-color",on:{click:t.toReadStat}},[t._v("\n                    "+t._s(t.item.sign_read_count>0?"累计"+t.item.sign_read_count+"本":"")+"\n                ")]):a("div",{staticClass:"include"},[t._v("\n                    收录\n                ")])])])])])},s=[],n=(a("a481"),a("cebc")),o=a("9993"),c=a("bec1"),r=a("591a"),l=a("f6ba"),u=a("d248"),m={name:"article-card",props:["item","detailsId","type","childId","cardStyle"],components:{Round:u["a"],media:l["a"]},computed:Object(n["a"])({},Object(r["c"])(["userDataState"]),{details:function(){return Object(c["c"])(this.item.details)?this.item.details.replace(/<[^>]+>/g,""):this.item.details}}),data:function(){return{article:{},username:"",flag:!1,textShow:!0}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if("post"==this.type){var e={params:{ajax:1,id:this.detailsId}};o["a"].get("/book/SchoolArticle/detail",e).then(function(e){1==e.data.status&&(t.flag=!0,t.article=e.data.data.post,1==e.data.data.post.template_id?t.textShow=!0:t.textShow=!1,t.username=e.data.data.post.user.username)})}},toDetails:function(){var t="book"==this.item.type?"book-details":"article";this.$emit("toDetails",{routeName:t,detailsId:this.detailsId})},toReadStat:function(){this.$router.push({name:"readStat",query:{id:this.childId}})},getTimeAgo:function(t){return Object(c["m"])(1e3*t)}}},d=m,h=(a("db12"),a("6bc7"),a("2877")),p=Object(h["a"])(d,i,s,!1,null,"47a3a470",null);e["a"]=p.exports},a0ae:function(t,e,a){"use strict";var i=a("de22"),s=a.n(i);s.a},abc1:function(t,e,a){},ae3a:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"topic-list"},[a("van-picker",{ref:"picker",attrs:{"show-toolbar":"",title:t.title,columns:t.column,"value-key":"cate_name"},on:{change:t.onCateChange,cancel:t.close,confirm:function(e){return t.$emit("confirm")}}})],1)},s=[],n=(a("ac6a"),a("cebc")),o=a("591a"),c={name:"topic-list",props:["type","topicList","tagIndex","cateIndex","cateName"],computed:Object(n["a"])({},Object(o["c"])(["managerState"]),{column:function(){var t=[{values:this.topicList,className:"column1",defaultIndex:this.tagIndex},{values:this.topicList[this.tagIndex]?this.topicList[this.tagIndex].children:[],className:"column2",defaultIndex:this.cateIndex}];return t},title:function(){var t="宝贝主页的分类";switch(this.$route.query.back){case"class-home":t="班级主页的分类";break;case"apps-school":t="学校主页的分类";break}return t}}),methods:{onCateChange:function(t,e,a){t.setColumnValues(1,e[0].children),this.$emit("select",e[a])},close:function(){this.$refs.picker.setColumnValues(1,this.column[1].values),this.$refs.picker.setColumnIndex(0,0),this.$refs.picker.setColumnIndex(1,0),this.$emit("close")}}},r=c,l=a("2877"),u=Object(l["a"])(r,i,s,!1,null,"7f7e82cb",null);e["a"]=u.exports},b8ce:function(t,e,a){},bb5e:function(t,e,a){},bbfd:function(t,e,a){},bcd6:function(t,e,a){},c629:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.flag?a("div",{ref:"comment",staticClass:"comment-list",attrs:{id:"comment"}},[a("van-nav-bar",{key:t.$route.query.id,attrs:{border:!1,zIndex:0}},[a("div",{staticClass:"zan",attrs:{slot:"right"},slot:"right"},[t._v("赞 "+t._s(t.item.zan_num))]),a("div",{staticClass:"comment",attrs:{slot:"left"},slot:"left"},[t._v(t._s(t.listLength)+" 评论")])]),0==t.listLength?a("div",{staticClass:"no-centent"},[a("div",{staticClass:"prompt",on:{click:function(e){return t.showField()}}},[t._v("暂无评论,点击抢沙发")])]):t._e(),a("div",{staticClass:"container"},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,i){return a("van-cell",{key:i},[a("div",{staticClass:"user-card flex flex-align"},[a("div",{staticClass:"user-info flex flex-align"},[a("div",{staticClass:"avatar",on:{click:function(a){return t.toZoom(e)}}},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:e.avatar}})]),a("div",{staticClass:"user-data"},[a("span",{staticClass:"user-name"},[t._v(t._s(e.username))])])]),a("div",{staticClass:"zan flex flex-align",on:{click:function(a){return t.zan(e)}}},[e.isZan?a("i",{staticClass:"iconfont highlight rotateInDownLeft animated"},[t._v("")]):a("i",{staticClass:"iconfont"},[t._v("")]),a("div",{staticClass:"num"},[t._v(t._s(e.zan_count))])])]),a("div",{staticClass:"contents"},[t._v("\n          "+t._s(e.contents)+"\n        ")]),a("div",{staticClass:"reply"},[0!=e.replyList.length?a("div",{staticClass:"reply-content"},t._l(e.replyList,function(i,s){return a("div",{key:s,staticClass:"list"},[a("div",{staticClass:"item"},[a("span",{staticClass:"reply-title"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n                  "+t._s(i.username)+"回复"+t._s(e.username)+"\n                ")]),a("span",{staticClass:"reply-contents"},[t._v("\n                  "+t._s(i.contents)+"\n                ")])])])}),0):t._e(),e.quote?a("div",{staticClass:"reply-content"},[a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("span",{staticClass:"reply-title"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n                  "+t._s(e.quote.username)+"的评论\n                ")]),a("span",{staticClass:"reply-contents"},[t._v("\n                  "+t._s(e.quote.contents)+"\n                ")])])])]):t._e(),a("div",{staticClass:"comment-bar flex flex-align"},[a("div",{staticClass:"date"},[t._v(t._s(t.timeAgo(e.create_time)))]),a("div",{staticClass:"theme-color",on:{click:function(a){return t.showField(e,"reply")}}},[a("van-tag",{attrs:{round:"",size:"large",type:"primary"}},[t._v(t._s(e.replyList.length?e.replyList.length:"")+"回复")])],1)])])])}),1)],1),a("div",{staticClass:"comment"},[a("div",{staticClass:"footer-bar"},[a("div",{staticClass:"bar-padding flex flex-align"},[a("div",{staticClass:"input-box flex flex-align",on:{click:function(e){return t.showField()}}},[a("div",{staticClass:"input-box-avatar avatar"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.userDataState.avatar},on:{error:t.imgError}})]),a("span",[t._v("写评论")])]),a("div",{staticClass:"btn-icon flex flex-align"},[a("div",{staticClass:"btn",on:{click:t.toScroll}},[t.listLength>0?a("van-tag",{staticClass:"num-tag",attrs:{round:"",type:"danger"}},[t._v(t._s(t.listLength>1e3?"999+":t.listLength))]):t._e(),a("i",{staticClass:"iconfont"},[t._v("")])],1),a("div",{staticClass:"btn",on:{click:function(e){return t.addPraise(t.item)}}},[t.item.zan_num>0?a("van-tag",{staticClass:"num-tag",attrs:{round:"",type:"danger"}},[t._v(t._s(t.item.zan_num>1e3?"999+":t.item.zan_num))]):t._e(),t.item.isZan?a("i",{staticClass:"iconfont highlight rotateInDownLeft animated"},[t._v("")]):a("i",{staticClass:"iconfont"},[t._v("")])],1),"include"!=t.include?a("div",{staticClass:"btn",on:{click:function(e){return t.addCollect(t.item)}}},[t.item.collect_num>0?a("van-tag",{staticClass:"num-tag",attrs:{round:"",type:"danger"}},[t._v(t._s(t.item.collect_num>1e3?"999+":t.item.collect_num))]):t._e(),t.item.isShoucang?a("i",{staticClass:"iconfont star highlight swing animated"},[t._v("")]):a("i",{staticClass:"iconfont"},[t._v(" ")])],1):a("div",{staticClass:"btn",on:{click:t.isShare}},[a("i",{staticClass:"iconfont"},[t._v("")])])])])]),a("van-popup",{staticClass:"comment-popup",attrs:{"overlay-class":"bg-opacity",position:"top","get-container":"#app"},on:{close:function(e){return t.$refs.field.blur()}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},["include"!=t.include&&t.score?a("div",{staticClass:"score flex-column"},[a("div",{staticClass:"score-title"},[t._v("评分")]),a("van-rate",{staticClass:"score-rate",attrs:{size:25,count:5,"void-color":"#ceefe8"},model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})],1):t._e(),a("div",{staticClass:"comment-content flex"},[a("div",{staticClass:"field-box"},[a("van-field",{ref:"field",staticClass:"comment-field",attrs:{border:!1,size:"large",minHeight:50,type:"textarea",placeholder:t.placeholder,rows:"1",autosize:""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),a("div",{staticClass:"submit-btn theme-color"},[a("van-button",{staticClass:"theme-btn",attrs:{loading:t.isLoading,size:"large",type:"primary",square:""},on:{click:t.submit}},[t._v("发 布")])],1)]),1==t.item.template_id?a("div",{staticClass:"comment-tag scroll-x"},t._l(t.commentTag,function(e,i){return a("div",{key:i,staticClass:"scroll-item jackInTheBox animated",style:{animationDelay:100*i+"ms"},on:{click:function(a){return t.biuCommentTag(e)}}},[a("van-button",{staticClass:"tag-item",attrs:{round:"",type:"default"}},[t._v(t._s(e))])],1)}),0):t._e()])],1),a("van-popup",{staticClass:"share-popup",attrs:{"get-container":"#app"},model:{value:t.shareShow,callback:function(e){t.shareShow=e},expression:"shareShow"}},[a("div",{staticClass:"share-img"},[a("img",{attrs:{src:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/img/shareWord.png"}})])])],1):t._e()},s=[],n=(a("7f7f"),a("55dd"),a("cebc")),o=a("591a"),c=a("9993"),r=a("bec1"),l=a("75e0"),u={name:"comment",props:["item","include","type","postId","isCommentShow"],computed:Object(n["a"])({},Object(o["c"])(["userToken","userDataState"]),{placeholder:function(){return Object(r["g"])(l["h"],1)[0]},commentTag:function(){return l["c"].sort(function(){return Math.random()-.5}),l["c"]}}),data:function(){return{star:3,list:[],toTopAndComment:!1,listLength:"",loading:!1,finished:!1,page:1,commentId:"",show:!1,isLoading:!1,message:"",shareShow:!1,score:!1,flag:!1}},watch:{postId:function(){var t=this;this.flag=!0,"comments"==this.$route.query.point&&this.$nextTick(function(){t.$refs.comment.scrollIntoView()})},show:function(t){this.$emit("showComment",t)}},methods:{onLoad:function(){var t=this,e={params:{post_id:this.postId,page:this.page,limit:10,sort:"new"}};return c["a"].get("/book/SchoolArticleComment/getList",e).then(function(e){if(1==e.data.status){t.listLength=e.data.count;var a=e.data.data;1==t.page?t.list=a:t.list=t.list.concat(a),t.loading=!1,t.page++,t.list.length>=e.data.count&&(t.finished=!0)}})},biuCommentTag:function(t){this.message=t,this.submit()},submit:function(){var t=this;this.isLoading=!0;var e={post_id:this.item.post_id,contents:this.message,tags:this.item.ad_label};this.commentId?e.reply_comment_id=this.commentId:e.star=2*this.star,this.message.length?c["a"].post("/book/SchoolArticleComment/edit?ajax=1",e).then(function(e){1==e.data.status?(t.show=!1,t.page=1,t.onLoad(),t.$toast.success(e.data.info),t.isLoading=!1,t.$refs.comment.scrollIntoView()):t.$toast.fail(e.data.info)}):this.$toast("请填写评论内容")},addPraise:function(t){var e=this;if("preview"!=this.$route.query.type){t.isZan=!t.isZan;var a={params:{ajax:1,id:this.item.post_id}};c["a"].get("/book/SchoolArticle/zan",a).then(function(a){1==a.data.status&&(t.isZan?t.zan_num++:t.zan_num--,"1"==a.data.data.like&&e.$toast.success({className:"zan-icon toast-icon"}))})}},addCollect:function(t){var e=this;t.isShoucang=!t.isShoucang;var a={params:{post_id:this.postId}};c["a"].get("/book/SchoolArticleCollect/add",a).then(function(a){1==a.data.status&&(t.isShoucang?t.collect_num++:t.collect_num--,t.isShoucang||e.$toast.success({className:"shoucang-icon toast-icon"}))})},showField:function(t,e){var a=this;"preview"!=this.$route.query.type&&(this.isLoading=!1,this.message="",t?(this.prompt="回复：".concat(t.username),this.commentId=t.comment_id):(this.commentId="",this.prompt="写评论"),this.show=!0,this.$nextTick(function(){a.$refs.field.focus()}),this.score="reply"!=e)},timeAgo:function(t){return Object(r["m"])(1e3*t)},toScroll:function(){this.toTopAndComment=!this.toTopAndComment,this.toTopAndComment?this.$refs.comment.scrollIntoView({behavior:"smooth"}):window.scrollTo(0,0)},toZoom:function(t){this.$router.push({name:"zoom",query:{id:t.user_id,back:this.$route.name,back_id:this.$route.query.id||this.$route.query.back_id}})},isShare:function(){"preview"!=this.$route.query.type&&(this.shareShow=!0)},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},zan:function(t){t.isZan=!t.isZan;var e={params:{comment_id:t.comment_id}};c["a"].get("/book/SchoolArticleComment/zan",e).then(function(e){switch(e.data.status){case 1:t.zan_count=e.data.data.zan_count;break}})}}},m=u,d=(a("d872"),a("2877")),h=Object(d["a"])(m,i,s,!1,null,"511710f7",null);e["a"]=h.exports},d050:function(t,e,a){"use strict";var i=a("bb5e"),s=a.n(i);s.a},d248:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"welt"},t._l(t.round,function(t,e){return a("div",{key:e,staticClass:"round",class:"round-"+e,style:{width:t.w,height:t.w}})}),0)},s=[],n={name:"round",data:function(){return{round:[{w:"300px"},{w:"100px"},{w:"50px"},{w:"200px"},{w:"60px"}]}}},o=n,c=(a("9274"),a("2877")),r=Object(c["a"])(o,i,s,!1,null,"2b981942",null);e["a"]=r.exports},d872:function(t,e,a){"use strict";var i=a("0485"),s=a.n(i);s.a},db12:function(t,e,a){"use strict";var i=a("abc1"),s=a.n(i);s.a},de22:function(t,e,a){},e873:function(t,e,a){},f6ba:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",class:"article"==t.$route.name?"article":"",attrs:{id:"media"},on:{click:t.toArticle}},["card"==t.type&&"0"==t.item.template_id?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.title))]):t._e(),t.item.details&&t.isDetailsShow?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:"card"==t.type?2:0,expression:"type == 'card'?2:0",arg:"20"}],ref:"textContent",staticClass:"text",class:0==t.item.template_id?"content":"",domProps:{innerHTML:t._s(t.item.details)}}):t._e(),"1"==t.item.hasvideo?a("div",{staticClass:"media",class:"1"==t.item.hasvideo?"video-cover":""},t._l(t.item.photos,function(e,i){return a("div",{key:i,staticClass:"thumb"},[e&&"1"==e.is_video?a("div",{staticClass:"video-thumb"},["card"==t.type||t.isCommentShow?a("div",{staticClass:"player-card",class:["90"==e.rotate?"vertical":"",t.isCommentShow?"poster":""]},[t._m(0,!0),a("img",{attrs:{src:t.item.cover,alt:"视频封面"}}),a("van-tag",{staticClass:"duration",attrs:{size:"medium",color:"rgba(0,0,0,.5)"}},[t._v(t._s(t.getDuration(e.duration)))])],1):t.isCommentShow?t._e():a("div",{staticClass:"video-wrapper"},[a("video",{ref:"videoPlayer",refInFor:!0,attrs:{id:"video",controls:"controls",src:e.photo,poster:e.thumb,preload:"auto","x-webkit-airplay":"true",airplay:"allow","webkit-playsinline":"true","x5-playsinline":"",playsinline:"true"}})])]):t._e()])}),0):t._e(),"1"==t.item.template_id&&t.item.photos?a("div",{staticClass:"media img"},[a("div",{class:["card"==t.type?"layout-"+t.item.photos.length:""]},[a("van-row",{attrs:{gutter:4}},t._l(t.item.photos,function(e,i){return a("van-col",{key:i,attrs:{span:t.grid}},[e&&0==e.is_video&&0==e.is_audio?a("div",{staticClass:"img-grid",class:[1==t.item.photos.length&&e.height/e.width>1?"long":"",1==t.item.photos.length&&"details"==t.type?"alone":""]},[a("img",{staticClass:"img-preview",class:[e.height/e.width>2?"long":""],attrs:{src:e.thumb,large:e.photo,preview:"card"!=t.type&&e.post_id}}),e.height/e.width>2&&"card"==t.type&&i<1?a("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("长图")]):t._e()],1):t._e()])}),1)],1)]):t._e(),"0"==t.item.template_id&&"card"==t.type&&t.item.cover&&"1"!=t.item.hasvideo?a("div",{staticClass:"media img long-article-thumb"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover||t.item.photos[0].thumb}}),a("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("文章")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"},[a("i",{staticClass:"iconfont"},[t._v("")])])}],n=(a("7f7f"),a("a481"),a("bec1")),o={name:"media",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},coverShow:{type:Boolean,default:!0},stopClick:{type:Boolean,default:!1},schoolName:{type:String,default:""},schoolId:{type:String,default:""},isDetailsShow:{type:Boolean,default:!0},isCommentShow:{type:Boolean,default:!1}},computed:{grid:function(){var t;return t=4==this.item.photos.length||2==this.item.photos.length?12:1==this.item.photos.length&&"details"==this.type?24:8,t}},data:function(){return{playing:!1}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},methods:{toArticle:function(){"card"!=this.type||this.stopClick||this.$router.push({name:"article",query:{id:this.item.post_id,type:this.item.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},getDuration:function(t){return Object(n["f"])(t)}}},c=o,r=(a("a0ae"),a("1170"),a("2877")),l=Object(r["a"])(c,i,s,!1,null,"1d14f574",null);e["a"]=l.exports}}]);