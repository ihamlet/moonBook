(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ef311b7"],{"0c15":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"item"},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-name"},[t._v("\n        "+t._s(t.item["wmSearchSchool"==t.searchType?"title":"name"])+"\n    ")]),a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-address"},[t.item["wmSearchSchool"==t.searchType?"addr":"address"]?a("span",[t._v("\n            "+t._s(t.item["wmSearchSchool"==t.searchType?"addr":"address"])+"\n        ")]):t._e()])])},i=[],n=a("cebc"),c=a("591a"),l={name:"school-list",computed:Object(n["a"])({},Object(c["c"])(["userPointState"])),props:["item","prompt","searchType"]},o=l,r=(a("c9693"),a("2877")),h=Object(r["a"])(o,s,i,!1,null,"1c4632eb",null);e["a"]=h.exports},3352:function(t,e,a){},3389:function(t,e,a){},aba1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-page"},[a("form",{attrs:{action:"/"}},[a("van-search",{staticClass:"search",attrs:{placeholder:"搜索图书/幼儿园/文章",shape:"round"},on:{search:t.onSearch,cancel:t.onCancel},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"search-label",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.tab[t.listIndex].name))])])],1),t.value.length>0?a("div",{staticClass:"search-type"},t._l(t.tab,function(e,s){return a("van-cell",{key:s,attrs:{"is-link":""},on:{click:function(e){return t.setListIndex(s)}}},[a("div",{staticClass:"cell flex flex-align"},[a("div",{staticClass:"title"},[a("div",{staticClass:"name"},[t._v(t._s(e.name))])]),a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"value"},[t._v("\n                  有"),a("span",{staticClass:"count"},[t._v(t._s(e.count))]),t._v('条与"'+t._s(t.value)+'"相关的'+t._s(e.name)+"数据\n              ")])])])}),1):t._e(),t.tab[t.listIndex].count>0?a("div",{key:t.listIndex,staticClass:"list",class:0==t.value.length?"top":""},[a("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,s){return a("div",{key:s,staticClass:"item"},[0==t.listIndex?a("van-cell",{key:s},[a("bookCard",{attrs:{item:e,isCollect:e.is_collect},on:{like:t.likeBook}})],1):t._e(),1==t.listIndex?a("van-cell",{key:s,on:{click:function(a){return t.toSchool(e)}}},[a("schoolCard",{attrs:{item:e,searchType:e.school_id>0?"wmSearchSchool":"amapSearchSchool"}})],1):t._e(),2==t.listIndex?a("van-cell",{key:s},[a("graphicCard",{attrs:{item:e}})],1):t._e()],1)}),0)],1):t._e()])},i=[],n=(a("a481"),a("28a5"),a("cebc")),c=a("9993"),l=a("be6b"),o=a("0c15"),r=a("a618"),h=a("591a"),d=a("77e0"),u={name:"search-page",mixins:[d["c"]],components:{bookCard:l["a"],schoolCard:o["a"],graphicCard:r["a"]},computed:Object(n["a"])({},Object(h["c"])(["userDataState","userPointState"])),data:function(){return{value:"",tab:[{type:"book",name:"图书",count:0},{type:"school",name:"学校",count:0},{type:"article",name:"文章",count:0}],list:[],listIndex:0,loading:!1,finished:!1,page:1}},watch:{value:function(t){0==t.length?this.onCancel():this.onSearch()}},methods:Object(n["a"])({},Object(h["b"])(["getSearch"]),{setListIndex:function(t){switch(this.list=[],this.listIndex=t,this.listIndex){case 0:this.getBookList();break;case 1:this.getSchoolList();break;case 2:this.getArticleList();break}},getBookList:function(){var t=this,e={params:{keyword:this.value,page:this.page}};c["a"].get("/book/SchoolShelfBook/getList",e).then(function(e){switch(e.data.status){case 1:0==t.listIndex&&(t.list=t.list.concat(e.data.data),t.page++,t.loading=!1,t.list.length>=e.data.count&&(t.finished=!0)),t.tab[0].count=e.data.count;break;case 0:t.page=1,t.list=[],t.loading=!1,t.finished=!0;break}})},getSchoolList:function(){var t=this,e=this.userPointState.location.split(","),a={keywords:this.value,city:this.userPointState.city,lng:e[0],lat:e[1],type:"141203|141204"};this.getSearch(a).then(function(e){e.count>0?(1==t.listIndex&&(t.list=t.list.concat(e.resData),t.page++,t.loading=!1,t.list.length>=e.count&&(t.finished=!0)),t.tab[1].count=e.count):(t.page=1,t.list=[],t.loading=!1,t.finished=!0)})},getArticleList:function(){var t=this,e={params:{keyword:this.value,page:this.page,tid:9}};c["a"].get("/book/SchoolArticle/getList",e).then(function(e){switch(e.data.status){case 1:2==t.listIndex&&(t.list=t.list.concat(e.data.data),t.page++,t.loading=!1,t.list.length>=e.data.count&&(t.finished=!0)),t.tab[2].count=e.data.data.length;break;case 0:t.page=1,t.list=[],t.loading=!1,t.finished=!0;break}})},onLoad:function(){this.getBookList(),this.getSchoolList(),this.getArticleList()},onSearch:function(){this.page=1,this.list=[],this.onLoad()},onCancel:function(){this.page=1,this.list=[]},toSchool:function(t){this.$router.replace({name:"apps-school",query:{id:t.school_id}})}})},p=u,v=(a("f78a"),a("2877")),g=Object(v["a"])(p,s,i,!1,null,"73eeeb3b",null);e["default"]=g.exports},c9693:function(t,e,a){"use strict";var s=a("3352"),i=a.n(s);i.a},f78a:function(t,e,a){"use strict";var s=a("3389"),i=a.n(s);i.a}}]);