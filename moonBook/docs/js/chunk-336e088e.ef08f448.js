(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-336e088e"],{1170:function(t,e,a){"use strict";var i=a("5af2"),s=a.n(i);s.a},3374:function(t,e,a){"use strict";var i=a("cfcf"),s=a.n(i);s.a},"5af2":function(t,e,a){},a0ae:function(t,e,a){"use strict";var i=a("de22"),s=a.n(i);s.a},a22e:function(t,e,a){"use strict";var i=a("bf77"),s=a.n(i);s.a},bf77:function(t,e,a){},cfcf:function(t,e,a){},d360:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"read-guide"},[a("div",{staticClass:"banner",on:{click:t.toBookShelf}},[a("i",{staticClass:"iconfont"},[t._v("")]),a("div",{staticClass:"bg-black flex flex-justify"},[a("van-button",{staticClass:"theme-plain",attrs:{plain:"",round:"",type:"primary"}},[t._v("前往书架")])],1)]),a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("div",{staticClass:"tab"},[a("van-tabs",{attrs:{color:"#0084ff","line-width":20,"line-height":4,swipeable:"",animated:"",border:!1},on:{change:t.onChangeTab}},t._l(t.tab,function(e,i){return a("van-tab",{key:i,attrs:{title:e.title}},[e.article?a("div",{staticClass:"article"},[a("div",{staticClass:"content"},[a("div",{staticClass:"article-title"},[t._v(t._s(e.articleTitle))]),a("media",{attrs:{item:e.article}})],1)]):t._e()])}),1)],1)]),a("div",{staticClass:"slogan"},[t._v("\n    "+t._s(t.$store.state.slogan)+"\n  ")])],1)},s=[],n=(a("a481"),a("9993")),o=a("f6ba"),r={name:"read-guide",components:{media:o["a"]},data:function(){return{loading:!1,finished:!1,page:1,tab:[{title:"小班",content:[],article:"",articleTitle:""},{title:"中班",content:[],article:"",articleTitle:""},{title:"大班",content:[],article:"",articleTitle:""}],tabIndex:0}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){this.onRefresh()},onLoad:function(){var t=this,e={params:{page:this.page,sort:"random",keyword:this.tab[this.tabIndex].title}};return n["a"].get("/book/SchoolShelfBook/getList",e).then(function(e){var a={params:{ajax:1,fr:"official",title:"".concat(t.tab[t.tabIndex].title,"推荐书单导读")}};switch(n["a"].get("/book/SchoolArticle/detail",a).then(function(e){switch(e.data.status){case 1:t.tab[t.tabIndex].article=e.data.data.post,t.tab[t.tabIndex].articleTitle=e.data.data.post.title;break}}),e.data.status){case 1:1==t.page?t.tab[t.tabIndex].content=e.data.data:t.tab[t.tabIndex].content=t.tab[t.tabIndex].content.concat(e.data.data),t.loading=!1,t.page++,t.tab[t.tabIndex].content.length>=e.data.count&&(t.finished=!0);break;case 0:t.page=1,t.loading=!1,t.finished=!0,t.tab[t.tabIndex].content=[];break}})},toBookShelf:function(){this.$router.push({name:"bookshelf"})},onRefresh:function(){var t=this;this.page=1,this.onLoad().then(function(){t.loading=!1,t.finished=!1})},onChangeTab:function(t){this.tabIndex=t,this.page=1,this.tab[this.tabIndex].content=[],this.onRefresh()}}},c=r,l=(a("3374"),a("a22e"),a("2877")),d=Object(l["a"])(c,i,s,!1,null,"e31df312",null);e["default"]=d.exports},de22:function(t,e,a){},f6ba:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",class:"article"==t.$route.name?"article":"",attrs:{id:"media"},on:{click:t.toArticle}},["card"==t.type&&"0"==t.item.template_id?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.title))]):t._e(),t.item.details&&t.isDetailsShow?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:"card"==t.type?2:0,expression:"type == 'card'?2:0",arg:"20"}],ref:"textContent",staticClass:"text",class:0==t.item.template_id?"content":"",domProps:{innerHTML:t._s(t.item.details)}}):t._e(),"1"==t.item.hasvideo?a("div",{staticClass:"media",class:"1"==t.item.hasvideo?"video-cover":""},t._l(t.item.photos,function(e,i){return a("div",{key:i,staticClass:"thumb"},[e&&"1"==e.is_video?a("div",{staticClass:"video-thumb"},["card"==t.type||t.isCommentShow?a("div",{staticClass:"player-card",class:["90"==e.rotate?"vertical":"",t.isCommentShow?"poster":""]},[t._m(0,!0),a("img",{attrs:{src:t.item.cover,alt:"视频封面"}}),a("van-tag",{staticClass:"duration",attrs:{size:"medium",color:"rgba(0,0,0,.5)"}},[t._v(t._s(t.getDuration(e.duration)))])],1):t.isCommentShow?t._e():a("div",{staticClass:"video-wrapper"},[a("video",{ref:"videoPlayer",refInFor:!0,attrs:{id:"video",controls:"controls",src:e.photo,poster:e.thumb,preload:"auto","x-webkit-airplay":"true",airplay:"allow","webkit-playsinline":"true","x5-playsinline":"",playsinline:"true"}})])]):t._e()])}),0):t._e(),"1"==t.item.template_id&&t.item.photos?a("div",{staticClass:"media img"},[a("div",{class:["card"==t.type?"layout-"+t.item.photos.length:""]},[a("van-row",{attrs:{gutter:4}},t._l(t.item.photos,function(e,i){return a("van-col",{key:i,attrs:{span:t.grid}},[e&&0==e.is_video&&0==e.is_audio?a("div",{staticClass:"img-grid",class:[1==t.item.photos.length&&e.height/e.width>1?"long":"",1==t.item.photos.length&&"details"==t.type?"alone":""]},[a("img",{staticClass:"img-preview",class:[e.height/e.width>2?"long":""],attrs:{src:e.thumb,large:e.photo,preview:"card"!=t.type&&e.post_id}}),e.height/e.width>2&&"card"==t.type&&i<1?a("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("长图")]):t._e()],1):t._e()])}),1)],1)]):t._e(),"0"==t.item.template_id&&"card"==t.type&&t.item.cover&&"1"!=t.item.hasvideo?a("div",{staticClass:"media img long-article-thumb"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover||t.item.photos[0].thumb}}),a("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("文章")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"},[a("i",{staticClass:"iconfont"},[t._v("")])])}],n=(a("7f7f"),a("a481"),a("bec1")),o={name:"media",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},coverShow:{type:Boolean,default:!0},stopClick:{type:Boolean,default:!1},schoolName:{type:String,default:""},schoolId:{type:String,default:""},isDetailsShow:{type:Boolean,default:!0},isCommentShow:{type:Boolean,default:!1}},computed:{grid:function(){var t;return t=4==this.item.photos.length||2==this.item.photos.length?12:1==this.item.photos.length&&"details"==this.type?24:8,t}},data:function(){return{playing:!1}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},methods:{toArticle:function(){"card"!=this.type||this.stopClick||this.$router.push({name:"article",query:{id:this.item.post_id,type:this.item.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},getDuration:function(t){return Object(n["e"])(t)}}},r=o,c=(a("a0ae"),a("1170"),a("2877")),l=Object(c["a"])(r,i,s,!1,null,"1d14f574",null);e["a"]=l.exports}}]);