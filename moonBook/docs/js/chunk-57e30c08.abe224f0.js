(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57e30c08"],{"2c72":function(t,e,s){},"5c8c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slogan"},[t._v("\n    "+t._s(t.$store.state.slogan)+"\n")])},n=[],i={name:"slogan"},o=i,c=(s("d071"),s("2877")),l=Object(c["a"])(o,a,n,!1,null,"ef722a5e",null);e["a"]=l.exports},6103:function(t,e,s){"use strict";var a=s("2c72"),n=s.n(a);n.a},"7cb1":function(t,e,s){"use strict";var a=s("b4f6"),n=s.n(a);n.a},"95e9":function(t,e,s){},"9e7a":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notice page-padding"},[s("van-nav-bar",{attrs:{title:t.$route.meta.title,border:!1}}),s("div",{staticClass:"container"},[s("message-list")],1)],1)},n=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("van-tabs",{attrs:{color:"#0084ff","line-width":20,"line-height":4,sticky:"",border:!1},on:{change:t.onChange}},t._l(t.tab,function(e,a){return s("van-tab",{key:a},[s("div",{staticClass:"tab-title",attrs:{slot:"title"},slot:"title"},[t._v("\n        "+t._s(e.title)+"\n        "),0==a&&t.MsgLengthState>0?s("div",{staticClass:"unread badge"},[t._v("\n          "+t._s(t.MsgLengthState)+"\n        ")]):t._e()]),s("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[e.content.length>0?s("div",{staticClass:"list"},t._l(e.content,function(e,n){return s("div",{key:n,staticClass:"item-cell",on:{click:function(s){return t.toMsgDetails(e)}}},[s("van-swipe-cell",{attrs:{"right-width":0==a?78:0}},[s("van-cell-group",{attrs:{border:!1}},[s("van-cell",[s("div",{staticClass:"flex flex-align"},[s("div",{staticClass:"icon",class:["bookshelf"==e.msg_type?"moon-book":"system"]},["bookshelf"==e.msg_type?s("i",{staticClass:"iconfont moon-book"},[t._v("")]):s("i",{staticClass:"iconfont system"},[t._v("")])]),s("div",{staticClass:"msg-content"},[s("div",{staticClass:"type flex flex-align"},[s("div",{staticClass:"name"},[t._v(t._s("bookshelf"==e.msg_type?"阅亮书架":"系统消息"))]),s("div",{staticClass:"date"},[t._v("\n                            "+t._s(e.create_date_friendly)+"\n                          ")])]),s("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"text"},[s("span",{staticClass:"title"},[t._v("【"+t._s(e.title)+"】")]),t._v(t._s(e.intro))])])])])],1),s("div",{staticClass:"slot",style:{width:"78px"},attrs:{slot:"right"},slot:"right"},[s("span",{staticClass:"topping",class:1==e.is_top?"cancel":"",on:{click:function(s){return t.topping(e)}}},[t._v(t._s(1==e.is_top?"取消置顶":"置顶"))])])],1)],1)}),0):s("div",{staticClass:"no-content"},[t._v("暂无"+t._s(e.title))])])],1)],1)}),1),s("van-popup",{staticClass:"page-popup",attrs:{position:"right"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("msg-details",{attrs:{details:t.details},on:{close:function(e){t.show=!1}}})],1)],1)},o=[],c=s("cebc"),l=s("591a"),d=s("9993"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"msg-details"},[s("van-nav-bar",{key:t.$route.query.id,attrs:{title:"消息详情","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),s("div",{staticClass:"container"},[s("div",{staticClass:"content"},[s("div",{staticClass:"hd flex flex-align"},[s("div",{staticClass:"title"},[t._v(t._s(t.details.title))]),s("div",{staticClass:"create-date"},[t._v(t._s(t.timeAgo(t.details.create_time)))])]),s("div",{staticClass:"details"},[t._v(t._s(t.details.details))])])]),s("slogan")],1)},g=[],u=s("5c8c"),f=s("bec1"),v={name:"msg-details",props:["details"],components:{slogan:u["a"]},data:function(){return{}},methods:{onClickLeft:function(){this.$emit("close")},timeAgo:function(t){return Object(f["m"])(1e3*t)}}},h=v,p=(s("6103"),s("2877")),b=Object(p["a"])(h,r,g,!1,null,"729d5596",null),m=b.exports,_={name:"message",components:{msgDetails:m},computed:Object(c["a"])({},Object(l["c"])(["MsgLengthState"])),data:function(){return{tab:[{title:"未读消息",isRead:0,content:[]},{title:"已读消息",isRead:1,content:[]}],page:1,loading:!1,finished:!1,tabIndex:0,show:!1,details:""}},watch:{tab:{handler:function(t){t[1].content.length>0&&(this.tabDisabled=!1)},deep:!0}},methods:Object(c["a"])({},Object(l["b"])(["getMsg"]),{topping:function(t){var e=this;d["a"].get("/book/MemberMsg/top?msg_id=".concat(t.msg_id)).then(function(t){1==t.data.status&&(e.isLoading=!1,e.page=1,e.onLoad())})},toMsgDetails:function(t){var e=this;d["a"].get("/book/MemberMsg/getInfo?msg_id=".concat(t.msg_id)).then(function(t){1==t.data.status&&(e.details=t.data.data,e.isLoading=!1,e.page=1,e.onLoad(),e.getMsg())}),this.show=!0},onLoad:function(){this.getMsgList()},getMsgList:function(){var t=this;return d["a"].get("/book/MemberMsg/getList?page=".concat(this.page,"&is_read=").concat(this.tab[this.tabIndex].isRead,"&sort=top")).then(function(e){if(1==e.data.status){var s=e.data.data;t.loading=!1,1==t.page?t.tab[t.tabIndex].content=s:t.tab[t.tabIndex].content=t.tab[t.tabIndex].content.concat(s),t.page++,t.tab[t.tabIndex].content.length>=e.data.count&&(t.finished=!0)}})},onRefresh:function(){var t=this;this.page=1,this.getMsgList().then(function(){t.loading=!1,t.finished=!1})},onChange:function(t){this.tabIndex=t,this.page=1,this.onRefresh()}})},C=_,x=(s("7cb1"),Object(p["a"])(C,i,o,!1,null,"41821998",null)),k=x.exports,w={name:"notice",components:{messageList:k}},L=w,M=Object(p["a"])(L,a,n,!1,null,"c0ea23c2",null);e["default"]=M.exports},b4f6:function(t,e,s){},d071:function(t,e,s){"use strict";var a=s("95e9"),n=s.n(a);n.a}}]);