{"version":3,"sources":["webpack:///./src/components/pages/newBook.vue?5476","webpack:///src/components/pages/newBook.vue","webpack:///./src/components/pages/newBook.vue?3612","webpack:///./src/components/pages/newBook.vue","webpack:///./src/components/pages/newBook.vue?b91a","webpack:///./src/components/module/card/bookCard.vue?61a5","webpack:///src/components/module/card/bookCard.vue","webpack:///./src/components/module/card/bookCard.vue?52f9","webpack:///./src/components/module/card/bookCard.vue","webpack:///./src/components/module/card/bookCard.vue?e391"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","src","key","userDataState","card_id","on","refresh","onRefresh","model","value","callback","$$v","loading","expression","finished","finished-text","$store","state","slogan","load","onLoad","_l","item","index","timediff","click","toSchoolHome","_v","_s","card_school_name","getTimeAgo","create_time","_e","type","list","title","round","size","toBookShelf","staticRenderFns","newBookvue_type_script_lang_js_","name","components","bookCard","data","page","computed","Object","objectSpread","vuex_esm","methods","_this","params","sort","start_time","Date","parse","api","get","then","res","status","concat","length","count","_this2","time","util","timeHistory","$router","push","query","id","card_school_id","pages_newBookvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_newBook_vue_vue_type_style_index_0_id_7de206d4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_newBook_vue_vue_type_style_index_0_id_7de206d4_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","gutter","span","thumb","book_photo","error","imgError","is_read","toBookDetails","directives","rawName","arg","book_title","pos_name","book_borrow_count","addCollect","listening","plain","toBorrow","bookCardvue_type_script_lang_js_","props","itemCollect","watch","isCollect","val","img","hostMatch","match","p","pureTitle","replace","url","isRead","localStorage","getItem","book_id","location","href","setItem","target_id","type_id","$toast","success","className","duration","borrow_id","encodeURIComponent","e","target","card_bookCardvue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_bookCard_vue_vue_type_style_index_0_id_f522cdfc_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_bookCard_vue_vue_type_style_index_0_id_f522cdfc_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-8f49323a.25f3de3c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-book\"},[_c('img',{staticClass:\"head-bg\",attrs:{\"src\":\"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/newBook.jpg\"}}),_c('div',{staticClass:\"list-padding\"},[_c('van-pull-refresh',{key:_vm.userDataState.card_id,on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":_vm.$store.state.slogan},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('van-cell',{key:index},[(_vm.timediff(item,index))?_c('div',{staticClass:\"hd-bar flex flex-align\"},[_c('div',{staticClass:\"card-school-name theme-color\",on:{\"click\":_vm.toSchoolHome}},[_vm._v(_vm._s(index == 0?_vm.userDataState.card_school_name:''))]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.getTimeAgo(item.create_time)))])]):_vm._e(),_c('bookCard',{attrs:{\"item\":item,\"type\":_vm.list.title}})],1)}),1)],1)],1),_c('div',{staticClass:\"footer-bar\"},[_c('div',{staticClass:\"btn-box\"},[_c('van-button',{staticClass:\"theme-btn\",attrs:{\"round\":\"\",\"type\":\"primary\",\"size\":\"normal\"},on:{\"click\":_vm.toBookShelf}},[_vm._v(\"去书架看看\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"new-book\">\r\n        <img class=\"head-bg\" src=\"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/newBook.jpg\" />\r\n        <div class=\"list-padding\">\r\n            <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\" :key=\"userDataState.card_id\">\r\n                <van-list v-model=\"loading\" :finished=\"finished\" :finished-text=\"$store.state.slogan\" @load=\"onLoad\">\r\n                    <van-cell v-for=\"(item,index) in list\" :key=\"index\">\r\n                    <div class=\"hd-bar flex flex-align\" v-if='timediff(item,index)'>\r\n                        <div class=\"card-school-name theme-color\" @click=\"toSchoolHome\">{{index == 0?userDataState.card_school_name:''}}</div>\r\n                        <div class=\"time\">{{getTimeAgo(item.create_time)}}</div>   \r\n                    </div>\r\n                    <bookCard :item='item' :type='list.title' />\r\n                    </van-cell>\r\n                </van-list>\r\n            </van-pull-refresh>\r\n        </div>\r\n\r\n        <div class=\"footer-bar\">\r\n            <div class=\"btn-box\">\r\n                <van-button round class=\"theme-btn\" type=\"primary\" size=\"normal\" @click=\"toBookShelf\">去书架看看</van-button>\r\n            </div>\r\n        </div>\r\n    </div>    \r\n</template>\r\n<script>\r\nimport axios from './../lib/js/api'\r\nimport { mapGetters } from 'vuex'\r\nimport { format } from './../lib/js/util'\r\nimport bookCard from './../module/card/bookCard'\r\n\r\nexport default {\r\n    name:'new-book',\r\n    components:{\r\n        bookCard\r\n    },\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            finished: false,\r\n            page:1,\r\n            list:[]\r\n        }\r\n    },\r\n    computed: {\r\n      ...mapGetters(['userDataState'])  \r\n    },\r\n    methods: {\r\n        onLoad(){\r\n            let data = {\r\n                params:{\r\n                    sort: 'new',\r\n                    start_time: Date.parse(new Date()) - 86400*7000,\r\n                    card_id: this.userDataState.card_id\r\n                }\r\n            }\r\n\r\n           return axios.get('/book/SchoolShelfBook/getList',data).then(res=>{\r\n                switch (res.data.status) {\r\n                case 1:\r\n                    if (this.page == 1) {\r\n                        this.list = res.data.data\r\n                    } else {\r\n                        this.list = this.list.concat(res.data.data)\r\n                    }\r\n                    this.loading = false\r\n                    this.page++\r\n                    if (this.list.length >= res.data.count) {\r\n                        this.finished = true\r\n                    }\r\n                    break\r\n                case 0:\r\n                    this.page = 1\r\n                    this.loading = false\r\n                    this.finished = true\r\n                    this.list = []\r\n                    break\r\n                }\r\n            })\r\n        },\r\n        onRefresh(){\r\n            this.page = 1\r\n            this.onLoad().then(() => {\r\n                this.loading = false\r\n                this.finished = false\r\n            })\r\n        },\r\n        getTimeAgo(time){\r\n            return format(time*1000,'yyyy-MM-dd')\r\n        },\r\n        timediff(item,index){\r\n            if(index == 0){\r\n                return true\r\n            }\r\n\r\n            if(index){\r\n                let timeHistory = format(this.list[index-1].create_time * 1000,'yyyy-MM-dd')\r\n                let time = format(item.create_time*1000,'yyyy-MM-dd')\r\n                if(timeHistory == time){\r\n                    return false\r\n                }else{\r\n                    return true\r\n                }\r\n            }\r\n        },\r\n        toBookShelf(){\r\n            this.$router.push({\r\n                name:'bookshelf'\r\n            })\r\n        },\r\n        toSchoolHome(){\r\n            this.$router.push({\r\n                name:'apps-school',\r\n                query:{\r\n                    id: this.userDataState.card_school_id\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.new-book{\r\n    min-height: 100vh;\r\n    background: #ffcf1a;\r\n}\r\n\r\n.head-bg{\r\n    position: fixed;\r\n    top: 0;\r\n}\r\n\r\n.list-padding{\r\n    margin-top: 30%;\r\n}\r\n\r\n.btn-box{\r\n   padding: 10px 15px;\r\n}\r\n\r\n.footer-bar{\r\n   position: fixed;\r\n   bottom: 0;\r\n}\r\n\r\n.footer-bar,\r\n.theme-btn{\r\n    width: 100%;\r\n}\r\n\r\n.hd-bar{\r\n    justify-content: space-between;\r\n    height: 32px;\r\n    line-height: 32px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newBook.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newBook.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./newBook.vue?vue&type=template&id=7de206d4&scoped=true&\"\nimport script from \"./newBook.vue?vue&type=script&lang=js&\"\nexport * from \"./newBook.vue?vue&type=script&lang=js&\"\nimport style0 from \"./newBook.vue?vue&type=style&index=0&id=7de206d4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7de206d4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newBook.vue?vue&type=style&index=0&id=7de206d4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newBook.vue?vue&type=style&index=0&id=7de206d4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-row',{attrs:{\"gutter\":\"20\"}},[_c('van-col',{attrs:{\"span\":\"7\"}},[_c('div',{staticClass:\"book-cover\"},[_c('img',{attrs:{\"src\":_vm.thumb(_vm.item.book_photo)},on:{\"error\":_vm.imgError}}),(_vm.item.is_read > 0)?_c('div',{staticClass:\"is-read\"},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")])]):_vm._e()])]),_c('van-col',{attrs:{\"span\":\"11\"}},[_c('div',{staticClass:\"book-info\",on:{\"click\":_vm.toBookDetails}},[_c('div',{directives:[{name:\"line-clamp\",rawName:\"v-line-clamp:20\",value:(2),expression:\"2\",arg:\"20\"}],staticClass:\"title\"},[_vm._v(_vm._s(_vm.item.book_title))]),_c('div',{staticClass:\"attach\"},[(_vm.item.pos_name)?_c('div',{staticClass:\"pos-title\"},[_vm._v(\"书位：\"+_vm._s(_vm.item.pos_name))]):_vm._e()]),(_vm.type==\"guide\")?_c('div',{staticClass:\"borrow\"},[_vm._v(\"\\n        借阅：\"+_vm._s(_vm.item.book_borrow_count)+\" 次\\n      \")]):_vm._e()])]),_c('van-col',{attrs:{\"span\":\"6\"}},[_c('div',{staticClass:\"button\"},[_c('div',{staticClass:\"flex flex-align\"},[_c('div',{staticClass:\"like\",on:{\"click\":_vm.addCollect}},[(_vm.itemCollect)?_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]):_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")])]),_c('div',{staticClass:\"listening\",on:{\"click\":_vm.listening}},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")])])]),(_vm.type == \"在读\")?_c('div',{staticClass:\"abrasion\"},[_c('van-button',{staticClass:\"theme-btn\",attrs:{\"plain\":\"\",\"size\":\"small\",\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.toBorrow}},[_vm._v(\"磨损\")])],1):_vm._e()])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <van-row gutter=\"20\">\r\n    <van-col span=\"7\">\r\n      <div class=\"book-cover\">\r\n        <img :src=\"thumb(item.book_photo)\" @error=\"imgError\"/>\r\n        <div class=\"is-read\" v-if='item.is_read > 0'>\r\n          <i class=\"iconfont\">&#xe66f;</i>\r\n        </div>\r\n      </div>\r\n    </van-col>\r\n    <van-col span=\"11\">\r\n      <div class=\"book-info\"  @click=\"toBookDetails\">\r\n        <div class=\"title\" v-line-clamp:20=\"2\">{{item.book_title}}</div>\r\n        <div class=\"attach\">\r\n          <div class=\"pos-title\" v-if='item.pos_name'>书位：{{item.pos_name}}</div>\r\n        </div>\r\n        <div class=\"borrow\" v-if='type==\"guide\"'>\r\n          借阅：{{item.book_borrow_count}} 次\r\n        </div>\r\n      </div>\r\n    </van-col>\r\n    <van-col span=\"6\">\r\n      <div class=\"button\">\r\n        <div class=\"flex flex-align\">\r\n          <div class=\"like\" @click=\"addCollect\">\r\n            <i class=\"iconfont\" v-if='itemCollect'>&#xe668;</i>\r\n            <i class=\"iconfont\" v-else>&#xe669;</i>\r\n          </div>\r\n          <div class=\"listening\" @click=\"listening\">\r\n            <i class=\"iconfont\">&#xe617;</i>\r\n          </div>\r\n        </div>\r\n        <div class=\"abrasion\" v-if='type == \"在读\"'>\r\n          <van-button plain class=\"theme-btn\" size=\"small\" type=\"primary\" round @click=\"toBorrow\">磨损</van-button>\r\n        </div>\r\n      </div>\r\n    </van-col>\r\n  </van-row>\r\n</template>\r\n<script>\r\nimport axios from \"./../../lib/js/api\"\r\n\r\nexport default {\r\n  name: 'bookCard',\r\n  props: ['item','type','isCollect'],\r\n  data () {\r\n    return {\r\n      itemCollect: false\r\n    }\r\n  },\r\n  watch: {\r\n    isCollect(val){\r\n      this.itemCollect = val == 1?true:false\r\n    }\r\n  },\r\n  methods: {\r\n    thumb(img) {\r\n      if(img){\r\n        let hostMatch = img.match(/https?:\\/\\/(.+?)\\//)\r\n        if (hostMatch) {\r\n          return `/book/api/remotePic?url=${img}`\r\n        } else {\r\n          return img\r\n        }\r\n      }\r\n    },\r\n    listening() {\r\n      let p = /（.+?）/\r\n      let pureTitle = this.item.book_title.replace(p, '')\r\n      let url = `https://m.ximalaya.com/search/${pureTitle}`\r\n      let isRead = localStorage.getItem('bookRead_' + this.item.book_id)\r\n      if (!isRead) {\r\n        axios.get('/book/story/updateRead').then(res => {\r\n          localStorage.setItem('bookRead_' + this.item.book_id, true)\r\n          location.href = url\r\n        })\r\n      } else {\r\n        location.href = url\r\n      }\r\n    },\r\n    toBookDetails() {\r\n      this.$router.push({\r\n        name: 'book-details',\r\n        query: {\r\n          id: this.item.book_id\r\n        }\r\n      })\r\n    },\r\n    addCollect() {\r\n      let data = {\r\n          params:{\r\n            target_id: this.item.book_id,\r\n            type_id: 5\r\n          }\r\n      }\r\n\r\n      axios.get('/book/member/add_favorite',data).then(res => {\r\n        if (res.data.status == 1) {\r\n          this.itemCollect = !this.itemCollect\r\n    \r\n          if(this.itemCollect){\r\n            this.$toast.success({\r\n              className: 'like-icon toast-icon',\r\n              duration: '800'\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    toBorrow(){\r\n      if(this.item.borrow_id){\r\n        location.href = `/book/MemberBookBroken/add/borrow_id/${this.item.borrow_id}?back_url=${encodeURIComponent(location.href)}`\r\n      }\r\n    },\r\n    imgError(e) {\r\n      e.target.src = 'https://assets-moonbook.oss-cn-beijing.aliyuncs.com/img/no-cover.jpg'\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.book_title {\r\n  margin-bottom: 0.3125rem /* 5/16 */;\r\n  font-weight: 500;\r\n}\r\n\r\n.attach,\r\n.borrow{\r\n  color: #606266;\r\n}\r\n\r\n.book-cover{\r\n  position: relative;\r\n}\r\n\r\n.book-cover img {\r\n  margin: 0 auto;\r\n  display: block;\r\n}\r\n\r\n.title {\r\n  margin-bottom: 0.625rem /* 10/16 */;\r\n  font-weight: 500;\r\n}\r\n\r\n.button{\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  transform: translate3d(0, -50%, 0);\r\n}\r\n\r\n.like{\r\n  margin-right: 1.25rem /* 20/16 */;\r\n}\r\n\r\n.listening i.iconfont,\r\n.like .iconfont{\r\n  font-size: 1.625rem /* 26/16 */;\r\n  color: #f02b2b;\r\n}\r\n\r\n.abrasion .theme-btn{\r\n  width: 100%;\r\n  margin-top: .625rem /* 10/16 */;\r\n}\r\n\r\n.book-cover img{\r\n  min-height: 6.25rem /* 100/16 */;\r\n  background: #fff;\r\n}\r\n\r\n.is-read{\r\n  position: absolute;\r\n  left: -5px;\r\n  top: 10px;\r\n  text-align: center;\r\n}\r\n\r\n.is-read::after{\r\n  content: '';\r\n  position: absolute;\r\n  top: -10px;\r\n  left: 6px;\r\n  width: 28px;\r\n  height: 33px;\r\n  background: #fff;\r\n  z-index: 1;\r\n}\r\n\r\n.is-read .iconfont{\r\n  font-size: 2.5rem /* 40/16 */;\r\n  color: #8BC34A;\r\n  z-index: 3;\r\n  position: relative;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bookCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bookCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bookCard.vue?vue&type=template&id=f522cdfc&scoped=true&\"\nimport script from \"./bookCard.vue?vue&type=script&lang=js&\"\nexport * from \"./bookCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bookCard.vue?vue&type=style&index=0&id=f522cdfc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f522cdfc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bookCard.vue?vue&type=style&index=0&id=f522cdfc&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bookCard.vue?vue&type=style&index=0&id=f522cdfc&scoped=true&lang=css&\""],"sourceRoot":""}