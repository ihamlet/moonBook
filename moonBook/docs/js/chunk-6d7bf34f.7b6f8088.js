(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d7bf34f"],{"0df1":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-level"},[1==t.level?i("i",{staticClass:"iconfont",class:[1==t.level?"icon-1":""]},[t._v("")]):t._e(),2==t.level?i("i",{staticClass:"iconfont",class:[2==t.level?"icon-2":""]},[t._v("")]):t._e(),3==t.level?i("i",{staticClass:"iconfont",class:[3==t.level?"icon-3":""]},[t._v("")]):t._e(),4==t.level?i("i",{staticClass:"iconfont",class:[4==t.level?"icon-4":""]},[t._v("")]):t._e(),1==t.animate?i("div",{staticClass:"highlight"}):t._e()])},s=[],c={name:"vip-level",props:["level","animate"]},l=c,o=(i("16b4"),i("17cc")),n=Object(o["a"])(l,a,s,!1,null,"4b9ff89e",null);e["a"]=n.exports},1170:function(t,e,i){"use strict";var a=i("1d04"),s=i.n(a);s.a},"12fd":function(t,e,i){},"16b4":function(t,e,i){"use strict";var a=i("2a7c"),s=i.n(a);s.a},"181c":function(t,e,i){},"1d04":function(t,e,i){},"2a7c":function(t,e,i){},"5b8d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-card"},[t.item.user?i("div",{ref:"userCard",staticClass:"flex flex-align"},[i("div",{staticClass:"avatar",on:{click:t.toZoom}},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar,alt:t.item.user.username},on:{error:t.imgError}})]),i("div",{staticClass:"flex flex-align handle-card"},[i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[i("div",{staticClass:"flex flex-align"},[i("span",[t._v(t._s(t.item.user.username))]),t.item.card_level?i("vip-level",{attrs:{animate:!0,level:t.item.card_level.level}}):t._e()],1)]),i("div",{staticClass:"article-info flex flex-align"},[i("div",{staticClass:"read-num"},[t._v("阅读 "+t._s(t.item.views))]),i("div",{staticClass:"origin"},[t._v("•")]),i("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.item.create_time)))]),t.schoolName||t.item.school?i("div",{staticClass:"origin"},[t._v("•")]):t._e(),t.schoolName?i("div",{staticClass:"school-info",on:{click:t.toSchool}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.schoolName))])]):t.item.school?i("div",{staticClass:"school-info",on:{click:t.toSchool}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.item.school.title))])]):t._e()])]),3!=t.item.isSubscribe?i("div",{staticClass:"follow-btn"},[i("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))])],1):t._e()])]):t._e()])},s=[],c=(i("7364"),i("9993")),l=i("0df1"),o=i("bec1"),n={name:"userCard",props:["item","schoolName"],components:{vipLevel:l["a"]},methods:{follow:function(t){var e=this;"preview"!=this.$route.query.type&&(t.isSubscribe=!t.isSubscribe,c["a"].get("/book/MemberFollow/subscribe?user_id=".concat(t.user_id)).then(function(t){e.$toast.success(t.data.msg)}))},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toZoom:function(){this.$router.push({name:"zoom",query:{id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},toSchool:function(){this.$router.push({name:"apps-school",query:{id:this.$route.query.school_id}})},getTimeAgo:function(t){return Object(o["l"])(1e3*t)}}},r=n,d=(i("7ce4"),i("17cc")),u=Object(d["a"])(r,a,s,!1,null,"7709d618",null);e["a"]=u.exports},"5dfa":function(t,e,i){"use strict";var a=i("a8e9"),s=i.n(a);s.a},"6bc7":function(t,e,i){"use strict";var a=i("9bce"),s=i.n(a);s.a},"7ce4":function(t,e,i){"use strict";var a=i("181c"),s=i.n(a);s.a},9274:function(t,e,i){"use strict";var a=i("a54b"),s=i.n(a);s.a},"93c1":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-card"},["article"==t.cardStyle?i("div",{staticClass:"grade-card"},["book"==t.item.type?i("div",{staticClass:"type-book flipInX animated",on:{click:t.toReadStat}},[i("div",{staticClass:"content"},[i("div",{staticClass:"book-sign"},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"book-name"},[t._v("本次打卡 "+t._s(0==t.item.tushu_id?"":"《"+t.item.title+"》"))]),i("div",{staticClass:"flex flex-align"},[t.item.sign_days?i("div",{staticClass:"item-data"},[i("div",{staticClass:"sign-title"},[t._v("打卡天数")]),i("div",{staticClass:"number"},[t._v(t._s(t.item.sign_days))])]):t._e(),t.item.sign_read_count?i("div",{staticClass:"item-data"},[i("div",{staticClass:"sign-title"},[t._v("打卡本数")]),i("div",{staticClass:"number"},[t._v(t._s(t.item.sign_read_count))])]):t._e(),i("van-button",{staticClass:"theme-plain",attrs:{plain:"",size:"small",round:"",type:"primary"}},[t._v("查看成绩")])],1)]),i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"bg"}),i("Round")],1):t.flag?i("div",{staticClass:"article-share",on:{click:t.toDetails}},[i("media",{key:t.detailsId,attrs:{type:"card",item:t.article,stopClick:!0,isDetailsShow:t.textShow}}),t.article?i("div",{staticClass:"info-bar flex flex-align"},[i("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.article.create_time)))]),i("div",{staticClass:"author"},[t._v("来自:"+t._s(t.username))])]):t._e()],1):t._e()]):i("div",{staticClass:"cell"},[i("div",{staticClass:"share-cell flex flex-align"},[i("div",{staticClass:"details flex flex-align"},[t.detailsId&&t.detailsId>0?i("div",{staticClass:"info",on:{click:t.toDetails}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"theme-color"},[t._v(t._s(t.item.post_id?t.item.title:"《"+t.item.title+"》")+" ")])]):t._e(),"book"==t.item.type?i("div",{staticClass:"punches theme-color",on:{click:t.toReadStat}},[t._v("\n                    "+t._s(t.item.sign_read_count>0?"累计"+t.item.sign_read_count+"本":"")+"\n                ")]):i("div",{staticClass:"include"},[t._v("\n                    收录\n                ")])])])])])},s=[],c=(i("34a3"),i("e20c")),l=i("9993"),o=i("bec1"),n=i("591a"),r=i("f6ba"),d=i("d248"),u={name:"article-card",props:["item","detailsId","type","childId","cardStyle"],components:{Round:d["a"],media:r["a"]},computed:Object(c["a"])({},Object(n["c"])(["userDataState"]),{details:function(){return Object(o["c"])(this.item.details)?this.item.details.replace(/<[^>]+>/g,""):this.item.details}}),data:function(){return{article:{},username:"",flag:!1,textShow:!0}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if("post"==this.type){var e={params:{ajax:1,id:this.detailsId}};l["a"].get("/book/SchoolArticle/detail",e).then(function(e){1==e.data.status&&(t.flag=!0,t.article=e.data.data.post,1==e.data.data.post.template_id?t.textShow=!0:t.textShow=!1,t.username=e.data.data.post.user.username)})}},toDetails:function(){var t="book"==this.item.type?"book-details":"article";this.$emit("toDetails",{routeName:t,detailsId:this.detailsId})},toReadStat:function(){this.$router.push({name:"readStat",query:{id:this.childId}})},getTimeAgo:function(t){return Object(o["l"])(1e3*t)}}},m=u,v=(i("5dfa"),i("6bc7"),i("17cc")),h=Object(v["a"])(m,a,s,!1,null,"22772670",null);e["a"]=h.exports},"9bce":function(t,e,i){},a54b:function(t,e,i){},a8e9:function(t,e,i){},ae3a:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topic-list"},[i("van-picker",{ref:"picker",attrs:{"show-toolbar":"",title:t.title,columns:t.column,"value-key":"cate_name"},on:{change:t.onCateChange,cancel:t.close,confirm:function(e){return t.$emit("confirm")}}})],1)},s=[],c=(i("f763"),i("e20c")),l=(i("9993"),i("591a")),o={name:"topic-list",props:["type","topicList","tagIndex","cateIndex","cateName"],computed:Object(c["a"])({},Object(l["c"])(["managerState"]),{column:function(){var t=[{values:this.topicList,className:"column1",defaultIndex:this.tagIndex},{values:this.topicList[this.tagIndex]?this.topicList[this.tagIndex].children:[],className:"column2",defaultIndex:this.cateIndex}];return t},title:function(){var t="宝贝主页的分类";switch(this.$route.query.back){case"class-home":t="班级主页的分类";break;case"apps-school":t="学校主页的分类";break}return t}}),methods:{onCateChange:function(t,e,i){t.setColumnValues(1,e[0].children),this.$emit("select",e[i])},close:function(){this.$refs.picker.setColumnValues(1,this.column[1].values),this.$refs.picker.setColumnIndex(0,0),this.$refs.picker.setColumnIndex(1,0),this.$emit("close")}}},n=o,r=i("17cc"),d=Object(r["a"])(n,a,s,!1,null,"96386f08",null);e["a"]=d.exports},d248:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"welt"},t._l(t.round,function(t,e){return i("div",{key:e,staticClass:"round",class:"round-"+e,style:{width:t.w,height:t.w}})}),0)},s=[],c={name:"round",data:function(){return{round:[{w:"300px"},{w:"100px"},{w:"50px"},{w:"200px"},{w:"60px"}]}}},l=c,o=(i("9274"),i("17cc")),n=Object(o["a"])(l,a,s,!1,null,"2b981942",null);e["a"]=n.exports},e7a0:function(t,e,i){"use strict";var a=i("12fd"),s=i.n(a);s.a},f6ba:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",class:"article"==t.$route.name?"article":"",attrs:{id:"media"},on:{click:t.toArticle}},["card"==t.type&&"0"==t.item.template_id?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.title))]):t._e(),t.item.details&&t.isDetailsShow?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:"card"==t.type?2:0,expression:"type == 'card'?2:0",arg:"20"}],ref:"textContent",staticClass:"text",class:0==t.item.template_id?"content":"",domProps:{innerHTML:t._s(t.item.details)}}):t._e(),"1"==t.item.hasvideo?i("div",{staticClass:"media",class:"1"==t.item.hasvideo?"video-cover":""},t._l(t.item.photos,function(e,a){return i("div",{key:a,staticClass:"thumb"},[e&&"1"==e.is_video?i("div",{staticClass:"video-thumb"},["card"==t.type||t.isCommentShow?i("div",{staticClass:"player-card",class:["90"==e.rotate?"vertical":"",t.isCommentShow?"poster":""]},[t._m(0,!0),i("img",{attrs:{src:t.item.cover,alt:"视频封面"}}),i("van-tag",{staticClass:"duration",attrs:{size:"medium",color:"rgba(0,0,0,.5)"}},[t._v(t._s(t.getDuration(e.duration)))])],1):t.isCommentShow?t._e():i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videoPlayer",refInFor:!0,attrs:{id:"video",controls:"controls",src:e.photo,poster:e.thumb,preload:"auto","x-webkit-airplay":"true",airplay:"allow","webkit-playsinline":"true","x5-playsinline":"",playsinline:"true"}})])]):t._e()])}),0):t._e(),"1"==t.item.template_id&&t.item.photos?i("div",{staticClass:"media img"},[i("div",{class:["card"==t.type?"layout-"+t.item.photos.length:""]},[i("van-row",{attrs:{gutter:4}},t._l(t.item.photos,function(e,a){return i("van-col",{key:a,attrs:{span:t.grid}},[e&&0==e.is_video&&0==e.is_audio?i("div",{staticClass:"img-grid",class:[1==t.item.photos.length&&e.height/e.width>1?"long":"",1==t.item.photos.length&&"details"==t.type?"alone":""]},[i("img",{staticClass:"img-preview",class:[e.height/e.width>2?"long":""],attrs:{src:e.thumb,large:e.photo,preview:"card"!=t.type&&e.post_id}}),e.height/e.width>2&&"card"==t.type&&a<1?i("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("长图")]):t._e()],1):t._e()])}),1)],1)]):t._e(),"0"==t.item.template_id&&"card"==t.type&&t.item.cover&&"1"!=t.item.hasvideo?i("div",{staticClass:"media img long-article-thumb"},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover||t.item.photos[0].thumb}}),i("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("文章")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player"},[i("i",{staticClass:"iconfont"},[t._v("")])])}],c=(i("7364"),i("34a3"),i("5b8d")),l=i("bec1"),o=(i("fed1"),{name:"media",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},coverShow:{type:Boolean,default:!0},stopClick:{type:Boolean,default:!1},schoolName:{type:String,default:""},schoolId:{type:String,default:""},isDetailsShow:{type:Boolean,default:!0},isCommentShow:{type:Boolean,default:!1}},components:{userCard:c["a"]},computed:{grid:function(){var t;return t=4==this.item.photos.length||2==this.item.photos.length?12:1==this.item.photos.length&&"details"==this.type?24:8,t}},data:function(){navigator.userAgent;return{playing:!1}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},methods:{toArticle:function(){"card"!=this.type||this.stopClick||this.$router.push({name:"article",query:{id:this.item.post_id,type:this.item.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},getDuration:function(t){return Object(l["f"])(t)}}}),n=o,r=(i("e7a0"),i("1170"),i("17cc")),d=Object(r["a"])(n,a,s,!1,null,"4504817b",null);e["a"]=d.exports}}]);