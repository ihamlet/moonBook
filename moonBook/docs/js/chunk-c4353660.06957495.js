(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c4353660"],{"0909":function(t,e,a){"use strict";var i=a("aef6"),s=a.n(i);s.a},"0df1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vip-level"},[1==t.level?a("i",{staticClass:"iconfont",class:[1==t.level?"icon-1":""]},[t._v("")]):t._e(),2==t.level?a("i",{staticClass:"iconfont",class:[2==t.level?"icon-2":""]},[t._v("")]):t._e(),3==t.level?a("i",{staticClass:"iconfont",class:[3==t.level?"icon-3":""]},[t._v("")]):t._e(),4==t.level?a("i",{staticClass:"iconfont",class:[4==t.level?"icon-4":""]},[t._v("")]):t._e(),1==t.animate?a("div",{staticClass:"highlight"}):t._e()])},s=[],o={name:"vip-level",props:["level","animate"]},n=o,l=(a("16b4"),a("2877")),r=Object(l["a"])(n,i,s,!1,null,"4b9ff89e",null);e["a"]=r.exports},"0f4c":function(t,e,a){},1170:function(t,e,a){"use strict";var i=a("5af2"),s=a.n(i);s.a},"15a1":function(t,e,a){},"16b4":function(t,e,a){"use strict";var i=a("bcd6"),s=a.n(i);s.a},4740:function(t,e,a){"use strict";var i=a("e2c9"),s=a.n(i);s.a},5902:function(t,e,a){},"5af2":function(t,e,a){},"6bc7":function(t,e,a){"use strict";var i=a("15a1"),s=a.n(i);s.a},9274:function(t,e,a){"use strict";var i=a("5902"),s=a.n(i);s.a},"93c1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"book-card"},["article"==t.cardStyle?a("div",{staticClass:"grade-card"},["book"==t.item.type?a("div",{staticClass:"type-book flipInX animated",on:{click:t.toReadStat}},[a("div",{staticClass:"content"},[a("div",{staticClass:"book-sign"},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"book-name"},[t._v("本次打卡 "+t._s(0==t.item.tushu_id?"":"《"+t.item.title+"》"))]),a("div",{staticClass:"flex flex-align"},[t.item.sign_days?a("div",{staticClass:"item-data"},[a("div",{staticClass:"sign-title"},[t._v("打卡天数")]),a("div",{staticClass:"number"},[t._v(t._s(t.item.sign_days))])]):t._e(),t.item.sign_read_count?a("div",{staticClass:"item-data"},[a("div",{staticClass:"sign-title"},[t._v("打卡本数")]),a("div",{staticClass:"number"},[t._v(t._s(t.item.sign_read_count))])]):t._e(),a("van-button",{staticClass:"theme-plain",attrs:{plain:"",size:"small",round:"",type:"primary"}},[t._v("查看成绩")])],1)]),a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{staticClass:"bg"}),a("Round")],1):t.flag?a("div",{staticClass:"article-share",on:{click:t.toDetails}},[a("media",{key:t.detailsId,attrs:{type:"card",item:t.article,stopClick:!0,isDetailsShow:t.textShow}}),t.article?a("div",{staticClass:"info-bar flex flex-align"},[a("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.article.create_time)))]),a("div",{staticClass:"author"},[t._v("来自:"+t._s(t.username))])]):t._e()],1):t._e()]):a("div",{staticClass:"cell"},[a("div",{staticClass:"share-cell flex flex-align"},[a("div",{staticClass:"details flex flex-align"},[t.detailsId&&t.detailsId>0?a("div",{staticClass:"info",on:{click:t.toDetails}},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"theme-color"},[t._v(t._s(t.item.post_id?t.item.title:"《"+t.item.title+"》")+" ")])]):t._e(),"book"==t.item.type?a("div",{staticClass:"punches theme-color",on:{click:t.toReadStat}},[t._v("\n                    "+t._s(t.item.sign_read_count>0?"累计"+t.item.sign_read_count+"本":"")+"\n                ")]):a("div",{staticClass:"include"},[t._v("\n                    收录\n                ")])])])])])},s=[],o=(a("a481"),a("cebc")),n=a("9993"),l=a("bec1"),r=a("591a"),c=a("f6ba"),m=a("d248"),d={name:"article-card",props:["item","detailsId","type","childId","cardStyle"],components:{Round:m["a"],media:c["a"]},computed:Object(o["a"])({},Object(r["c"])(["userDataState"]),{details:function(){return Object(l["c"])(this.item.details)?this.item.details.replace(/<[^>]+>/g,""):this.item.details}}),data:function(){return{article:{},username:"",flag:!1,textShow:!0}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if("post"==this.type){var e={params:{ajax:1,id:this.detailsId}};n["a"].get("/book/SchoolArticle/detail",e).then(function(e){1==e.data.status&&(t.flag=!0,t.article=e.data.data.post,1==e.data.data.post.template_id?t.textShow=!0:t.textShow=!1,t.username=e.data.data.post.user.username)})}},toDetails:function(){var t="book"==this.item.type?"book-details":"article";this.$emit("toDetails",{routeName:t,detailsId:this.detailsId})},toReadStat:function(){this.$router.push({name:"readStat",query:{id:this.childId}})},getTimeAgo:function(t){return Object(l["m"])(1e3*t)}}},u=d,h=(a("db12"),a("6bc7"),a("2877")),p=Object(h["a"])(u,i,s,!1,null,"47a3a470",null);e["a"]=p.exports},a0ae:function(t,e,a){"use strict";var i=a("de22"),s=a.n(i);s.a},a618:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"graphic-card"},[a("div",{staticClass:"container"},[a("div",{staticClass:"user-card flex flex-align"},["babyHome"==t.type?a("div",{staticClass:"avatar"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.avatar},on:{error:t.imgError}})]):a("div",{staticClass:"avatar",on:{click:function(e){t.item.user_id>0&&t.toBookZoom(t.item)}}},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar},on:{error:t.imgError}})]),a("div",{staticClass:"info"},[a("div",{staticClass:"name flex flex-align"},[a("span",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],class:[t.item.card_level>"0"?"vip-highlight":""]},[t._v(t._s(t.item.user.name))]),t.item.card_level?a("vip-level",{attrs:{animate:"1",level:t.item.card_level.level}}):t._e()],1),a("div",{staticClass:"titmeago flex flex-align"},[t._v("\n          "+t._s(t.getTimeAgo(t.item.create_time))+"\n          "),t.post&&0!=t.post.sign_days&&"阅读打卡"==t.item.tags?a("span",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"user-reading"},[t._v(t._s("坚持阅读"+t.post.sign_days+"天"))]):t._e(),a("span",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"teacher-reading"},[t._v(t._s((t.getTags[1]?t.getTags[1]:"")+(t.getTags[2]&&t.getTags[2]>0?" • 课堂阅读"+t.getTags[2]+"篇":"")))])])]),!t.item.isMe&&t.item.user_id>0&&"zoom"!=t.type?a("div",{staticClass:"follow"},[a("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))])],1):t._e(),t.moreBtn?a("div",{staticClass:"more",on:{click:function(e){return t.more(t.item)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()]),a("media",{key:t.$route.query.id,attrs:{item:t.item,type:"card",schoolName:t.schoolName,schoolId:t.schoolId}}),t.post&&(t.post.post_id>=0||t.post.tushu_id>=0)?a("div",{staticClass:"article-card"},[a("articleCard",{attrs:{item:t.post,childId:t.item.child_id,detailsId:t.post.post_id||t.post.tushu_id},on:{toDetails:t.toArticleShare}})],1):t._e(),a("div",{staticClass:"temp-type flex flex-align"},[a("div",{staticClass:"temp-list flex flex-align"},[t.item.from_page?a("van-tag",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-tag",attrs:{round:"",color:"#0084ff",size:"large"}},[a("div",{on:{click:t.toTeacherSchoolHome}},[t._v(t._s(t.schoolName))])]):t.item.user_school_id>0?a("van-tag",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-tag",attrs:{round:"",color:"#0084ff",size:"large"}},[a("div",{on:{click:function(e){return t.toSchoolHome(t.item)}}},[t._v(t._s(t.item.user_school_name))])]):t._e(),t.item.tags?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"cate theme-color",attrs:{size:"large",plain:""},on:{click:function(e){return t.toPopupHelp(t.item)}}},[t._v("\n          # "+t._s(t.getTags[0])+" "+t._s(t.item.banji_name?"来自:"+t.item.banji_name:"")+"\n        ")]):t._e()],1)]),5==t.$route.query.tid?a("div",{staticClass:"task"},[a("task-card")],1):t._e(),t.isSocialShow?a("div",{staticClass:"social flex flex-align"},[a("div",{staticClass:"share"},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "+t._s(t.item.views>1e3?"999+":"0"==t.item.views?"浏览":t.item.views)+"\n      ")]),a("div",{staticClass:"message",on:{click:t.messageShow}},[a("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "+t._s(t.item.reply_num>1e3?"999+":"0"==t.item.reply_num?"评论":t.item.reply_num)+"\n      ")]),a("div",{staticClass:"praise flex flex-align flex-justify",on:{click:function(e){return t.addPraise(t.item)}}},[t.item.isZan?a("i",{staticClass:"iconfont highlight rotateInDownLeft animated"},[t._v("")]):a("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n        "+t._s(t.item.zan_num>1e3?"999+":"0"==t.item.zan_num?"赞":t.item.zan_num)+"\n      ")])]):t._e()],1),a("van-popup",{staticClass:"comment-popup",attrs:{position:"top","get-container":"#app"},on:{close:function(e){return t.$refs.message.blur()}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("van-field",{ref:"message",staticClass:"message-field",attrs:{type:"textarea",placeholder:"给"+t.item.user.name+"评论:",autosize:{maxHeight:300,minHeight:100},size:"large",border:!1},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}},[a("div",{staticClass:"avatar mini-avatar",attrs:{slot:"left-icon"},slot:"left-icon"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar},on:{error:t.imgError}})])]),a("van-cell",[a("van-button",{staticClass:"send-btn theme-btn",attrs:{round:"",type:"primary",loading:t.isLoading},on:{click:t.submit}},[t._v("发布")])],1)],1)],1)},s=[],o=(a("7f7f"),a("28a5"),a("cebc")),n=a("9993"),l=a("0df1"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-card"},[a("van-cell",{staticClass:"card-cell",attrs:{"is-link":"","title-class":"tast-card-title",center:"",size:"large",value:"查看"}},[a("div",{staticClass:"task-cover",attrs:{slot:"icon"},slot:"icon"}),a("div",{staticClass:"tast-title",attrs:{slot:"title"},slot:"title"},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v("亲子时光，阅读相伴。")]),a("div",{staticClass:"complete"},[t._v("已完成")])])])],1)},c=[],m={name:"task-card",data:function(){return{}},methods:{}},d=m,u=(a("0909"),a("e617"),a("2877")),h=Object(u["a"])(d,r,c,!1,null,"34b2f6fd",null),p=h.exports,v=a("f6ba"),f=a("93c1"),_=a("bec1"),g=a("591a"),b={name:"graphic-card",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},avatar:{type:String,default:""},title:{type:String,default:""},moreBtn:{type:Boolean,default:!0},isSocialShow:{type:Boolean,default:!0}},components:{taskCard:p,vipLevel:l["a"],articleCard:f["a"],media:v["a"]},computed:Object(o["a"])({},Object(g["c"])(["userPointState","userDataState"]),{post:function(){var t;return this.item.extra&&(t=JSON.parse(this.item.extra)),t},fromData:function(){var t;if(this.item.from_page){var e=this.item.from_page.split(",");t={teacher_school_id:e[0],teacher_school_name:e[1]}}return t},schoolName:function(){var t;return this.item.from_page?t=this.fromData.teacher_school_name:this.item.user_school_id>0&&(t=this.item.user_school_name),t},schoolId:function(){var t;return this.item.from_page?t=this.fromData.teacher_school_id:this.item.user_school_id>0&&(t=this.item.user_school_id),t},getTags:function(){return this.item.tags?this.item.tags.split(","):""}}),data:function(){return{imgIndex:0,articleShow:!1,shareShow:!1,show:!1,message:"",isLoading:!1}},methods:{addPraise:function(t){t.isZan=!t.isZan,n["a"].get("/book/SchoolArticle/zan?ajax=1&id=".concat(this.item.post_id)).then(function(e){t.zan_num=e.data.data.like})},toArticle:function(t){this.$router.push({name:"article",query:{id:t.post_id,type:t.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId,point:"comments"}})},toArticleShare:function(t){this.$router.push({name:t.routeName,query:{id:t.detailsId}})},follow:function(t){this.$emit("follow",t)},toBookZoom:function(t){this.$router.push({name:"zoom",query:{id:t.user_id}})},toSchoolHome:function(t){t.user_school_id>0&&this.$router.push({name:"apps-school",query:{id:t.user_school_id,back:this.$route.name,backPageName:this.$route.meta.title}})},toTeacherSchoolHome:function(){this.$router.push({name:"apps-school",query:{id:this.fromData.teacher_school_id,back:this.$route.name,backPageName:this.$route.meta.title}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,page_id:this.$route.query.id,back:this.$route.name}})},getTimeAgo:function(t){return Object(_["m"])(1e3*t)},more:function(t){this.$emit("more",t)},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toPopupHelp:function(t){switch(t.tags){case"宝贝主页":this.$router.push({name:"popupHelp",query:{type:"baby"}});break;case"阅读打卡":this.$router.push({name:"popupHelp",query:{type:"read"}});break;default:this.$router.push({name:"class-home",query:{id:this.item.class_id,school_id:this.schoolId,school_name:this.schoolName,banji_id:this.item.class_id,banji_name:this.getTags[1]?this.getTags[1]:""}});break}},messageShow:function(){var t=this;this.show=!0,this.$nextTick(function(){t.$refs.message.focus()}),this.message=""},submit:function(){var t=this;if(this.message.length>0){this.isLoading=!0;var e={post_id:this.item.post_id,contents:this.message};n["a"].post("/book/SchoolArticleComment/edit?ajax=1",e).then(function(e){switch(t.isLoading=!1,e.data.status){case 1:t.$toast.success(e.data.info),t.show=!1,t.$refs.message.blur();break;default:t.$toast(e.data.info)}})}else this.show=!1,this.$refs.message.blur()}}},C=b,y=(a("4740"),Object(u["a"])(C,i,s,!1,null,"77c1fe2b",null));e["a"]=y.exports},abc1:function(t,e,a){},aef6:function(t,e,a){},bcd6:function(t,e,a){},d248:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"welt"},t._l(t.round,function(t,e){return a("div",{key:e,staticClass:"round",class:"round-"+e,style:{width:t.w,height:t.w}})}),0)},s=[],o={name:"round",data:function(){return{round:[{w:"300px"},{w:"100px"},{w:"50px"},{w:"200px"},{w:"60px"}]}}},n=o,l=(a("9274"),a("2877")),r=Object(l["a"])(n,i,s,!1,null,"2b981942",null);e["a"]=r.exports},db12:function(t,e,a){"use strict";var i=a("abc1"),s=a.n(i);s.a},de22:function(t,e,a){},e2c9:function(t,e,a){},e617:function(t,e,a){"use strict";var i=a("0f4c"),s=a.n(i);s.a},f6ba:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",class:"article"==t.$route.name?"article":"",attrs:{id:"media"},on:{click:t.toArticle}},["card"==t.type&&"0"==t.item.template_id?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.title))]):t._e(),t.item.details&&t.isDetailsShow?a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:"card"==t.type?2:0,expression:"type == 'card'?2:0",arg:"20"}],ref:"textContent",staticClass:"text",class:0==t.item.template_id?"content":"",domProps:{innerHTML:t._s(t.item.details)}}):t._e(),"1"==t.item.hasvideo?a("div",{staticClass:"media",class:"1"==t.item.hasvideo?"video-cover":""},t._l(t.item.photos,function(e,i){return a("div",{key:i,staticClass:"thumb"},[e&&"1"==e.is_video?a("div",{staticClass:"video-thumb"},["card"==t.type||t.isCommentShow?a("div",{staticClass:"player-card",class:["90"==e.rotate?"vertical":"",t.isCommentShow?"poster":""]},[t._m(0,!0),a("img",{attrs:{src:t.item.cover,alt:"视频封面"}}),a("van-tag",{staticClass:"duration",attrs:{size:"medium",color:"rgba(0,0,0,.5)"}},[t._v(t._s(t.getDuration(e.duration)))])],1):t.isCommentShow?t._e():a("div",{staticClass:"video-wrapper"},[a("video",{ref:"videoPlayer",refInFor:!0,attrs:{id:"video",controls:"controls",src:e.photo,poster:e.thumb,preload:"auto","x-webkit-airplay":"true",airplay:"allow","webkit-playsinline":"true","x5-playsinline":"",playsinline:"true"}})])]):t._e()])}),0):t._e(),"1"==t.item.template_id&&t.item.photos?a("div",{staticClass:"media img"},[a("div",{class:["card"==t.type?"layout-"+t.item.photos.length:""]},[a("van-row",{attrs:{gutter:4}},t._l(t.item.photos,function(e,i){return a("van-col",{key:i,attrs:{span:t.grid}},[e&&0==e.is_video&&0==e.is_audio?a("div",{staticClass:"img-grid",class:[1==t.item.photos.length&&e.height/e.width>1?"long":"",1==t.item.photos.length&&"details"==t.type?"alone":""]},[a("img",{staticClass:"img-preview",class:[e.height/e.width>2?"long":""],attrs:{src:e.thumb,large:e.photo,preview:"card"!=t.type&&e.post_id}}),e.height/e.width>2&&"card"==t.type&&i<1?a("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("长图")]):t._e()],1):t._e()])}),1)],1)]):t._e(),"0"==t.item.template_id&&"card"==t.type&&t.item.cover&&"1"!=t.item.hasvideo?a("div",{staticClass:"media img long-article-thumb"},[a("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover||t.item.photos[0].thumb}}),a("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("文章")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player"},[a("i",{staticClass:"iconfont"},[t._v("")])])}],o=(a("7f7f"),a("a481"),a("bec1")),n={name:"media",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},coverShow:{type:Boolean,default:!0},stopClick:{type:Boolean,default:!1},schoolName:{type:String,default:""},schoolId:{type:String,default:""},isDetailsShow:{type:Boolean,default:!0},isCommentShow:{type:Boolean,default:!1}},computed:{grid:function(){var t;return t=4==this.item.photos.length||2==this.item.photos.length?12:1==this.item.photos.length&&"details"==this.type?24:8,t}},data:function(){return{playing:!1}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},methods:{toArticle:function(){"card"!=this.type||this.stopClick||this.$router.push({name:"article",query:{id:this.item.post_id,type:this.item.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},getDuration:function(t){return Object(o["f"])(t)}}},l=n,r=(a("a0ae"),a("1170"),a("2877")),c=Object(r["a"])(l,i,s,!1,null,"1d14f574",null);e["a"]=c.exports}}]);