{"version":3,"sources":["webpack:///./src/components/pages/borrowList.vue?a5ae","webpack:///./src/components/pages/borrowList.vue?702a","webpack:///src/components/pages/borrowList.vue","webpack:///./src/components/pages/borrowList.vue?d6b7","webpack:///./src/components/pages/borrowList.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_borrowList_vue_vue_type_style_index_0_id_53e4be4a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_borrowList_vue_vue_type_style_index_0_id_53e4be4a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","$route","meta","left-text","left-arrow","color","line-width","line-height","sticky","swipeable","animated","border","on","change","onChangeTab","model","value","callback","$$v","tabIndex","expression","_l","list","index","key","refresh","onRefresh","loading","finished","finished-text","$store","state","slogan","load","onLoad","content","item","itemIndex","gutter","span","click","$event","toBookDetails","directives","name","rawName","thumb","arg","_v","_s","author","_e","addCollect","listening","staticRenderFns","borrowListvue_type_script_lang_js_","data","tab","type","page","methods","getReadList","getCollectList","getBrokenList","_this","params","is_return","api","get","then","res","status","count","datas","array","forEach","element","book","push","concat","length","_this2","_this3","_this4","img","hostMatch","match","p","pureTitle","replace","url","isRead","localStorage","getItem","tushu_id","location","href","setItem","$router","query","id","_this5","target_id","type_id","$forceUpdate","$set","is_collect","$toast","success","className","message","duration","pages_borrowListvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-99ee50c8.4b266ac4.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./borrowList.vue?vue&type=style&index=0&id=53e4be4a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./borrowList.vue?vue&type=style&index=0&id=53e4be4a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"borrow-list\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.$route.meta.title,\"left-text\":\"我的\",\"left-arrow\":\"\"}}),_c('van-tabs',{attrs:{\"color\":\"#0084ff\",\"line-width\":20,\"line-height\":4,\"sticky\":\"\",\"swipeable\":\"\",\"animated\":\"\",\"border\":false},on:{\"change\":_vm.onChangeTab},model:{value:(_vm.tabIndex),callback:function ($$v) {_vm.tabIndex=$$v},expression:\"tabIndex\"}},_vm._l((_vm.tab),function(list,index){return _c('van-tab',{key:index,attrs:{\"title\":list.title}},[_c('van-pull-refresh',{on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":_vm.$store.state.slogan},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},[(list.content.length)?_c('div',{staticClass:\"content\"},_vm._l((list.content),function(item,itemIndex){return _c('van-cell',{key:itemIndex},[_c('van-row',{attrs:{\"gutter\":\"10\"}},[_c('van-col',{attrs:{\"span\":\"7\"}},[_c('div',{staticClass:\"book-cover\",on:{\"click\":function($event){return _vm.toBookDetails(item)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.thumb(item.thumb)),expression:\"thumb(item.thumb)\"}],staticClass:\"lazy\"})])]),_c('van-col',{attrs:{\"span\":\"11\"}},[_c('div',{staticClass:\"book-info\",on:{\"click\":function($event){return _vm.toBookDetails(item)}}},[_c('div',{directives:[{name:\"line-clamp\",rawName:\"v-line-clamp:20\",value:(2),expression:\"2\",arg:\"20\"}],staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"attach\"},[(item.author)?_c('div',{directives:[{name:\"line-clamp\",rawName:\"v-line-clamp:20\",value:(1),expression:\"1\",arg:\"20\"}],staticClass:\"author\"},[_vm._v(\"作者：\"+_vm._s(item.author))]):_vm._e()])])]),_c('van-col',{attrs:{\"span\":\"6\"}},[_c('div',{staticClass:\"flex flex-align button\"},[_c('div',{staticClass:\"like\",on:{\"click\":function($event){return _vm.addCollect(item)}}},[(item.is_collect)?_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")]):_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")])]),_c('div',{staticClass:\"listening\",on:{\"click\":function($event){return _vm.listening(item)}}},[_c('i',{staticClass:\"iconfont\"},[_vm._v(\"\")])])])])],1)],1)}),1):_c('div',{staticClass:\"no-content\"},[_vm._v(\"\\n              还没有没有\"+_vm._s(list.title)+\"的书\\n            \")])])],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"borrow-list\">\r\n    <van-nav-bar :title=\"$route.meta.title\" left-text=\"我的\" left-arrow />\r\n    <van-tabs color='#0084ff' @change='onChangeTab' :line-width='20' :line-height='4' sticky swipeable animated v-model=\"tabIndex\" :border='false'>\r\n      <van-tab v-for=\"(list,index) in tab\" :title=\"list.title\" :key=\"index\">\r\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\r\n          <van-list v-model=\"loading\" :finished=\"finished\" :finished-text=\"$store.state.slogan\" @load=\"onLoad\">\r\n              <div class=\"content\" v-if='list.content.length'>\r\n                <van-cell v-for=\"(item,itemIndex) in list.content\" :key=\"itemIndex\">\r\n                  <van-row gutter=\"10\">\r\n                    <van-col span=\"7\">\r\n                      <div class=\"book-cover\" @click=\"toBookDetails(item)\">\r\n                        <img class=\"lazy\" v-lazy=\"thumb(item.thumb)\"/>\r\n                      </div>\r\n                    </van-col>\r\n                    <van-col span=\"11\">\r\n                      <div class=\"book-info\" @click=\"toBookDetails(item)\">\r\n                        <div class=\"title\" v-line-clamp:20=\"2\">{{item.title}}</div>\r\n                        <div class=\"attach\">\r\n                          <!-- <div class=\"location\" v-if='item.location'><i class=\"iconfont\">&#xe724;</i>{{item.location}}</div> -->\r\n                          <div class=\"author\" v-line-clamp:20=\"1\" v-if='item.author'>作者：{{item.author}}</div>\r\n                          <!-- <div class=\"pos-title\" v-if='item.pos_title'>书架：{{item.pos_title}}</div> -->\r\n                        </div>\r\n                      </div>\r\n                    </van-col>\r\n                    <van-col span=\"6\">\r\n                      <div class=\"flex flex-align button\">\r\n                        <div class=\"like\" @click=\"addCollect(item)\">\r\n                          <i class=\"iconfont\" v-if='item.is_collect'>&#xe668;</i>\r\n                          <i class=\"iconfont\" v-else>&#xe669;</i>\r\n                        </div>\r\n                        <div class=\"listening\" @click=\"listening(item)\">\r\n                          <i class=\"iconfont\">&#xe617;</i>\r\n                        </div>\r\n                      </div>\r\n                    </van-col>\r\n                  </van-row>\r\n                </van-cell>\r\n              </div>\r\n              <div class=\"no-content\" v-else>\r\n                还没有没有{{list.title}}的书\r\n              </div>\r\n          </van-list>\r\n      </van-pull-refresh>\r\n      </van-tab>\r\n    </van-tabs>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from './../lib/js/api'\r\n\r\nexport default {\r\n  name: 'borrow-list',\r\n  data() {\r\n    return {\r\n      tab: [{\r\n        title: '读过',\r\n        content: [],\r\n        type: '1'\r\n      }, {\r\n        title: '在读',\r\n        content: [],\r\n        type: '0'\r\n      }, {\r\n        title: '收藏',\r\n        content: [],\r\n        type: 'book'\r\n      }, {\r\n        title: '破损',\r\n        content: [],\r\n        type: 'damaged'\r\n      }],\r\n      loading: false,\r\n      finished: false,\r\n      page: 1,\r\n      tabIndex: 0\r\n    }\r\n  },\r\n  methods: {\r\n    onLoad() {\r\n      if (this.tabIndex < 2) {\r\n        this.getReadList()\r\n      }\r\n\r\n      if (this.tabIndex == 2) {\r\n        this.getCollectList()\r\n      }\r\n\r\n      if (this.tabIndex == 3) {\r\n        this.getBrokenList()\r\n      }\r\n    },\r\n    getReadList() {\r\n      let data = {\r\n        params:{\r\n          page:this.page,\r\n          is_return:this.tab[this.tabIndex].type\r\n        }\r\n      }\r\n\r\n      return axios.get('/book/MemberBorrow/getList',data).then(res => {\r\n        if(res.data.status == 1){\r\n          if (res.data.count > 0) {\r\n              let datas = []\r\n              let array = res.data.data\r\n              array.forEach(element => {\r\n                if(element.book != null){\r\n                  datas.push( element.book)\r\n                }\r\n              })\r\n\r\n            if (this.page == 1) {\r\n              this.tab[this.tabIndex].content = datas\r\n            } else {\r\n              this.tab[this.tabIndex].content = this.tab[this.tabIndex].content.concat(datas)\r\n            }\r\n            this.page++\r\n            this.loading = false\r\n            if (this.tab[this.tabIndex].content.length >= res.data.count) {\r\n              this.finished = true\r\n            }\r\n          }\r\n        }else{\r\n          this.loading = false\r\n          this.finished = true\r\n          this.tab[this.tabIndex].content = []\r\n        }\r\n      })\r\n    },\r\n    getCollectList() {\r\n      let data = {\r\n        params:{\r\n          page:this.page,\r\n          type:'book'\r\n        }\r\n      }\r\n\r\n      return axios.get('/book/SchoolArticleCollect/getList',data).then(res => {\r\n        if(res.data.status == 1){\r\n          if (res.data.count > 0) {\r\n              let datas = []\r\n              let array = res.data.data\r\n              array.forEach(element => {\r\n                if(element.book != null){\r\n                  datas.push( element.book)\r\n                }\r\n              })\r\n\r\n            if (this.page == 1) {\r\n              this.tab[this.tabIndex].content = datas\r\n            } else {\r\n              this.tab[this.tabIndex].content = this.tab[this.tabIndex].content.concat(datas)\r\n            }\r\n            this.page++\r\n            this.loading = false\r\n            if (this.tab[this.tabIndex].content.length >= res.data.count) {\r\n              this.finished = true\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    getBrokenList() {\r\n      return axios.get('/book/MemberBookBroken/getList').then(res => {\r\n        if(res.data.status == 1){\r\n          if (res.data.count > 0) {\r\n              let datas = []\r\n              let array = res.data.data\r\n              array.forEach(element => {\r\n                if(element.book != null){\r\n                  datas.push( element.book)\r\n                }\r\n              })\r\n\r\n            if (this.page == 1) {\r\n              this.tab[this.tabIndex].content = datas\r\n            } else {\r\n              this.tab[this.tabIndex].content = this.tab[this.tabIndex].content.concat(datas)\r\n            }\r\n            this.page++\r\n            this.loading = false\r\n            if (this.tab[this.tabIndex].content.length >= res.data.count) {\r\n              this.finished = true\r\n            }\r\n          }\r\n        }\r\n\r\n      })\r\n    },\r\n    onChangeTab(index) {\r\n      this.tabIndex = index\r\n      this.page = 1\r\n      this.onLoad()\r\n    },\r\n    onRefresh() {\r\n      this.page = 1\r\n\r\n      if (this.tabIndex < 2) {\r\n        this.getReadList().then(res => {\r\n          this.loading = false\r\n          this.finished = false\r\n        })\r\n      }\r\n\r\n      if (this.tabIndex == 2) {\r\n        this.getCollectList().then(res => {\r\n          this.loading = false\r\n          this.finished = false\r\n        })\r\n      }\r\n\r\n      if (this.tabIndex == 3) {\r\n        this.getBrokenList().then(res => {\r\n          this.loading = false\r\n          this.finished = false\r\n        })\r\n      }\r\n    },\r\n    thumb(img){\r\n      if(img){\r\n        let hostMatch = img.match(/https?:\\/\\/(.+?)\\//)\r\n        if (hostMatch) {\r\n          return `/book/api/remotePic?url=${img}`\r\n        } else {\r\n          return img\r\n        }\r\n      }\r\n    },\r\n    listening(item) {\r\n      let p = /（.+?）/\r\n      let pureTitle = item.title.replace(p, '')\r\n      let url = `https://m.ximalaya.com/search/${pureTitle}`\r\n      let isRead = localStorage.getItem('bookRead_' + item.tushu_id)\r\n      if (!isRead) {\r\n        axios.get('/book/story/updateRead').then(res => {\r\n          localStorage.setItem('bookRead_' + item.tushu_id, true)\r\n          location.href = url\r\n        })\r\n      } else {\r\n        location.href = url\r\n      }\r\n    },\r\n    toBookDetails(item) {\r\n      this.$router.push({\r\n        name: 'book-details',\r\n        query: {\r\n          id: item.tushu_id\r\n        }\r\n      })\r\n    },\r\n    addCollect(item) {\r\n      let data = {\r\n          params:{\r\n            target_id: item.tushu_id, \r\n            type_id: 5\r\n          }\r\n      }\r\n\r\n      axios.get('/book/member/add_favorite',data).then(res => {\r\n        if (res.data.status == 1) {\r\n          this.$forceUpdate() //强制刷新数据\r\n          this.$set(item,'is_collect',!item.is_collect) //使用$set 来修改\r\n          if(item.is_collect){\r\n            this.$toast.success({\r\n              className: 'like-icon toast-icon',\r\n              message: '喜欢',\r\n              duration: '800',\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.no-content {\r\n  height: 12.5rem /* 200/16 */;\r\n  text-align: center;\r\n  line-height: 12.5rem /* 200/16 */;\r\n  background: #fff;\r\n  color: #c0c4cc;\r\n}\r\n\r\n.title {\r\n  margin-bottom: 0.3125rem /* 5/16 */;\r\n  font-weight: 500;\r\n}\r\n\r\n.attach {\r\n  color: #606266;\r\n}\r\n\r\n.book-cover img{\r\n  display: block;\r\n  margin: 0 auto;\r\n}\r\n\r\n.button{\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n  transform: translate3d(0, -50%, 0);\r\n}\r\n\r\n.like{\r\n  margin-right: 1.25rem /* 20/16 */;\r\n}\r\n\r\n.listening i.iconfont,\r\n.like .iconfont{\r\n  font-size: 1.625rem /* 26/16 */;\r\n  color: #f02b2b;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./borrowList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./borrowList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./borrowList.vue?vue&type=template&id=53e4be4a&scoped=true&\"\nimport script from \"./borrowList.vue?vue&type=script&lang=js&\"\nexport * from \"./borrowList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./borrowList.vue?vue&type=style&index=0&id=53e4be4a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"53e4be4a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}