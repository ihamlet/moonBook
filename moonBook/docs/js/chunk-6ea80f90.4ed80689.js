(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ea80f90"],{"57c9":function(t,i,a){"use strict";var e=a("f21f"),s=a.n(e);s.a},"6faa":function(t,i,a){"use strict";var e=a("b3d6"),s=a.n(e);s.a},b3d6:function(t,i,a){},ccdd:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return t.audioList.length?a("div",{staticClass:"audio-player"},[a("audio",{ref:"audio",attrs:{src:t.audioList[t.audioIndex].photos[0].photo,controls:"controls",hidden:""},on:{pause:t.onPause,play:t.onPlay,ended:t.onEnded,timeupdate:t.onTimeupdate,loadedmetadata:t.onLoadedmetadata}}),a("div",{staticClass:"audio-container"},[a("div",{staticClass:"disc",class:t.audio.playing?"turn":""},[a("img",{attrs:{src:t.audioList[t.audioIndex].cover}})]),a("div",{staticClass:"square"},[a("img",{staticClass:"cover",attrs:{src:t.audioList[t.audioIndex].cover}}),a("div",{staticClass:"bg-black"})]),a("div",{staticClass:"control"},[a("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.audioList[t.audioIndex].title))]),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"bar",on:{touchstart:t.handleTouchStart}},[a("div",{staticClass:"slider-fill",style:"width:"+t.sliderTime+"%"}),a("div",{staticClass:"slider-thumb",style:"left:"+t.sliderTime+"%"})]),a("div",{staticClass:"time flex flex-align"},[a("div",{staticClass:"start-time"},[t._v(t._s(t._f("formatSecond")(t.audio.currentTime)))]),a("div",{staticClass:"end-time"},[t._v(t._s(t._f("formatSecond")(t.audio.maxTime)))])])]),a("div",{staticClass:"btn-list flex flex-align"},[a("div",{staticClass:"btn"},[a("div",{staticClass:"palyer-list-btn",on:{click:function(i){t.show=!0}}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{staticClass:"btn"},[a("div",{staticClass:"player-btn",on:{click:t.startPlayOrPause}},[t.audio.playing?a("i",{staticClass:"iconfont"},[t._v("")]):a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{staticClass:"btn"},[a("div",{staticClass:"next-btn",on:{click:t.next}},[a("i",{staticClass:"iconfont"},[t._v("")])])])])]),a("div",{staticClass:"down",on:{click:t.toScrollAetails}},[a("i",{staticClass:"iconfont"},[t._v("")]),a("span",{staticClass:"introduction"},[t._v("查看简介")])])]),a("div",{staticClass:"container"},[a("van-nav-bar",{attrs:{border:!1,title:"故事简介"}}),a("div",{ref:"details",staticClass:"details"},[t._v("\n      "+t._s(t.audioList[t.audioIndex].details)+"\n    ")])],1),a("div",{staticClass:"slogan"},[t._v("\n      "+t._s(t.$store.state.slogan)+"\n  ")]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(i){t.show=i},expression:"show"}},[a("div",{staticClass:"list scroll-y"},t._l(t.audioList,function(i,e){return a("div",{key:e,staticClass:"item",on:{click:function(a){return t.selectItem(i,e)}}},[a("van-cell",{attrs:{"title-class":e==t.audioIndex?"active":"",title:i.title,"is-link":"",center:""}},[e==t.audioIndex?a("div",{staticClass:"icon",attrs:{slot:"icon"},slot:"icon"},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])],1)}),0)])],1):t._e()},s=[],n=a("cebc"),o=a("9993"),c=a("bec1"),d=a("591a"),u={name:"audio-player",computed:Object(n["a"])({},Object(d["e"])("openWX",["ready"])),data:function(){return{count:0,audioList:[],audioIndex:0,show:!1,sliderTime:0,audio:{playing:!1,currentTime:0,maxTime:0,minTime:0,step:.1}}},created:function(){this.fetchData()},watch:{$router:"fetchData",ready:function(){this.play()}},methods:{fetchData:function(){var t=this;this.$toast.loading();var i={params:{tid:57,hasaudio:1}};o["a"].get("/book/SchoolArticle/getList",i).then(function(i){switch(i.data.status){case 1:t.audioList=i.data.data,t.count=i.data.count,t.$toast.clear(),t.$nextTick(function(){t.play()});break}})},selectItem:function(t,i){var a=this;this.audioIndex=i,this.show=!1,this.$nextTick(function(){a.play()})},next:function(){var t=this;this.audioIndex<this.count?this.audioIndex++:this.audioIndex=0,this.$nextTick(function(){t.play()})},startPlayOrPause:function(){return this.audio.playing?this.pause():this.play()},play:function(){this.$refs.audio.play()},pause:function(){this.$refs.audio.pause()},onPause:function(){this.audio.playing=!1},onPlay:function(){this.audio.playing=!0},onEnded:function(){this.next()},onLoadedmetadata:function(t){this.audio.maxTime=parseInt(t.target.duration)},onTimeupdate:function(t){this.audio.currentTime=t.target.currentTime,this.sliderTime=parseInt(this.audio.currentTime/this.audio.maxTime*100)},formatProcessToolTip:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=parseInt(this.audio.maxTime/100*t),"进度条: "+Object(c["k"])(t)},handleTouchStart:function(t){this.setValue(t.touches[0]),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchup",this.handleTouchEnd),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("touchcancel",this.handleTouchEnd)},handleTouchMove:function(t){this.setValue(t.changedTouches[0])},handleTouchEnd:function(t){this.setValue(t.changedTouches[0]),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchup",this.handleTouchEnd),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("touchcancel",this.handleTouchEnd)},setValue:function(t){var i=this.$el,a=this.audio,e=a.maxTime,s=a.minTime,n=a.step,o=(t.clientX-i.getBoundingClientRect().left)/i.offsetWidth*(e-s);o=Math.round(o/n)*n+s,o=parseFloat(o.toFixed(5)),o>e?o=e:o<s&&(o=s),this.$refs.audio.currentTime=o},changeCurrentTime:function(t){this.$refs.audio.currentTime=parseInt(t/100*this.audio.maxTime)},toScrollAetails:function(){this.$refs.details.scrollIntoView({behavior:"smooth"})}},filters:{transPlayPause:function(t){return t?"暂停":"播放"},formatSecond:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(c["k"])(t)}}},l=u,r=(a("57c9"),a("6faa"),a("2877")),h=Object(r["a"])(l,e,s,!1,null,"2ae36afa",null);i["default"]=h.exports},f21f:function(t,i,a){}}]);
//# sourceMappingURL=chunk-6ea80f90.4ed80689.js.map