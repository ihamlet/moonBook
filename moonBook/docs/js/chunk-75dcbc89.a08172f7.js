(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75dcbc89"],{"0485":function(t,e,s){},"1d2b":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.videoList.length>0?s("div",{staticClass:"video"},[s("van-cell",{attrs:{"title-class":"cell-title",title:t.title}},[s("div",{staticClass:"icon",attrs:{slot:"icon"},slot:"icon"},[s("i",{staticClass:"iconfont"},[t._v("")])])]),s("div",{staticClass:"scroll-x"},[s("div",{staticClass:"video-list flex"},t._l(t.videoList,function(e,a){return s("div",{key:a,staticClass:"video-item scroll-item",on:{click:function(s){return t.toVideoPage(e)}}},[s("div",{staticClass:"video"},[s("div",{staticClass:"video-cover"},[s("div",[s("img",{attrs:{src:e.cover,alt:"视频封面-"+a}})]),e.post_id==t.$route.query.id?s("div",{staticClass:"playing flex flex-align"},[s("i",{staticClass:"iconfont"},[t._v("")]),s("span",{staticClass:"text"},[t._v("正在播放")])]):t._e()]),s("div",{staticClass:"video-info"},[s("div",{staticClass:"user-info flex flex-align"},[s("div",{staticClass:"user-data flex flex-align"},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:e.user.avatar}})]),s("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v("\n                  "+t._s(e.user.name)+"\n                ")])]),s("div",{staticClass:"views"},[t._v("\n                "+t._s(e.views)+"次播放\n              ")])])])])])}),0)])],1):t._e()},i=[],n=(s("7f7f"),s("9993")),o={name:"Video",props:["title","type"],data:function(){return{videoList:[]}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this,e={};e=this.$route.query.user_id?{params:{portal_name:"首页",sort:"post",user_id:this.$route.query.user_id,hasvideo:1}}:{params:{portal_name:"首页",sort:"tuijian",hasvideo:1}},n["a"].get("/book/SchoolArticle/getList?sort=post",e).then(function(e){t.videoList=e.data.data})},toVideoPage:function(t){var e={};e=this.$route.query.user_id?{id:t.post_id,user_id:this.$route.query.user_id,back:this.$route.name}:{id:t.post_id,user_id:t.user_id,back:this.$route.name},this.$router.push({name:"video-page",query:e}),this.$emit("refresh")}}},c=o,r=(s("db60"),s("5a45"),s("2877")),l=Object(r["a"])(c,a,i,!1,null,"36a7c0dd",null);e["a"]=l.exports},4316:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hackReset?s("div",{staticClass:"video-page page-padding"},[s("div",{ref:"videoDom",staticClass:"video-box"},[s("div",{class:t.fixedHeaderBar?"":"fixed",style:!t.fixedHeaderBar&&t.styleObject,attrs:{id:"video"}})]),s("div",{staticClass:"container"},[s("div",{staticClass:"module"},[s("van-cell-group",[s("van-cell",{attrs:{center:"",value:t.item.views+"次播放","title-class":"video-user-info"},on:{click:function(e){return t.toZoom(t.item)}}},[s("div",{staticClass:"user-info-bar",attrs:{slot:"title"},slot:"title"},[t.item.user?s("div",{staticClass:"info flex flex-align"},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar}})]),s("div",{staticClass:"promulgator flex flex-align"},[s("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v(t._s(t.item.user.username||""))]),s("div",{staticClass:"upload-date"},[t._v(" "+t._s(t.timeAgo(t.item.create_time))+" ")])])]):t._e()])])],1)],1),s("div",{staticClass:"module"},[s("video-list",{attrs:{title:"相关视频",type:"video"},on:{refresh:t.refresh}})],1),s("div",[s("comment",{attrs:{item:t.item,include:"include"}})],1)])]):t._e()},i=[],n=(s("7f7f"),s("ac6a"),s("cebc")),o=s("9993"),c=s("bec1"),r=s("1d2b"),l=s("c629"),u=s("591a"),d={name:"ckplayer",components:{videoList:r["a"],comment:l["a"]},computed:Object(n["a"])({},Object(u["e"])("openWX",["ready"])),data:function(){return{videoObject:{container:"#video",variable:"player",loaded:"loadedHandler",loop:!1,config:"",debug:!0,drag:"start",seek:0,video:[],autoplay:!0},styleObject:{position:"fixed",top:"0",zIndex:10},item:"",fixedHeaderBar:!0,domTop:0,hackReset:!0,scrollTop:0}},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},mounted:function(){this.getDomTop(),window.addEventListener("scroll",this.handleScroll)},created:function(){var t=this;this.fetchData().then(function(){t.player})},updated:function(){this.wxShare()},watch:{$router:"fetchData",ready:function(){this.wxShare()}},methods:Object(n["a"])({},Object(u["b"])("openWX",["share"]),{wxShare:function(){var t={item:this.item,success:function(){}};this.share(t)},fetchData:function(){var t=this;return o["a"].get("/book/SchoolArticle/detail?ajax=1&id=".concat(this.$route.query.id)).then(function(e){if(1==e.data.status){t.item=e.data.data.post;var s=e.data.data.post.photos,a=[];s.forEach(function(e){1==e.is_video&&(a.push([e.photo]),t.videoObject.poster=e.thumb)}),t.videoObject.video=a}})},handleScroll:function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.scrollTop=t,this.domTop<this.scrollTop?this.fixedHeaderBar=!1:this.fixedHeaderBar=!0},getDomTop:function(){this.domTop=this.$refs.videoDom.offsetTop},onClickLeft:function(){this.$route.query.back?this.$router.push({name:this.$route.query.back,query:{id:this.$route.query.back_id}}):this.$router.push({name:"apps-find"})},timeAgo:function(t){return Object(c["m"])(1e3*t)},toZoom:function(t){this.$router.push({name:"zoom",query:{id:t.user_id,back:this.$route.name,post_id:t.post_id,user_id:t.user_id}})},refresh:function(){location.reload()}})},m=d,h=(s("6ba9"),s("6fa3"),s("2877")),v=Object(h["a"])(m,a,i,!1,null,"4dac76f4",null);e["default"]=v.exports},"5a45":function(t,e,s){"use strict";var a=s("9eb5"),i=s.n(a);i.a},"6ba9":function(t,e,s){"use strict";var a=s("bc41"),i=s.n(a);i.a},"6fa3":function(t,e,s){"use strict";var a=s("b5f2"),i=s.n(a);i.a},"75e0":function(t,e,s){"use strict";s.d(e,"h",function(){return i}),s.d(e,"c",function(){return n}),s.d(e,"k",function(){return c}),s.d(e,"e",function(){return u}),s.d(e,"f",function(){return d}),s.d(e,"i",function(){return m}),s.d(e,"j",function(){return h}),s.d(e,"b",function(){return o}),s.d(e,"a",function(){return r}),s.d(e,"d",function(){return l}),s.d(e,"g",function(){return v});var a=s("cebc"),i=["说一点什么吧，他都能听得到","随心而起，有感而发","千头万绪,落笔汇成评论一句","听说，爱评论的人粉丝多","从小陪伴孩子读绘本，日积月累","陪伴就是给孩子最好的爱","愿你像颗种子，勇敢地冲破泥沙","心似海，不敌诗的咏叹"],n=["👍 棒棒哒","🙆 声音很棒","💪 加油哦","👪 很温馨","👏 非常棒","😊 很可爱哦","👑 继续努力","😄 向你学习","🌞 积少成多","📚 推荐这本书","🏆 很精彩"],o=["再接再厉","向你学习","坚持下去","太厉害了","难能可贵"],c=["聪明在于勤奋，天才在于积累","腹有诗书气自华，读书万卷始通神","少成若天性，习惯如自然","锲而不舍，金石可镂","敏而好学，不耻下问","读书之法，在循序渐进，熟读而精思"],r=["阅读是关系孩子素养发展的重要因素","阅读能够提高孩子的语言技能","亲子阅读是传递亲情的桥梁","阅读可以促进儿童认知能力"],l="<p>一起关爱孩子们的成长，我们可以从阅读做起。阅亮书架，将认真与执着地做着这件事情，同时也吸引了无数有识之士加入其中，和我们一起播撒着幸福的种子。</p><p>在路上，我们满怀期待，愿与您同行......</p>",u=[{name:"好的开始",number:1,type:"punch"},{name:"小试牛刀",number:21,type:"punch"},{name:"坚持不懈",number:50,type:"punch"},{name:"渐入佳境",number:100,type:"punch"},{name:"扬帆远航",number:198,type:"punch"},{name:"持之以恒",number:365,type:"punch"},{name:"学富五车",number:660,type:"punch"},{name:"阅读之星",number:1e3,type:"punch"}],d=[{name:"好的开始",number:1,type:"read"},{name:"小试牛刀",number:20,type:"read"},{name:"坚持不懈",number:60,type:"read"},{name:"渐入佳境",number:120,type:"read"},{name:"扬帆远航",number:300,type:"read"},{name:"持之以恒",number:700,type:"read"},{name:"学富五车",number:1e3,type:"read"},{name:"阅亮之星",number:1500,type:"read"}];function m(t){var e=[];return u.forEach(function(s,i){t>=s.number&&e.push(Object(a["a"])({},s,{level:i+1})),0==t&&e.push(Object(a["a"])({},s,{level:0}))}),e}function h(t){var e=[];return d.forEach(function(s,i){t>=s.number&&e.push(Object(a["a"])({},s,{level:i+1})),0==t&&e.push(Object(a["a"])({},s,{level:0}))}),e}var v=["","","","","","","","","",""]},"9eb5":function(t,e,s){},ab85:function(t,e,s){},b5f2:function(t,e,s){},bc41:function(t,e,s){},c629:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.flag?s("div",{ref:"comment",staticClass:"comment-list",attrs:{id:"comment"}},[s("van-nav-bar",{key:t.$route.query.id,attrs:{border:!1,zIndex:0}},[s("div",{staticClass:"zan",attrs:{slot:"right"},slot:"right"},[t._v("赞 "+t._s(t.item.zan_num))]),s("div",{staticClass:"comment",attrs:{slot:"left"},slot:"left"},[t._v(t._s(t.listLength)+" 评论")])]),0==t.listLength?s("div",{staticClass:"no-centent"},[s("div",{staticClass:"prompt",on:{click:function(e){return t.showField()}}},[t._v("暂无评论,点击抢沙发")])]):t._e(),s("div",{staticClass:"container"},[s("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e,a){return s("van-cell",{key:a},[s("div",{staticClass:"user-card flex flex-align"},[s("div",{staticClass:"user-info flex flex-align"},[s("div",{staticClass:"avatar",on:{click:function(s){return t.toZoom(e)}}},[s("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:e.avatar}})]),s("div",{staticClass:"user-data"},[s("span",{staticClass:"user-name"},[t._v(t._s(e.username))])])]),s("div",{staticClass:"zan flex flex-align",on:{click:function(s){return t.zan(e)}}},[e.isZan?s("i",{staticClass:"iconfont highlight rotateInDownLeft animated"},[t._v("")]):s("i",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"num"},[t._v(t._s(e.zan_count))])])]),s("div",{staticClass:"contents"},[t._v("\n          "+t._s(e.contents)+"\n        ")]),s("div",{staticClass:"reply"},[0!=e.replyList.length?s("div",{staticClass:"reply-content"},t._l(e.replyList,function(a,i){return s("div",{key:i,staticClass:"list"},[s("div",{staticClass:"item"},[s("span",{staticClass:"reply-title"},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n                  "+t._s(a.username)+"回复"+t._s(e.username)+"\n                ")]),s("span",{staticClass:"reply-contents"},[t._v("\n                  "+t._s(a.contents)+"\n                ")])])])}),0):t._e(),e.quote?s("div",{staticClass:"reply-content"},[s("div",{staticClass:"list"},[s("div",{staticClass:"item"},[s("span",{staticClass:"reply-title"},[s("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n                  "+t._s(e.quote.username)+"的评论\n                ")]),s("span",{staticClass:"reply-contents"},[t._v("\n                  "+t._s(e.quote.contents)+"\n                ")])])])]):t._e(),s("div",{staticClass:"comment-bar flex flex-align"},[s("div",{staticClass:"date"},[t._v(t._s(t.timeAgo(e.create_time)))]),s("div",{staticClass:"theme-color",on:{click:function(s){return t.showField(e,"reply")}}},[s("van-tag",{attrs:{round:"",size:"large",type:"primary"}},[t._v(t._s(e.replyList.length?e.replyList.length:"")+"回复")])],1)])])])}),1)],1),s("div",{staticClass:"comment"},[s("div",{staticClass:"footer-bar"},[s("div",{staticClass:"bar-padding flex flex-align"},[s("div",{staticClass:"input-box flex flex-align",on:{click:function(e){return t.showField()}}},[s("div",{staticClass:"input-box-avatar avatar"},[s("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.userDataState.avatar},on:{error:t.imgError}})]),s("span",[t._v("写评论")])]),s("div",{staticClass:"btn-icon flex flex-align"},[s("div",{staticClass:"btn",on:{click:t.toScroll}},[t.listLength>0?s("van-tag",{staticClass:"num-tag",attrs:{round:"",type:"danger"}},[t._v(t._s(t.listLength>1e3?"999+":t.listLength))]):t._e(),s("i",{staticClass:"iconfont"},[t._v("")])],1),s("div",{staticClass:"btn",on:{click:function(e){return t.addPraise(t.item)}}},[t.item.zan_num>0?s("van-tag",{staticClass:"num-tag",attrs:{round:"",type:"danger"}},[t._v(t._s(t.item.zan_num>1e3?"999+":t.item.zan_num))]):t._e(),t.item.isZan?s("i",{staticClass:"iconfont highlight rotateInDownLeft animated"},[t._v("")]):s("i",{staticClass:"iconfont"},[t._v("")])],1),"include"!=t.include?s("div",{staticClass:"btn",on:{click:function(e){return t.addCollect(t.item)}}},[t.item.collect_num>0?s("van-tag",{staticClass:"num-tag",attrs:{round:"",type:"danger"}},[t._v(t._s(t.item.collect_num>1e3?"999+":t.item.collect_num))]):t._e(),t.item.isShoucang?s("i",{staticClass:"iconfont star highlight swing animated"},[t._v("")]):s("i",{staticClass:"iconfont"},[t._v(" ")])],1):s("div",{staticClass:"btn",on:{click:t.isShare}},[s("i",{staticClass:"iconfont"},[t._v("")])])])])]),s("van-popup",{staticClass:"comment-popup",attrs:{"overlay-class":"bg-opacity",position:"top","get-container":"#app"},on:{close:function(e){return t.$refs.field.blur()}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},["include"!=t.include&&t.score?s("div",{staticClass:"score flex-column"},[s("div",{staticClass:"score-title"},[t._v("评分")]),s("van-rate",{staticClass:"score-rate",attrs:{size:25,count:5,"void-color":"#ceefe8"},model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})],1):t._e(),s("div",{staticClass:"comment-content flex"},[s("div",{staticClass:"field-box"},[s("van-field",{ref:"field",staticClass:"comment-field",attrs:{border:!1,size:"large",minHeight:50,type:"textarea",placeholder:t.placeholder,rows:"1",autosize:""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),s("div",{staticClass:"submit-btn theme-color"},[s("van-button",{staticClass:"theme-btn",attrs:{loading:t.isLoading,size:"large",type:"primary",square:""},on:{click:t.submit}},[t._v("发 布")])],1)]),1==t.item.template_id?s("div",{staticClass:"comment-tag scroll-x"},t._l(t.commentTag,function(e,a){return s("div",{key:a,staticClass:"scroll-item jackInTheBox animated",style:{animationDelay:100*a+"ms"},on:{click:function(s){return t.biuCommentTag(e)}}},[s("van-button",{staticClass:"tag-item",attrs:{round:"",type:"default"}},[t._v(t._s(e))])],1)}),0):t._e()])],1),s("van-popup",{staticClass:"share-popup",attrs:{"get-container":"#app"},model:{value:t.shareShow,callback:function(e){t.shareShow=e},expression:"shareShow"}},[s("div",{staticClass:"share-img"},[s("img",{attrs:{src:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/img/shareWord.png"}})])])],1):t._e()},i=[],n=(s("7f7f"),s("55dd"),s("cebc")),o=s("591a"),c=s("9993"),r=s("bec1"),l=s("75e0"),u={name:"comment",props:["item","include","type","postId","isCommentShow"],computed:Object(n["a"])({},Object(o["c"])(["userToken","userDataState"]),{placeholder:function(){return Object(r["g"])(l["h"],1)[0]},commentTag:function(){return l["c"].sort(function(){return Math.random()-.5}),l["c"]}}),data:function(){return{star:3,list:[],toTopAndComment:!1,listLength:"",loading:!1,finished:!1,page:1,commentId:"",show:!1,isLoading:!1,message:"",shareShow:!1,score:!1,flag:!1}},watch:{postId:function(){var t=this;this.flag=!0,"comments"==this.$route.query.point&&this.$nextTick(function(){t.$refs.comment.scrollIntoView()})},show:function(t){this.$emit("showComment",t)}},methods:{onLoad:function(){var t=this,e={params:{post_id:this.postId,page:this.page,limit:10,sort:"new"}};return c["a"].get("/book/SchoolArticleComment/getList",e).then(function(e){if(1==e.data.status){t.listLength=e.data.count;var s=e.data.data;1==t.page?t.list=s:t.list=t.list.concat(s),t.loading=!1,t.page++,t.list.length>=e.data.count&&(t.finished=!0)}})},biuCommentTag:function(t){this.message=t,this.submit()},submit:function(){var t=this;this.isLoading=!0;var e={post_id:this.item.post_id,contents:this.message,tags:this.item.ad_label};this.commentId?e.reply_comment_id=this.commentId:e.star=2*this.star,this.message.length?c["a"].post("/book/SchoolArticleComment/edit?ajax=1",e).then(function(e){1==e.data.status?(t.show=!1,t.page=1,t.onLoad(),t.$toast.success(e.data.info),t.isLoading=!1,t.$refs.comment.scrollIntoView()):t.$toast.fail(e.data.info)}):this.$toast("请填写评论内容")},addPraise:function(t){var e=this;if("preview"!=this.$route.query.type){t.isZan=!t.isZan;var s={params:{ajax:1,id:this.item.post_id}};c["a"].get("/book/SchoolArticle/zan",s).then(function(s){1==s.data.status&&(t.isZan?t.zan_num++:t.zan_num--,"1"==s.data.data.like&&e.$toast.success({className:"zan-icon toast-icon"}))})}},addCollect:function(t){var e=this;t.isShoucang=!t.isShoucang;var s={params:{post_id:this.postId}};c["a"].get("/book/SchoolArticleCollect/add",s).then(function(s){1==s.data.status&&(t.isShoucang?t.collect_num++:t.collect_num--,t.isShoucang||e.$toast.success({className:"shoucang-icon toast-icon"}))})},showField:function(t,e){var s=this;"preview"!=this.$route.query.type&&(this.isLoading=!1,this.message="",t?(this.prompt="回复：".concat(t.username),this.commentId=t.comment_id):(this.commentId="",this.prompt="写评论"),this.show=!0,this.$nextTick(function(){s.$refs.field.focus()}),this.score="reply"!=e)},timeAgo:function(t){return Object(r["m"])(1e3*t)},toScroll:function(){this.toTopAndComment=!this.toTopAndComment,this.toTopAndComment?this.$refs.comment.scrollIntoView({behavior:"smooth"}):window.scrollTo(0,0)},toZoom:function(t){this.$router.push({name:"zoom",query:{id:t.user_id,back:this.$route.name,back_id:this.$route.query.id||this.$route.query.back_id}})},isShare:function(){"preview"!=this.$route.query.type&&(this.shareShow=!0)},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},zan:function(t){t.isZan=!t.isZan;var e={params:{comment_id:t.comment_id}};c["a"].get("/book/SchoolArticleComment/zan",e).then(function(e){switch(e.data.status){case 1:t.zan_count=e.data.data.zan_count;break}})}}},d=u,m=(s("d872"),s("2877")),h=Object(m["a"])(d,a,i,!1,null,"511710f7",null);e["a"]=h.exports},d872:function(t,e,s){"use strict";var a=s("0485"),i=s.n(a);i.a},db60:function(t,e,s){"use strict";var a=s("ab85"),i=s.n(a);i.a}}]);