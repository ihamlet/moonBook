(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-940f9ed0"],{"0df1":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-level"},[1==t.level?i("i",{staticClass:"iconfont",class:[1==t.level?"icon-1":""]},[t._v("")]):t._e(),2==t.level?i("i",{staticClass:"iconfont",class:[2==t.level?"icon-2":""]},[t._v("")]):t._e(),3==t.level?i("i",{staticClass:"iconfont",class:[3==t.level?"icon-3":""]},[t._v("")]):t._e(),4==t.level?i("i",{staticClass:"iconfont",class:[4==t.level?"icon-4":""]},[t._v("")]):t._e(),1==t.animate?i("div",{staticClass:"highlight"}):t._e()])},s=[],o={name:"vip-level",props:["level","animate"]},n=o,c=(i("16b4"),i("2877")),l=Object(c["a"])(n,a,s,!1,null,"4b9ff89e",null);e["a"]=l.exports},1170:function(t,e,i){"use strict";var a=i("5af2"),s=i.n(a);s.a},"16b4":function(t,e,i){"use strict";var a=i("bcd6"),s=i.n(a);s.a},"350e":function(t,e,i){},4090:function(t,e,i){},"5af2":function(t,e,i){},"5b8d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-card"},[t.item.user?i("div",{ref:"userCard",staticClass:"flex flex-align"},[i("div",{staticClass:"avatar",on:{click:t.toZoom}},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar,alt:t.item.user.username},on:{error:t.imgError}})]),i("div",{staticClass:"flex flex-align handle-card"},[i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[i("div",{staticClass:"flex flex-align"},[i("span",[t._v(t._s(t.item.user.username))]),t.item.card_level?i("vip-level",{attrs:{animate:!0,level:t.item.card_level.level}}):t._e()],1)]),i("div",{staticClass:"article-info flex flex-align"},[i("div",{staticClass:"read-num"},[t._v("阅读 "+t._s(t.item.views))]),i("div",{staticClass:"origin"},[t._v("•")]),i("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.item.create_time)))]),t.schoolName||t.item.school?i("div",{staticClass:"origin"},[t._v("•")]):t._e(),t.schoolName?i("div",{staticClass:"school-info",on:{click:t.toSchool}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.schoolName))])]):t.item.school?i("div",{staticClass:"school-info",on:{click:t.toSchool}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.item.school.title))])]):t._e()])]),3!=t.item.isSubscribe?i("div",{staticClass:"follow-btn"},[i("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))])],1):t._e()])]):t._e()])},s=[],o=(i("7f7f"),i("9993")),n=i("0df1"),c=i("bec1"),l={name:"userCard",props:["item","schoolName"],components:{vipLevel:n["a"]},methods:{follow:function(t){var e=this;"preview"!=this.$route.query.type&&(t.isSubscribe=!t.isSubscribe,o["a"].get("/book/MemberFollow/subscribe?user_id=".concat(t.user_id)).then(function(t){e.$toast.success(t.data.msg)}))},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toZoom:function(){this.$router.push({name:"zoom",query:{id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},toSchool:function(){this.$router.push({name:"apps-school",query:{id:this.$route.query.school_id}})},getTimeAgo:function(t){return Object(c["l"])(1e3*t)}}},r=l,d=(i("7ce4"),i("2877")),m=Object(d["a"])(r,a,s,!1,null,"7709d618",null);e["a"]=m.exports},"7ce4":function(t,e,i){"use strict";var a=i("b8ce"),s=i.n(a);s.a},"85d7":function(t,e,i){"use strict";var a=i("4090"),s=i.n(a);s.a},a22e:function(t,e,i){"use strict";var a=i("bf77"),s=i.n(a);s.a},b8ce:function(t,e,i){},bcd6:function(t,e,i){},be6b:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-row",{attrs:{gutter:"20"}},[i("van-col",{attrs:{span:"7"}},[i("div",{staticClass:"book-cover"},[i("img",{attrs:{src:t.thumb(t.item.book_photo)},on:{error:t.imgError}}),t.item.is_read>0?i("div",{staticClass:"is-read"},[i("i",{staticClass:"iconfont"},[t._v("")])]):t._e()])]),i("van-col",{attrs:{span:"11"}},[i("div",{staticClass:"book-info",on:{click:t.toBookDetails}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.book_title))]),i("div",{staticClass:"attach"},[t.item.pos_name?i("div",{staticClass:"pos-title"},[t._v("书位："+t._s(t.item.pos_name))]):t._e()]),"guide"==t.type?i("div",{staticClass:"borrow"},[t._v("\n        借阅："+t._s(t.item.book_borrow_count)+" 次\n      ")]):t._e()])]),i("van-col",{attrs:{span:"6"}},[i("div",{staticClass:"button"},[i("div",{staticClass:"flex flex-align"},[i("div",{staticClass:"like",on:{click:t.addCollect}},[t.itemCollect?i("i",{staticClass:"iconfont"},[t._v("")]):i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"listening",on:{click:t.listening}},[i("i",{staticClass:"iconfont"},[t._v("")])])]),"在读"==t.type?i("div",{staticClass:"abrasion"},[i("van-button",{staticClass:"theme-btn",attrs:{plain:"",size:"small",type:"primary",round:""},on:{click:t.toBorrow}},[t._v("磨损")])],1):t._e()])])],1)},s=[],o=(i("a481"),i("4917"),i("9993")),n={name:"bookCard",props:["item","type","isCollect"],data:function(){return{itemCollect:!1}},watch:{isCollect:function(t){this.itemCollect=1==t}},methods:{thumb:function(t){if(t){var e=t.match(/https?:\/\/(.+?)\//);return e?"/book/api/remotePic?url=".concat(t):t}},listening:function(){var t=this,e=/（.+?）/,i=this.item.book_title.replace(e,""),a="https://m.ximalaya.com/search/".concat(i),s=localStorage.getItem("bookRead_"+this.item.book_id);s?location.href=a:o["a"].get("/book/story/updateRead").then(function(e){localStorage.setItem("bookRead_"+t.item.book_id,!0),location.href=a})},toBookDetails:function(){this.$router.push({name:"book-details",query:{id:this.item.book_id}})},addCollect:function(){var t=this,e={params:{target_id:this.item.book_id,type_id:5}};o["a"].get("/book/member/add_favorite",e).then(function(e){1==e.data.status&&(t.itemCollect=!t.itemCollect,t.itemCollect&&t.$toast.success({className:"like-icon toast-icon",duration:"800"}))})},toBorrow:function(){this.item.borrow_id&&(location.href="/book/MemberBookBroken/add/borrow_id/".concat(this.item.borrow_id,"?back_url=").concat(encodeURIComponent(location.href)))},imgError:function(t){t.target.src="https://assets-moonbook.oss-cn-beijing.aliyuncs.com/img/no-cover.jpg"}}},c=n,l=(i("f9b6"),i("2877")),r=Object(l["a"])(c,a,s,!1,null,"f522cdfc",null);e["a"]=r.exports},bf77:function(t,e,i){},d360:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"read-guide"},[i("div",{staticClass:"banner",on:{click:t.toBookShelf}},[i("i",{staticClass:"iconfont"},[t._v("")]),i("div",{staticClass:"bg-black flex flex-justify"},[i("van-button",{staticClass:"theme-plain",attrs:{plain:"",round:"",type:"primary"}},[t._v("前往书架")])],1)]),i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[i("div",{staticClass:"tab"},[i("van-tabs",{attrs:{color:"#0084ff","line-width":20,"line-height":4,swipeable:"",animated:"",border:!1},on:{change:t.onChangeTab}},t._l(t.tab,function(e,a){return i("van-tab",{key:a,attrs:{title:e.title}},[e.article?i("div",{staticClass:"article"},[i("div",{staticClass:"content"},[i("div",{staticClass:"article-title"},[t._v(t._s(e.articleTitle))]),i("media",{attrs:{item:e.article}})],1)]):t._e()])}),1)],1)]),i("div",{staticClass:"slogan"},[t._v("\n    "+t._s(t.$store.state.slogan)+"\n  ")])],1)},s=[],o=(i("a481"),i("9993")),n=i("be6b"),c=i("f6ba"),l={name:"read-guide",components:{bookCard:n["a"],media:c["a"]},data:function(){return{loading:!1,finished:!1,page:1,tab:[{title:"小班",content:[],article:"",articleTitle:""},{title:"中班",content:[],article:"",articleTitle:""},{title:"大班",content:[],article:"",articleTitle:""}],tabIndex:0}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){this.onRefresh()},onLoad:function(){var t=this,e={params:{page:this.page,sort:"random",keyword:this.tab[this.tabIndex].title}};return o["a"].get("/book/SchoolShelfBook/getList",e).then(function(e){var i={params:{ajax:1,fr:"official",title:"".concat(t.tab[t.tabIndex].title,"推荐书单导读")}};switch(o["a"].get("/book/SchoolArticle/detail",i).then(function(e){switch(e.data.status){case 1:t.tab[t.tabIndex].article=e.data.data.post,t.tab[t.tabIndex].articleTitle=e.data.data.post.title;break}}),e.data.status){case 1:1==t.page?t.tab[t.tabIndex].content=e.data.data:t.tab[t.tabIndex].content=t.tab[t.tabIndex].content.concat(e.data.data),t.loading=!1,t.page++,t.tab[t.tabIndex].content.length>=e.data.count&&(t.finished=!0);break;case 0:t.page=1,t.loading=!1,t.finished=!0,t.tab[t.tabIndex].content=[];break}})},toBookShelf:function(){this.$router.push({name:"bookshelf"})},onRefresh:function(){var t=this;this.page=1,this.onLoad().then(function(e){t.loading=!1,t.finished=!1})},onChangeTab:function(t){this.tabIndex=t,this.page=1,this.tab[this.tabIndex].content=[],this.onRefresh()}}},r=l,d=(i("85d7"),i("a22e"),i("2877")),m=Object(d["a"])(r,a,s,!1,null,"5bc54a83",null);e["default"]=m.exports},d6ea:function(t,e,i){},e7a0:function(t,e,i){"use strict";var a=i("d6ea"),s=i.n(a);s.a},f6ba:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",class:"article"==t.$route.name?"article":"",attrs:{id:"media"},on:{click:t.toArticle}},["card"==t.type&&"0"==t.item.template_id?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.title))]):t._e(),t.item.details&&t.isDetailsShow?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:"card"==t.type?2:0,expression:"type == 'card'?2:0",arg:"20"}],ref:"textContent",staticClass:"text",class:0==t.item.template_id?"content":"",domProps:{innerHTML:t._s(t.item.details)}}):t._e(),"1"==t.item.hasvideo?i("div",{staticClass:"media",class:"1"==t.item.hasvideo?"video-cover":""},t._l(t.item.photos,function(e,a){return i("div",{key:a,staticClass:"thumb"},[e&&"1"==e.is_video?i("div",{staticClass:"video-thumb"},["card"==t.type||t.isCommentShow?i("div",{staticClass:"player-card",class:["90"==e.rotate?"vertical":"",t.isCommentShow?"poster":""]},[t._m(0,!0),i("img",{attrs:{src:t.item.cover,alt:"视频封面"}}),i("van-tag",{staticClass:"duration",attrs:{size:"medium",color:"rgba(0,0,0,.5)"}},[t._v(t._s(t.getDuration(e.duration)))])],1):t.isCommentShow?t._e():i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videoPlayer",refInFor:!0,attrs:{id:"video",controls:"controls",src:e.photo,poster:e.thumb,preload:"auto","x-webkit-airplay":"true",airplay:"allow","webkit-playsinline":"true","x5-playsinline":"",playsinline:"true"}})])]):t._e()])}),0):t._e(),"1"==t.item.template_id&&t.item.photos?i("div",{staticClass:"media img"},[i("div",{class:["card"==t.type?"layout-"+t.item.photos.length:""]},[i("van-row",{attrs:{gutter:4}},t._l(t.item.photos,function(e,a){return i("van-col",{key:a,attrs:{span:t.grid}},[e&&0==e.is_video&&0==e.is_audio?i("div",{staticClass:"img-grid",class:[1==t.item.photos.length&&e.height/e.width>1?"long":"",1==t.item.photos.length&&"details"==t.type?"alone":""]},[i("img",{staticClass:"img-preview",class:[e.height/e.width>2?"long":""],attrs:{src:e.thumb,large:e.photo,preview:"card"!=t.type&&e.post_id}}),e.height/e.width>2&&"card"==t.type&&a<1?i("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("长图")]):t._e()],1):t._e()])}),1)],1)]):t._e(),"0"==t.item.template_id&&"card"==t.type&&t.item.cover&&"1"!=t.item.hasvideo?i("div",{staticClass:"media img long-article-thumb"},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover||t.item.photos[0].thumb}}),i("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("文章")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player"},[i("i",{staticClass:"iconfont"},[t._v("")])])}],o=(i("7f7f"),i("a481"),i("5b8d")),n=i("bec1"),c=(i("fed1"),{name:"media",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},coverShow:{type:Boolean,default:!0},stopClick:{type:Boolean,default:!1},schoolName:{type:String,default:""},schoolId:{type:String,default:""},isDetailsShow:{type:Boolean,default:!0},isCommentShow:{type:Boolean,default:!1}},components:{userCard:o["a"]},computed:{grid:function(){var t;return t=4==this.item.photos.length||2==this.item.photos.length?12:1==this.item.photos.length&&"details"==this.type?24:8,t}},data:function(){navigator.userAgent;return{playing:!1}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},methods:{toArticle:function(){"card"!=this.type||this.stopClick||this.$router.push({name:"article",query:{id:this.item.post_id,type:this.item.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},getDuration:function(t){return Object(n["f"])(t)}}}),l=c,r=(i("e7a0"),i("1170"),i("2877")),d=Object(r["a"])(l,a,s,!1,null,"4504817b",null);e["a"]=d.exports},f9b6:function(t,e,i){"use strict";var a=i("350e"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-940f9ed0.c7ea0051.js.map