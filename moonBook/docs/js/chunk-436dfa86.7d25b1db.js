(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-436dfa86"],{"0df1":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vip-level"},[1==t.level?i("i",{staticClass:"iconfont",class:[1==t.level?"icon-1":""]},[t._v("")]):t._e(),2==t.level?i("i",{staticClass:"iconfont",class:[2==t.level?"icon-2":""]},[t._v("")]):t._e(),3==t.level?i("i",{staticClass:"iconfont",class:[3==t.level?"icon-3":""]},[t._v("")]):t._e(),4==t.level?i("i",{staticClass:"iconfont",class:[4==t.level?"icon-4":""]},[t._v("")]):t._e(),1==t.animate?i("div",{staticClass:"highlight"}):t._e()])},a=[],n={name:"vip-level",props:["level","animate"]},o=n,c=(i("16b4"),i("2877")),l=Object(c["a"])(o,s,a,!1,null,"4b9ff89e",null);e["a"]=l.exports},1170:function(t,e,i){"use strict";var s=i("5af2"),a=i.n(s);a.a},"15a1":function(t,e,i){},"16b4":function(t,e,i){"use strict";var s=i("bcd6"),a=i.n(s);a.a},"2ddd":function(t,e,i){},"51dc":function(t,e,i){},5902:function(t,e,i){},"5af2":function(t,e,i){},"6bc7":function(t,e,i){"use strict";var s=i("15a1"),a=i.n(s);a.a},7341:function(t,e,i){"use strict";var s=i("2ddd"),a=i.n(s);a.a},"74f6":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.hackReset?i("div",{staticClass:"article"},[0==t.item.template_id&&t.item.cover?i("div",{staticClass:"cover"},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover}})]):t._e(),i("div",{staticClass:"page-container"},[i("van-nav-bar",{key:t.$route.query.id,class:t.item.cover&&0==t.item.template_id&&!t.themeBarSearch?"theme-nav":"",attrs:{border:!1,fixed:"",zIndex:100}},[i("div",{staticClass:"head-bar-title",attrs:{slot:"title"},slot:"title"},[i("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t.themeBarSearch?i("div",{key:"2",staticClass:"head-bar-title-conent flex flex-align flex-justify",on:{click:t.toZoom}},[t.item.user?i("div",{staticClass:"avatar"},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar,alt:t.item.user.username},on:{error:t.imgError}})]):t._e(),t.item.user?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v(t._s(t.item.user.username))]):t._e(),t.item.card_level?i("vip-level",{attrs:{animate:"1",level:t.item.card_level.level}}):t._e()],1):i("div",{key:"1",staticClass:"head-bar-title-conent"},[t._v("\n            "+t._s("preview"==t.$route.query.type?"预览":t.$route.meta.title)+"\n          ")])])],1),3!=t.item.isSubscribe?i("div",{staticClass:"head-bar-right",attrs:{slot:"right"},slot:"right"},[i("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t.themeBarSearch?i("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))]):t._e()],1)],1):t._e()]),i("div",{staticClass:"container",class:0==t.item.template_id&&t.item.cover?"noTop":""},[i("div",{staticClass:"module-user-card page-padding"},["0"!=t.item.template_id?i("userCard",{attrs:{item:t.item,schoolName:t.$route.query.school_name,schoolId:t.$route.query.school_id}}):t._e()],1),i("div",{staticClass:"module"},[i("article-content",{key:t.$route.query.id,attrs:{item:t.item,isCommentShow:t.isCommentShow},on:{onScrollDomShow:t.onScrollDomShow}}),t.post?i("div",{staticClass:"article-card"},[i("van-cell",[i("articleCard",{key:t.$route.query.id,attrs:{cardStyle:"article",type:t.postType,childId:t.item.child_id,item:t.post,detailsId:t.post.post_id||t.post.tushu_id},on:{toDetails:t.toArticle}})],1)],1):t._e(),i("articleOperation",{ref:"articleOperation",attrs:{item:t.item}})],1),i("div",{ref:"commentDom",staticClass:"comment"},[i("comment",{key:t.$route.query.id,attrs:{item:t.item,include:"include",postId:t.item.post_id},on:{showComment:t.onClickisShowComment,giftShow:function(e){t.$refs.articleOperation.giftShow=!0}}})],1)])],1),t.homeBack?i("div",{staticClass:"back-home bounceInRight animated",on:{click:function(e){return t.$router.push({name:"home"})}}},[i("i",{staticClass:"iconfont"},[t._v("")])]):t._e()]):t._e()},a=[],n=(i("a481"),i("6762"),i("7f7f"),i("cebc")),o=i("9993"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-operation"},[i("div",{staticClass:"btn-warp flex flex-align"},[i("div",{staticClass:"flex-btn"},[i("van-button",{staticClass:"tuijian",attrs:{plain:"",round:"",size:"normal",type:"default",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/icon/tj.png"},on:{click:t.recommend}},[t._v(" 推荐")])],1),t.isBtnShow?i("div",{staticClass:"flex-btn"},[i("van-button",{staticClass:"shoulu",attrs:{plain:"",round:"",size:"normal",type:"default",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/icon/fx.png"},on:{click:t.selectChildren}},[t._v("收录")])],1):t._e(),i("div",{staticClass:"flex-btn"},[i("van-button",{staticClass:"shoulu",attrs:{plain:"",round:"",size:"normal",type:"default",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/icon/jinbi.png"},on:{click:function(e){t.giftShow=!0}}},[t._v("打赏")])],1)]),i("van-popup",{attrs:{position:"bottom","get-container":"#app"},model:{value:t.childShow,callback:function(e){t.childShow=e},expression:"childShow"}},[i("van-picker",{attrs:{"show-toolbar":"","visible-item-count":4,columns:t.children,"value-key":"name",title:"收录到宝贝"},on:{change:t.onChange,confirm:t.selectChild,cancel:function(e){t.childShow=!1}}})],1),i("van-popup",{staticClass:"page-popup-layer",attrs:{position:"bottom","get-container":"#app"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("topic-list",{attrs:{type:"share",topicList:t.topicList},on:{close:function(e){t.show=!1},select:t.selectTag,confirm:t.selectConfirm}})],1),i("van-popup",{staticClass:"gift-wrap-popup",attrs:{position:"bottom","get-container":"#app","lock-scroll":!1,overlay:!1},model:{value:t.giftShow,callback:function(e){t.giftShow=e},expression:"giftShow"}},[i("giftList",{ref:"giftList",on:{close:function(e){t.giftShow=!1},toInvest:t.toInvest}})],1),i("van-action-sheet",{attrs:{actions:t.manageActions,"cancel-text":"取消","get-container":"#app"},on:{select:t.onRecommendSelect},model:{value:t.actionsheetShow,callback:function(e){t.actionsheetShow=e},expression:"actionsheetShow"}})],1)},l=[],r=i("ae3a"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gift-list"},[i("div",{staticClass:"header-bar"},[i("div",{staticClass:"head-title"},[t._v("\n            礼物\n        ")]),i("div",{staticClass:"close",on:{click:function(e){return t.$emit("close")}}},[i("i",{staticClass:"iconfont"},[t._v("")])])]),i("div",{staticClass:"gift-container"},[i("van-swipe",{attrs:{"indicator-color":"#FFEB3B"}},t._l(t.list,function(e,s){return i("van-swipe-item",{key:s},[i("div",{staticClass:"swipe-container"},[i("van-row",t._l(e,function(e,s){return i("van-col",{key:s,attrs:{span:"8"}},[i("div",{staticClass:"gift-box flipInY animated",style:{animationDelay:30*s+"ms"},on:{click:function(i){return t.sendGift(e)}}},[i("div",{staticClass:"gift-img"},[i("img",{attrs:{src:e.icon}})]),i("div",{staticClass:"gift-name"},[t._v("\n                                    "+t._s(e.name)+"\n                                ")]),i("div",{staticClass:"amount"},[t._v("\n                                    "+t._s(e.amount>0?e.amount+"金币":"免费")+" \n                                ")])])])}),1)],1)])}),1),i("div",{staticClass:"footer-bar flex"},[i("div",{staticClass:"bar-wrap flex flex-align"},[i("img",{staticClass:"coin-icon",attrs:{src:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/icon/jinbi.png"}}),i("span",{staticClass:"coin"},[t._v(t._s(t.coin))])]),i("div",{staticClass:"recharge flex flex-align",on:{click:function(e){return t.$emit("toInvest")}}},[t._v("\n                充值 "),i("i",{staticClass:"iconfont"},[t._v("")])])])],1),i("transition",{attrs:{"enter-active-class":"animated "+t.setAnIn,"leave-active-class":"animated "+t.setAnOut}},[t.giftImg?i("img",{staticClass:"gift-dynamic",attrs:{src:t.giftImg}}):t._e()])],1)},m=[],d=i("bec1"),h=i("a459"),p={name:"giftList",computed:{list:function(){return Object(d["h"])(this.giftList,9)}},data:function(){return{giftList:h["a"],coin:"2000",giftImg:"",timer:null,anIn:["rollIn","bounceIn","flip","lightSpeedIn","zoomInDown"],anOut:["rollOut","bounceOutDown","zommOutDown","fadeOutDown","flipOutY"],setAnIn:"",setAnOut:""}},beforeDestroy:function(){clearInterval(this.timer),this.timer=null},methods:{sendGift:function(t){var e=this;this.giftImg=t.icon,this.setAnIn=Object(d["f"])(this.anIn,1),this.setAnOut=Object(d["f"])(this.anOut,1),this.timer=setTimeout(function(){e.giftImg=""},2e3)}}},v=p,f=(i("7341"),i("2877")),g=Object(f["a"])(v,u,m,!1,null,"5d16da08",null),b=g.exports,w=i("591a"),_=i("77e0"),y={name:"article-operation",mixins:[_["d"]],props:["item"],components:{topicList:r["a"],giftList:b},computed:Object(n["a"])({},Object(w["c"])(["managerState","userDataState"]),{isBtnShow:function(){var t=!0;return"zoom"!=this.$route.query.back&&"baby-home"!=this.$route.query.back||(t=!1),t}}),data:function(){return{actionsheetShow:!1,topicList:[],cateId:"",children:[],childId:"",show:!1,childShow:!1,giftShow:!1}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if(this.userDataState.user_id){var e={params:{sort:"old",user_id:this.userDataState.user_id}};o["a"].get("/book/baby/getList",e).then(function(e){1==e.data.status&&e.data.data.length&&(t.children=e.data.data,t.childId=e.data.data[0].id)})}else this.$toast("获取用户信息失败");var i={params:{portal_name:"宝贝主页"}};o["a"].get("/book/schoolArticleCate/getList",i).then(function(e){200==e.status&&(t.topicList=e.data,t.cateId=e.data[0].cate_id)})},onChange:function(t,e){this.childId=e.id},selectChild:function(){this.childShow=!1,this.show=!0},selectTag:function(t){this.cateId=t.cate_id},selectConfirm:function(){this.$router.push({name:"graphic",query:Object(n["a"])({},this.$route.query,{post_id:this.$route.query.id})}),this.show=!1},recommend:function(){var t=this;if(this.managerState.length)this.actionsheetShow=!0;else{var e={title:"",message:"",routeName:"",query:""};switch("0"){case this.userDataState.school_id:e.title="请加入学校",e.message="加入学校，及时了解学校动态",e.routeName="edit-school",e.query={type:"register"};break;case this.userDataState.banji_id:e.title="请加入班级",e.message="加入班级，及时了解班级动态",e.routeName="edit-class",e.query={school_name:this.userDataState.school_name,school_id:this.userDataState.school_id,name:this.userDataState.child_name,type:"register"};break}this.$dialog.confirm({title:e.title,message:e.message,cancelButtonText:"稍后",confirmButtonText:"加入"}).then(function(){t.$router.push({name:e.routeName,query:e.query})}).catch(function(){})}},selectChildren:function(){var t=this;this.children.length?this.childShow=!0:this.$dialog.confirm({title:"请添加宝贝",message:"添加宝贝，掌握孩子阅读数据，亲子阅读邀请你来参加",cancelButtonText:"稍后",confirmButtonText:"添加"}).then(function(){t.$router.push({name:"edit-child",query:{type:"add"}}),localStorage.removeItem("childInfo")}).catch(function(){})},toInvest:function(){this.giftShow=!1,this.$router.push({name:"Invest",query:Object(n["a"])({},this.$route.query)})}}},C=y,k=(i("83cb"),Object(f["a"])(C,c,l,!1,null,"5be8fbba",null)),S=k.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-content",class:["screenshot"==t.type?"img-content":"",0!=t.item.template_id?"flex flex-align":""]},[0==t.item.template_id?i("div",{staticClass:"article-header"},[i("div",{staticClass:"title"},[t._v(t._s(t.item.title))]),i("div",{ref:"domHeight",staticClass:"userCard"},[i("userCard",{attrs:{item:t.item}})],1)]):t._e(),i("article",[i("div",{staticClass:"main"},[i("div",{staticClass:"media-content"},[i("media",{key:t.$route.query.id,attrs:{item:t.item,type:"details",isCommentShow:t.isCommentShow}})],1)])])])},j=[],$=i("f6ba"),I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-card"},[t.item.user?i("div",{ref:"userCard",staticClass:"flex flex-align"},[i("div",{staticClass:"avatar",on:{click:t.toZoom}},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.user.avatar,alt:t.item.user.username},on:{error:t.imgError}})]),i("div",{staticClass:"flex flex-align handle-card"},[i("div",{staticClass:"info"},[i("div",{staticClass:"name"},[i("div",{staticClass:"flex flex-align"},[i("span",[t._v(t._s(t.item.user.username))]),t.item.card_level?i("vip-level",{attrs:{animate:!0,level:t.item.card_level.level}}):t._e()],1)]),i("div",{staticClass:"article-info flex flex-align"},[i("div",{staticClass:"read-num"},[t._v("阅读 "+t._s(t.item.views))]),i("div",{staticClass:"origin"},[t._v("•")]),i("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.item.create_time)))]),t.schoolName||t.item.school?i("div",{staticClass:"origin"},[t._v("•")]):t._e(),t.schoolName?i("div",{staticClass:"school-info",on:{click:t.toSchool}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.schoolName))])]):t.item.school?i("div",{staticClass:"school-info",on:{click:t.toSchool}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school-title theme-color"},[t._v(t._s(t.item.school.title))])]):t._e()])]),3!=t.item.isSubscribe?i("div",{staticClass:"follow-btn"},[i("van-button",{staticClass:"theme-btn",attrs:{size:"small",plain:!!t.item.isSubscribe,type:"primary",round:""},on:{click:function(e){return t.follow(t.item)}}},[t._v(t._s(t.item.isSubscribe?"已关注":"关注"))])],1):t._e()])]):t._e()])},O=[],D=i("0df1"),q={name:"userCard",props:["item","schoolName"],components:{vipLevel:D["a"]},methods:{follow:function(t){var e=this;"preview"!=this.$route.query.type&&(t.isSubscribe=!t.isSubscribe,o["a"].get("/book/MemberFollow/subscribe?user_id=".concat(t.user_id)).then(function(t){e.$toast.success(t.data.msg)}))},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toZoom:function(){this.$router.push({name:"zoom",query:{id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},toSchool:function(){this.$router.push({name:"apps-school",query:{id:this.$route.query.school_id}})},getTimeAgo:function(t){return Object(d["l"])(1e3*t)}}},N=q,L=(i("960b"),Object(f["a"])(N,I,O,!1,null,"e2537a7c",null)),B=L.exports,T={name:"article-content",props:["item","type","isCommentShow"],mixins:[_["i"]],components:{media:$["a"],userCard:B}},A=T,R=(i("d050"),Object(f["a"])(A,x,j,!1,null,"636331f6",null)),E=R.exports,z=i("93c1"),X=i("c629"),W={name:"detailsArticle",components:{comment:X["a"],vipLevel:D["a"],userCard:B,articleContent:E,articleCard:z["a"],articleOperation:S},computed:Object(n["a"])({},Object(w["e"])(["slogan","logo"]),Object(w["e"])("openWX",["ready"]),Object(w["c"])(["userDataState"]),{post:function(){var t;return t=this.item.extra?JSON.parse(this.item.extra):"",t},postType:function(){var t;return t=this.item.extra?JSON.parse(this.item.extra).type:"",t}}),data:function(){return{themeBarSearch:!1,imageShow:!1,headBar:!1,imgIndex:"",qrImage:"",item:{photos:[]},hackReset:!0,isCommentShow:!1,homeBack:!1}},beforeRouteEnter:function(t,e,i){i(function(t){"Invest"==e.name&&(t.$refs.articleOperation.giftShow=!0),null==e.name&&(t.homeBack=!0)})},beforeRouteLeave:function(t,e,i){var s=["home","apps-find","apps-school","zoom"];s.includes(t.name)?t.meta.keepAlive=!0:t.meta.keepAlive=!1,this.$refs.articleOperation.giftShow?(this.$refs.articleOperation.giftShow=!1,i(!1)):i()},created:function(){this.fetchData()},updated:function(){this.wxShare()},watch:{$router:"fetchData",ready:function(){this.wxShare()}},methods:Object(n["a"])({},Object(w["b"])("openWX",["share"]),{wxShare:function(){var t={item:this.item,success:function(){}};this.share(t)},fetchData:function(){var t=this;this.$toast.loading();var e={params:{ajax:1,id:this.$route.query.id||this.$route.query.back_id}};o["a"].get("/book/SchoolArticle/detail",e).then(function(e){1==e.data.status&&(t.$toast.clear(),t.item=e.data.data.post)})},onScrollDomShow:function(t){this.themeBarSearch=t},imgError:function(t){t.target.src="https://wx.qlogo.cn/mmopen/ajNVdqHZLLBGT5R0spIjic7Pobf19Uw0qc07mwPLicXILrafUXYkhtMTZ0WialrHiadXDKibJsRTux0WvmNuDyYRWDw/0"},toZoom:function(){this.$router.push({name:"zoom",query:{id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},follow:function(t){var e=this;t.isSubscribe=!t.isSubscribe;var i={params:{user_id:t.user_id}};o["a"].get("/book/MemberFollow/subscribe",i).then(function(t){e.$toast.success(t.data.msg)})},toArticle:function(t){var e=this;this.hackReset=!1,this.$router.replace({name:t.routeName,query:Object(n["a"])({},this.$route.query,{id:this.post.post_id})}),this.$nextTick(function(){e.hackReset=!0,e.fetchData()})},onClickisShowComment:function(t){this.isCommentShow=t}})},Z=W,P=(i("e210"),Object(f["a"])(Z,s,a,!1,null,"28ae1226",null));e["default"]=P.exports},"83cb":function(t,e,i){"use strict";var s=i("fc9b"),a=i.n(s);a.a},9274:function(t,e,i){"use strict";var s=i("5902"),a=i.n(s);a.a},"93c1":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-card"},["article"==t.cardStyle?i("div",{staticClass:"grade-card"},["book"==t.item.type?i("div",{staticClass:"type-book flipInX animated",on:{click:t.toReadStat}},[i("div",{staticClass:"content"},[i("div",{staticClass:"book-sign"},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"book-name"},[t._v("本次打卡 "+t._s(0==t.item.tushu_id?"":"《"+t.item.title+"》"))]),i("div",{staticClass:"flex flex-align"},[t.item.sign_days?i("div",{staticClass:"item-data"},[i("div",{staticClass:"sign-title"},[t._v("打卡天数")]),i("div",{staticClass:"number"},[t._v(t._s(t.item.sign_days))])]):t._e(),t.item.sign_read_count?i("div",{staticClass:"item-data"},[i("div",{staticClass:"sign-title"},[t._v("打卡本数")]),i("div",{staticClass:"number"},[t._v(t._s(t.item.sign_read_count))])]):t._e(),i("van-button",{staticClass:"theme-plain",attrs:{plain:"",size:"small",round:"",type:"primary"}},[t._v("查看成绩")])],1)]),i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"bg"}),i("Round")],1):t.flag?i("div",{staticClass:"article-share",on:{click:t.toDetails}},[i("media",{key:t.detailsId,attrs:{type:"card",item:t.article,stopClick:!0,isDetailsShow:t.textShow}}),t.article?i("div",{staticClass:"info-bar flex flex-align"},[i("div",{staticClass:"date"},[t._v(t._s(t.getTimeAgo(t.article.create_time)))]),i("div",{staticClass:"author"},[t._v("来自:"+t._s(t.username))])]):t._e()],1):t._e()]):i("div",{staticClass:"cell"},[i("div",{staticClass:"share-cell flex flex-align"},[i("div",{staticClass:"details flex flex-align"},[t.detailsId&&t.detailsId>0?i("div",{staticClass:"info",on:{click:t.toDetails}},[i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"theme-color"},[t._v(t._s(t.item.post_id?t.item.title:"《"+t.item.title+"》")+" ")])]):t._e(),"book"==t.item.type?i("div",{staticClass:"punches theme-color",on:{click:t.toReadStat}},[t._v("\n                    "+t._s(t.item.sign_read_count>0?"累计"+t.item.sign_read_count+"本":"")+"\n                ")]):i("div",{staticClass:"include"},[t._v("\n                    收录\n                ")])])])])])},a=[],n=(i("a481"),i("cebc")),o=i("9993"),c=i("bec1"),l=i("591a"),r=i("f6ba"),u=i("d248"),m={name:"article-card",props:["item","detailsId","type","childId","cardStyle"],components:{Round:u["a"],media:r["a"]},computed:Object(n["a"])({},Object(l["c"])(["userDataState"]),{details:function(){return Object(c["b"])(this.item.details)?this.item.details.replace(/<[^>]+>/g,""):this.item.details}}),data:function(){return{article:{},username:"",flag:!1,textShow:!0}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this;if("post"==this.type){var e={params:{ajax:1,id:this.detailsId}};o["a"].get("/book/SchoolArticle/detail",e).then(function(e){1==e.data.status&&(t.flag=!0,t.article=e.data.data.post,1==e.data.data.post.template_id?t.textShow=!0:t.textShow=!1,t.username=e.data.data.post.user.username)})}},toDetails:function(){var t="book"==this.item.type?"book-details":"article";this.$emit("toDetails",{routeName:t,detailsId:this.detailsId})},toReadStat:function(){this.$router.push({name:"readStat",query:{id:this.childId}})},getTimeAgo:function(t){return Object(c["l"])(1e3*t)}}},d=m,h=(i("db12"),i("6bc7"),i("2877")),p=Object(h["a"])(d,s,a,!1,null,"47a3a470",null);e["a"]=p.exports},"960b":function(t,e,i){"use strict";var s=i("965f"),a=i.n(s);a.a},"965f":function(t,e,i){},a0ae:function(t,e,i){"use strict";var s=i("de22"),a=i.n(s);a.a},a459:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a});var s=[{name:"月饼",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(37).png",amount:10},{name:"中秋快乐",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(38).png",amount:10},{name:"纪念勋章",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(46).png",amount:100},{name:"西瓜",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(23).png",amount:0},{name:"魔法星瓶",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(19).png",amount:20},{name:"香蕉猴",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(21).png",amount:10},{name:"铃铛",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(22).png",amount:0},{name:"棒棒糖",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(24).png",amount:10},{name:"猫爪布丁",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(25).png",amount:50},{name:"米奇气球",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(26).png",amount:20},{name:"小金猪",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(27).png",amount:50},{name:"时光沙漏",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(28).png",amount:20},{name:"冰淇淋",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(29).png",amount:20},{name:"火箭",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(30).png",amount:100},{name:"彩虹点心",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(31).png",amount:50},{name:"是多肉啊",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(32).png",amount:20},{name:"小飞象吹风机",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(33).png",amount:20},{name:"平底锅",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(34).png",amount:50},{name:"粉红豹抱",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(35).png",amount:80},{name:"马卡龙",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(36).png",amount:80},{name:"草莓奶昔",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(39).png",amount:60},{name:"时光机",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(41).png",amount:80},{name:"团团",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(42).png",amount:1e3},{name:"旋转木马",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(43).png",amount:80},{name:"春夏秋冬",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(44).png",amount:60},{name:"朝花夕拾",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(45).png",amount:50},{name:"晒红",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(20).png",amount:10},{name:"太阳眼镜",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(47).png",amount:30},{name:"晴天娃娃",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(18).png",amount:10},{name:"风铃",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(48).png",amount:10},{name:"小红帽",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(49).png",amount:10},{name:"白巧克力",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(51).png",amount:10},{name:"莲花灯",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(52).png",amount:10},{name:"欢庆灯笼",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(53).png",amount:100},{name:"鼓乐齐鸣",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(54).png",amount:80},{name:"小狐狸",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(55).png",amount:100},{name:"心翼",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(58).png",amount:100},{name:"安排一下",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(59).png",amount:80},{name:"星星",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(60).png",amount:80},{name:"翅膀",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(61).png",amount:100},{name:"门票",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(62).png",amount:10},{name:"小喵风扇",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(63).png",amount:20},{name:"小鸡团子",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(64).png",amount:50},{name:"天鹅之恋",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(65).png",amount:100},{name:"粽子",icon:"https://assets-moonbook.oss-cn-beijing.aliyuncs.com/liwu/%20liwu(17).png",amount:50}],a=[{price:1,coin:10},{price:2,coin:20},{price:5,coin:50},{price:10,coin:100},{price:20,coin:210},{price:30,coin:330},{price:50,coin:560},{price:100,coin:1300},{price:200,coin:2800}]},abc1:function(t,e,i){},ae3a:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"topic-list"},[i("van-picker",{ref:"picker",attrs:{"show-toolbar":"",title:t.title,columns:t.column,"value-key":"cate_name"},on:{change:t.onCateChange,cancel:t.close,confirm:function(e){return t.$emit("confirm")}}})],1)},a=[],n=(i("ac6a"),i("cebc")),o=i("591a"),c={name:"topic-list",props:["type","topicList","tagIndex","cateIndex","cateName"],computed:Object(n["a"])({},Object(o["c"])(["managerState"]),{column:function(){var t=[{values:this.topicList,className:"column1",defaultIndex:this.tagIndex},{values:this.topicList[this.tagIndex]?this.topicList[this.tagIndex].children:[],className:"column2",defaultIndex:this.cateIndex}];return t},title:function(){var t="宝贝主页的分类";switch(this.$route.query.back){case"class-home":t="班级主页的分类";break;case"apps-school":t="学校主页的分类";break}return t}}),methods:{onCateChange:function(t,e,i){t.setColumnValues(1,e[0].children),this.$emit("select",e[i])},close:function(){this.$refs.picker.setColumnValues(1,this.column[1].values),this.$refs.picker.setColumnIndex(0,0),this.$refs.picker.setColumnIndex(1,0),this.$emit("close")}}},l=c,r=i("2877"),u=Object(r["a"])(l,s,a,!1,null,"7f7e82cb",null);e["a"]=u.exports},bb5e:function(t,e,i){},bcd6:function(t,e,i){},d050:function(t,e,i){"use strict";var s=i("bb5e"),a=i.n(s);a.a},d248:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"welt"},t._l(t.round,function(t,e){return i("div",{key:e,staticClass:"round",class:"round-"+e,style:{width:t.w,height:t.w}})}),0)},a=[],n={name:"round",data:function(){return{round:[{w:"300px"},{w:"100px"},{w:"50px"},{w:"200px"},{w:"60px"}]}}},o=n,c=(i("9274"),i("2877")),l=Object(c["a"])(o,s,a,!1,null,"2b981942",null);e["a"]=l.exports},db12:function(t,e,i){"use strict";var s=i("abc1"),a=i.n(s);a.a},de22:function(t,e,i){},e210:function(t,e,i){"use strict";var s=i("51dc"),a=i.n(s);a.a},f6ba:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",class:"article"==t.$route.name?"article":"",attrs:{id:"media"},on:{click:t.toArticle}},["card"==t.type&&"0"==t.item.template_id?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(t.item.title))]):t._e(),t.item.details&&t.isDetailsShow?i("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:"card"==t.type?2:0,expression:"type == 'card'?2:0",arg:"20"}],ref:"textContent",staticClass:"text",class:0==t.item.template_id?"content":"",domProps:{innerHTML:t._s(t.item.details)}}):t._e(),"1"==t.item.hasvideo?i("div",{staticClass:"media",class:"1"==t.item.hasvideo?"video-cover":""},t._l(t.item.photos,function(e,s){return i("div",{key:s,staticClass:"thumb"},[e&&"1"==e.is_video?i("div",{staticClass:"video-thumb"},["card"==t.type||t.isCommentShow?i("div",{staticClass:"player-card",class:["90"==e.rotate?"vertical":"",t.isCommentShow?"poster":""]},[t._m(0,!0),i("img",{attrs:{src:t.item.cover,alt:"视频封面"}}),i("van-tag",{staticClass:"duration",attrs:{size:"medium",color:"rgba(0,0,0,.5)"}},[t._v(t._s(t.getDuration(e.duration)))])],1):t.isCommentShow?t._e():i("div",{staticClass:"video-wrapper"},[i("video",{ref:"videoPlayer",refInFor:!0,attrs:{id:"video",controls:"controls",src:e.photo,poster:e.thumb,preload:"auto","x-webkit-airplay":"true",airplay:"allow","webkit-playsinline":"true","x5-playsinline":"",playsinline:"true"}})])]):t._e()])}),0):t._e(),"1"==t.item.template_id&&t.item.photos?i("div",{staticClass:"media img"},[i("div",{class:["card"==t.type?"layout-"+t.item.photos.length:""]},[i("van-row",{attrs:{gutter:4}},t._l(t.item.photos,function(e,s){return i("van-col",{key:s,attrs:{span:t.grid}},[e&&0==e.is_video&&0==e.is_audio?i("div",{staticClass:"img-grid",class:[1==t.item.photos.length&&e.height/e.width>1?"long":"",1==t.item.photos.length&&"details"==t.type?"alone":""]},[i("img",{staticClass:"img-preview",class:[e.height/e.width>2?"long":""],attrs:{src:e.thumb,large:e.photo,preview:"card"!=t.type&&e.post_id}}),e.height/e.width>2&&"card"==t.type&&s<1?i("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("长图")]):t._e()],1):t._e()])}),1)],1)]):t._e(),"0"==t.item.template_id&&"card"==t.type&&t.item.cover&&"1"!=t.item.hasvideo?i("div",{staticClass:"media img long-article-thumb"},[i("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:t.item.cover||t.item.photos[0].thumb}}),i("van-tag",{staticClass:"photo-tag",attrs:{type:"primary"}},[t._v("文章")])],1):t._e()])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"player"},[i("i",{staticClass:"iconfont"},[t._v("")])])}],n=(i("7f7f"),i("a481"),i("bec1")),o={name:"media",props:{item:{type:Object,default:function(){return{photos:[]}}},type:{type:String,default:""},coverShow:{type:Boolean,default:!0},stopClick:{type:Boolean,default:!1},schoolName:{type:String,default:""},schoolId:{type:String,default:""},isDetailsShow:{type:Boolean,default:!0},isCommentShow:{type:Boolean,default:!1}},computed:{grid:function(){var t;return t=4==this.item.photos.length||2==this.item.photos.length?12:1==this.item.photos.length&&"details"==this.type?24:8,t}},data:function(){return{playing:!1}},updated:function(){this.$nextTick(function(){for(var t=document.getElementsByTagName("img"),e=0;e<t.length;e++)-1==t[e].src.indexOf(location.origin)&&(t[e].src=t[e].src.replace("http:","https:"))})},methods:{toArticle:function(){"card"!=this.type||this.stopClick||this.$router.push({name:"article",query:{id:this.item.post_id,type:this.item.template_id,back:this.$route.name,back_id:this.$route.query.id,school_name:this.schoolName,school_id:this.schoolId}})},toVideoPage:function(t){this.$router.push({name:"video-page",query:{id:t.post_id,user_id:this.item.user_id,back:this.$route.name,back_id:this.$route.query.id}})},getDuration:function(t){return Object(n["e"])(t)}}},c=o,l=(i("a0ae"),i("1170"),i("2877")),r=Object(l["a"])(c,s,a,!1,null,"1d14f574",null);e["a"]=r.exports},fc9b:function(t,e,i){}}]);