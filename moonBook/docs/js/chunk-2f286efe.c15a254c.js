(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f286efe"],{"06d7":function(t,a,e){},1776:function(t,a,e){"use strict";var s=e("06d7"),i=e.n(s);i.a},"1d2b":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.videoList.length>0?e("div",{staticClass:"video"},[e("van-cell",{attrs:{"title-class":"cell-title",title:t.title}},[e("div",{staticClass:"icon",attrs:{slot:"icon"},slot:"icon"},[e("i",{staticClass:"iconfont"},[t._v("")])])]),e("div",{staticClass:"scroll-x"},[e("div",{staticClass:"video-list flex"},t._l(t.videoList,function(a,s){return e("div",{key:s,staticClass:"video-item scroll-item",on:{click:function(e){return t.toVideoPage(a)}}},[e("div",{staticClass:"video"},[e("div",{staticClass:"video-cover"},[e("div",[e("img",{attrs:{src:a.cover,alt:"视频封面-"+s}})]),a.post_id==t.$route.query.id?e("div",{staticClass:"playing flex flex-align"},[e("i",{staticClass:"iconfont"},[t._v("")]),e("span",{staticClass:"text"},[t._v("正在播放")])]):t._e()]),e("div",{staticClass:"video-info"},[e("div",{staticClass:"user-info flex flex-align"},[e("div",{staticClass:"user-data flex flex-align"},[e("div",{staticClass:"avatar"},[e("img",{directives:[{name:"http2https",rawName:"v-http2https"}],attrs:{src:a.user.avatar}})]),e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v("\n                  "+t._s(a.user.name)+"\n                ")])]),e("div",{staticClass:"views"},[t._v("\n                "+t._s(a.views)+"次播放\n              ")])])])])])}),0)])],1):t._e()},i=[],n=(e("7364"),e("9993")),c={name:"Video",props:["title","type"],data:function(){return{videoList:[]}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:{fetchData:function(){var t=this,a={};a=this.$route.query.user_id?{params:{portal_name:"首页",sort:"post",user_id:this.$route.query.user_id,hasvideo:1}}:{params:{portal_name:"首页",sort:"tuijian",hasvideo:1}},n["a"].get("/book/SchoolArticle/getList?sort=post",a).then(function(a){t.videoList=a.data.data})},toVideoPage:function(t){var a={};a=this.$route.query.user_id?{id:t.post_id,user_id:this.$route.query.user_id,back:this.$route.name}:{id:t.post_id,user_id:t.user_id,back:this.$route.name},this.$router.push({name:"video-page",query:a}),this.$emit("refresh")}}},o=c,r=(e("db60"),e("5a45"),e("17cc")),l=Object(r["a"])(o,s,i,!1,null,"36a7c0dd",null);a["a"]=l.exports},"2c02":function(t,a,e){"use strict";var s=e("2f44"),i=e.n(s);i.a},"2f44":function(t,a,e){},3433:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"home page-padding"},[e("div",{staticClass:"head-bar flex flex-align",class:[t.themeBarSearch?"theme-background":"default-head-bar-background"]},[e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"left-btn",on:{click:t.toCity}},[t.userPointState?e("span",[t._v(t._s(t.userPointState.city))]):e("span",[t._v("定位中")])]),e("div",{staticClass:"search-bar",on:{click:t.toSearch}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v(" "+t._s(t.searchText))]),e("div",{staticClass:"right-btn"},[e("span",{staticClass:"notice-badge"},[e("i",{staticClass:"iconfont",on:{click:t.toNotice}},[t._v(t._s(t.MsgLengthState>0?"":""))]),t.MsgLengthState>0?e("b",{staticClass:"read-dot"}):t._e()])])]),e("div",{staticClass:"container"},[e("div",{ref:"domHeight",staticClass:"swipe-content"},[e("van-swipe",{attrs:{autoplay:3e3}},t._l(t.banner,function(a,s){return e("van-swipe-item",{key:s,on:{click:function(e){return t.goAd(a)}}},[e("a",{attrs:{href:a.link}},[e("img",{staticClass:"banner",attrs:{src:a.image,alt:a.title}})])])}),1)],1),e("div",{staticClass:"card"},[e("div",{staticClass:"apps-module module"},[e("apps-list",{attrs:{appsList:t.appsList}})],1)]),e("div",{staticClass:"card-top"},[e("investment-ad",{attrs:{investmentAd:t.investmentAd,isAdshow:t.isAdshow}})],1),e("div",{staticClass:"module"},[e("news-list",{attrs:{newsList:t.newsList}})],1),e("div",{staticClass:"module"},[e("video-list",{attrs:{title:"视频精选",type:"home"}})],1),e("div",[e("article-list")],1)]),0==t.userDataState.card_level?e("div",{staticClass:"apply"},[e("van-button",{staticClass:"theme-btn",class:[t.btnPulse?"rubberBand animated second":""],attrs:{round:"",size:"normal",type:"primary"},on:{click:t.toAccept}},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v("  \n            办理借阅卡\n        ")])],1):t._e()])},i=[],n=(e("f763"),e("e20c")),c=e("591a"),o=e("9993"),r=e("77e0"),l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"apps"},[e("div",{staticClass:"app-list flex"},t._l(t.appList,function(a,s){return e("div",{key:s,staticClass:"app-item",on:{click:function(e){return t.toPath(a)}}},[e("div",{staticClass:"icon iconfont",class:[a.iconClass,"icon-find"==a.iconClass?"jackInTheBox animated":""]}),e("div",{staticClass:"app-name"},[t._v(t._s(a.name))])])}),0)])},d=[],u={name:"apps",computed:Object(n["a"])({},Object(c["c"])(["userDataState"]),{appList:function(){var t=[];return t=[{iconClass:"icon-school",name:"学校主页",pathName:"apps-school",params:{id:this.userDataState.teacher_school_id>0?this.userDataState.teacher_school_id:this.userDataState.school_id},href:!1},{iconClass:"icon-story",name:"听故事",pathName:"audioPlayer",params:""},{iconClass:"icon-yuer",name:"育儿专栏",pathName:"apps-find",params:{cate_id:149,pageTitle:"育儿专栏"},href:!1},{iconClass:"icon-find",name:"发现",pathName:"apps-find",params:"",href:!1},{iconClass:"icon-jiaoyu",name:"教育",pathName:"apps-find",params:{tag_id:134,pageTitle:"教育"},href:!1}],t}}),methods:{toPath:function(t){t.href?location.href=t.href:this.$router.push({name:t.pathName,query:t.params})}}},v=u,p=(e("8eae"),e("17cc")),h=Object(p["a"])(v,l,d,!1,null,"0f660f9b",null),m=h.exports,f=e("6d4b"),_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"news"},[e("van-cell-group",[e("div",{staticClass:"list"},t._l(t.newsList,function(a,s){return e("div",{key:s,staticClass:"item",on:{click:function(e){return t.toArticle(a)}}},[e("van-cell",[e("van-row",{attrs:{gutter:"10"}},[e("van-col",{attrs:{span:"10"}},[e("div",{staticClass:"cover"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.cover,expression:"item.cover"}],staticClass:"lazy",attrs:{alt:a.title}})])]),e("van-col",{attrs:{span:"14"}},[e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:2,expression:"2",arg:"20"}],staticClass:"title"},[t._v(t._s(a.title))]),e("div",{staticClass:"info"},[e("div",{staticClass:"flex flex-align"},[e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"name"},[t._v("发布:"+t._s(a.name))]),e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school"},[t._v(t._s(a.cate_name))])]),e("div",{staticClass:"foot-bar-left"},[e("div",{staticClass:"time"},[t._v(t._s(t.getTimeAgo(a.create_time)))])]),e("div",{staticClass:"foot-bar-right watch"},[e("i",{staticClass:"iconfont"},[t._v("")]),t._v("\n                                    "+t._s(a.views>1e3?"999+":a.views)+"\n                                ")])]),a.address?e("div",{staticClass:"info"},[e("div",{staticClass:"category"},[t._v(t._s(a.cate_name))]),e("div",{staticClass:"foot-bar-left address"},[t._v(t._s(a.address))])]):t._e()])],1)],1)],1)}),0)])],1)},g=[],C=(e("7364"),e("bec1")),b={name:"news",props:["newsList"],methods:{toArticle:function(t){this.$router.push({name:"article",query:{id:t.id,back:this.$route.name}})},getTimeAgo:function(t){return Object(C["l"])(1e3*t)}}},w=b,y=(e("2c02"),Object(p["a"])(w,_,g,!1,null,"496bc25c",null)),x=y.exports,k=e("1d2b"),A=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"article-list"},[e("van-list",{attrs:{finished:t.finished,"finished-text":t.$store.state.slogan},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("van-cell-group",t._l(t.list,function(a,s){return e("div",{key:s,staticClass:"item",on:{click:function(e){return t.toArticle(a)}}},["0"==a.template_id&&a.cover?e("van-cell",[e("div",{staticClass:"cell-content"},[e("van-row",{attrs:{gutter:10}},[e("van-col",{attrs:{span:a.photos.length>3?"24":"14"}},[e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:3,expression:"3",arg:"20"}],staticClass:"title",class:[a.photos.length>3?"layout-t-b":"layout-l-r"]},[t._v("\n                    "+t._s(a.title)+"\n                  ")])]),e("van-col",{attrs:{span:a.photos.length>3?"24":"10"}},[a.photos.length>3?e("van-row",{attrs:{gutter:5}},t._l(a.photos,function(s,i){return e("van-col",{key:i,attrs:{span:a.photos.length<3?"12":"8"}},[i<3?e("div",{staticClass:"img-grid"},[e("img",{staticClass:"img-preview",attrs:{src:s.thumb}})]):t._e()])}),1):e("van-row",{staticClass:"article-cover",attrs:{gutter:5}},[e("van-col",{attrs:{span:24}},[e("div",{staticClass:"img-grid"},[e("img",{directives:[{name:"http2https",rawName:"v-http2https"}],staticClass:"img-preview",attrs:{src:t.thumb(a.cover)}})])])],1)],1)],1),e("div",{staticClass:"article-data flex flex-align"},[1==a.is_top?e("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("置顶")]):t._e(),e("div",{staticClass:"info flex flex-align"},[a.schoolName?e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"school"},[t._v(t._s(a.schoolName))]):t._e(),e("div",{staticClass:"views"},[t._v(t._s(a.views)+"浏览")]),e("div",{staticClass:"time-ago"},[t._v(t._s(a.timeAgo))])])],1)],1)]):t._e()],1)}),0)],1)],1)},$=[],L=e("5c8c"),S=e("a618"),N={name:"article-list",components:{slogan:L["a"],graphicCard:S["a"]},data:function(){return{list:[],loading:!1,finished:!1,page:Object(C["j"])(1,30)}},methods:{onLoad:function(){this.getList()},getList:function(){var t=this,a={params:{page:this.page,sort:"top",portal_name:"首页",load_mode:"random"}};return o["a"].get("/book/SchoolArticle/getList",a).then(function(a){1==a.data.status&&(1==t.page?t.list=a.data.data:t.list=t.list.concat(a.data.data),t.loading=!1,t.page++,t.list.length>=200&&(t.finished=!0))})},toArticle:function(t){this.$router.push({name:"article",query:{id:t.post_id,back:this.$route.name,back_id:this.$route.query.id}})},thumb:function(t){if(t){var a="inews.gtimg.com";return t.indexOf(a)>-1?"/book/api/remotePic?url=".concat(t):t}}}},j=N,D=(e("7414"),Object(p["a"])(j,A,$,!1,null,"007c51ec",null)),O=D.exports,q=e("e2ba"),P=e("0606"),E={name:"home",mixins:[r["h"]],components:{addChild:q["a"],appsList:m,investmentAd:f["a"],newsList:x,videoList:k["a"],articleList:O,tips:P["a"]},computed:Object(n["a"])({},Object(c["c"])(["userPointState","userDataState","MsgLengthState"])),data:function(){return{percentVal:0,tipsShow:!1,cityListShow:!1,searchShow:!1,prompt:"搜索城市名/拼音",active:0,applyShow:!1,btnPulse:!1,isAdshow:!0,show:!1,searchText:"搜索图书/幼儿园/文章",banner:[],appsList:"",investmentAd:"",newsList:"",videoList:""}},created:function(){this.fetchData()},watch:{$router:"fetchData"},methods:Object(n["a"])({},Object(c["b"])(["getCityDistrict"]),{fetchData:function(){var t=this;setInterval(function(){t.btnPulse=!0,t.show=!0},3e3),o["a"].get("/book/index/home_v2").then(function(a){t.banner=a.data.homeData.banner,t.investmentAd=a.data.homeData.investmentAd,t.newsList=t.formatNews(a.data.homeData.newsList),t.videoList=a.data.homeData.videoList}).then(function(){o["a"].get("/book/memberUser/getInfo").then(function(a){t.isVip=a.data.isVip})})},onStepActiveChange:function(t){this.active=t},toAccept:function(){this.$router.push({name:"AcceptSchoolList"})},toTips:function(){this.tipsShow=!this.tipsShow,localStorage.setItem("grapicData","")},toNotice:function(){this.$router.push({name:"notice"})},toCity:function(){this.$router.push({name:"city"})},toSearch:function(){this.$router.push({name:"search"})},formatNews:function(t){return t.forEach(function(t,a){t.watch=t.views}),t},goAd:function(t){t.link_url&&"bookshelf"===t.link_type&&this.$router.push(t.link_url)}})},T=E,I=(e("a7da"),e("9e54"),Object(p["a"])(T,s,i,!1,null,"12ae86be",null));a["default"]=I.exports},4571:function(t,a,e){},"5a45":function(t,a,e){"use strict";var s=e("7194"),i=e.n(s);i.a},"5c8c":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"slogan"},[t._v("\n    "+t._s(t.$store.state.slogan)+"\n")])},i=[],n={name:"slogan"},c=n,o=(e("d071"),e("17cc")),r=Object(o["a"])(c,s,i,!1,null,"ef722a5e",null);a["a"]=r.exports},"6d4b":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"investment"},[t.isAdshow&&"apps-school"!=t.$route.name?e("div",{staticClass:"light-box"},[e("div",{staticClass:"close",on:{click:t.hideAd}},[e("i",{staticClass:"iconfont"},[t._v("")])]),"apps-school"!=t.$route.name?e("a",{attrs:{href:t.investmentAd.link}},[e("img",{attrs:{src:t.investmentAd.banner,alt:"加盟商广告"}})]):t._e()]):t._e(),e("div",{staticClass:"box"},[e("van-row",{staticClass:"flex flex-align",attrs:{gutter:"10"}},[e("van-col",{attrs:{span:"7"}},[e("a",{staticClass:"box-link",attrs:{href:t.investmentAd.link}},[t._v(t._s(""+(t.investmentAd.text?t.investmentAd.text:"成为书架馆长"))+" ")])]),e("van-col",{attrs:{span:"10"}},["notice"==t.type&&t.notice.length?e("div",{staticClass:"content"},[e("van-swipe",{attrs:{autoplay:5e3,height:60,"indicator-color":"#fff",vertical:"","show-indicators":!1}},t._l(t.list,function(a,s){return e("van-swipe-item",{key:s},t._l(a,function(a,s){return e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],key:s,staticClass:"notice theme-color",on:{click:function(e){return t.toArticle(a)}}},[t._v("\n                "+t._s(a.details||a.title)+"\n              ")])}),0)}),1)],1):e("div",{staticClass:"content"},[e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"notice"},[t._v("万册图书触手可及")]),e("div",{directives:[{name:"line-clamp",rawName:"v-line-clamp:20",value:1,expression:"1",arg:"20"}],staticClass:"notice"},[t._v("幼儿园/学校的新名片")])])]),e("van-col",{staticClass:"flex flex-justify",attrs:{span:"7"}},[e("van-button",{staticClass:"theme-btn",attrs:{round:"",size:"small",type:"primary"},on:{click:t.toRegister}},[t._v("注册/办卡")])],1)],1)],1)])},i=[],n=(e("7364"),e("9993")),c=e("bec1"),o={name:"investment",props:["investmentAd","type"],computed:{list:function(){return Object(c["h"])(this.notice,2)}},data:function(){return{isAdshow:!0,count:0,notice:[]}},created:function(){localStorage.getItem("ad")&&(this.isAdshow=JSON.parse(localStorage.getItem("ad"))),this.fetchData()},watch:{isAdshow:function(t){localStorage.setItem("ad",t)},$router:"fetchData"},methods:{hideAd:function(){this.isAdshow=!1},toRegister:function(){this.$router.push({name:"register"})},toArticle:function(t,a){this.$router.push({name:"article",query:{id:t.post_id,type:t.template_id,back:this.$route.name,back_id:this.$route.query.id}})},fetchData:function(){var t=this,a={params:{portal_name:"学校主页",cate:"通知",school_id:this.$route.query.id||""}};n["a"].get("/book/SchoolArticle/getList",a).then(function(a){1==a.data.status&&(t.count=a.data.count,t.notice=a.data.data)})}}},r=o,l=(e("1776"),e("17cc")),d=Object(l["a"])(r,s,i,!1,null,"247569e3",null);a["a"]=d.exports},"6db0":function(t,a,e){},7194:function(t,a,e){},7414:function(t,a,e){"use strict";var s=e("a446"),i=e.n(s);i.a},"8eae":function(t,a,e){"use strict";var s=e("99b1"),i=e.n(s);i.a},"99b1":function(t,a,e){},"9e54":function(t,a,e){"use strict";var s=e("6db0"),i=e.n(s);i.a},a446:function(t,a,e){},a7da:function(t,a,e){"use strict";var s=e("4571"),i=e.n(s);i.a},d071:function(t,a,e){"use strict";var s=e("fb28"),i=e.n(s);i.a},d98e:function(t,a,e){},db60:function(t,a,e){"use strict";var s=e("d98e"),i=e.n(s);i.a},fb28:function(t,a,e){}}]);
//# sourceMappingURL=chunk-2f286efe.c15a254c.js.map