<html lang='zh'>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=320,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="Copyright" content="Copyright (c) 2006-2016 TENCENT">
        <title>mmd_videoPlayer_normal</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                /*text-align: center*/
                /*background-color: #cccccc*/
                width: 100%;
                height: 100%;
                overflow: hidden;
            }

            .duration{
                position: absolute;
                color: #fff;
                top: 10px;
                left: 10px;
            }


        </style>
        <style type="text/css">

        </style>
    </head>

    <body>
        <script src="//mat1.gtimg.com/libs/jquery/1.12.0/jquery.js"></script>
        <script src="//ossweb-img.qq.com/images/js/mmdVideoPlayer/mmd.videoplayer.min.1.0.1.js"></script>        
        <div style="position: absolute">
            <video id="video" style="display:none"></video>
            <div id="loading" class="compatibleStyle"></div>
            <div id="end" class="compatibleStyle"></div>
            <div class="duration"></div>
        </div>
        <button id="hit" class="buttonStyle">需要交互才能播放,点我播放视频</button>
        <script>
            // 获取参数
            function GetQueryString(name){
                var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)")
                var r = window.location.search.substr(1).match(reg)
                if(r!=null)return  unescape(r[2]); return null
            }

            var src = GetQueryString('videoUrl')
            var poster = GetQueryString('videoThumb')
            var btn = document.getElementById('hit')
            var duration = GetQueryString('duration')

            $('#loading').append(`<img src='${poster}'/>`)
            $('.duration').text(duration)

            var videoPlayer = new MMD.VideoPlayer({
                videoElement: document.getElementById('video'),
                src: src,
                onStart: function () {
                    console.log('video start')
                    $('.duration').css('display','none')
                },
                onEnd: function () { 
                    console.log('video end')
                    btn.style.display = 'block'
                    $('.duration').css('display','block')
                }
            })

            if (videoPlayer.isVideoCanAutoPlay) {
                videoPlayer.play()
            } else {
                btn.style.display = 'block'
                btn.addEventListener('click', function (e) {
                    btn.style.display = 'none'
                    videoPlayer.play()
                })
            }
        </script>
    </body>
</html>